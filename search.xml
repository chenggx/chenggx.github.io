<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æˆ‘çš„ä¸‰åå²</title>
      <link href="/2019/09/27/wo-de-san-shi-sui/"/>
      <url>/2019/09/27/wo-de-san-shi-sui/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ²¡æœ‰æƒ³åˆ°æ—¶é—´è¿‡çš„è¿™ä¹ˆå¿«ï¼Œå°±è¿™ä¹ˆæ¥åˆ°äº†ä¸‰åå²çš„ç”Ÿæ—¥ï¼Œæ€»è§‰å¾—éœ€è¦è®°å½•ç‚¹ä»€ä¹ˆã€‚</p></blockquote><p>æ²¡æœ‰æƒ³ä¸‰åå²æ¥çš„è¿™ä¹ˆå¿«ï¼Œè‡ªå·±è¿˜æ²¡æœ‰å®Œå…¨åšå¥½å‡†å¤‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨LaraDocké…ç½®laravel-echo-severé‡åˆ°çš„å‘</title>
      <link href="/2019/08/15/shi-yong-laradock-pei-zhi-laravel-echo-sever-yu-dao-de-keng/"/>
      <url>/2019/08/15/shi-yong-laradock-pei-zhi-laravel-echo-sever-yu-dao-de-keng/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰æƒ…æè¦ï¼šé¡¹ç›®éœ€è¦ä½¿ç”¨ webSocket è¿›è¡Œé€šä¿¡ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯ <a href="https://laradock.io/" target="_blank" rel="noopener">LaraDock</a> ä½œä¸ºç¯å¢ƒã€‚æ‰€ä»¥ä½¿ç”¨ laravel-echo-serverã€laravel-horizonã€php-worker å®¹å™¨è¿›è¡Œç¯å¢ƒçš„éƒ¨ç½²ã€‚å› ä¸ºå¯¹ Docker å¹¶ä¸æ‡‚ï¼Œä»…ä»…åªæ˜¯ä½¿ç”¨ LaraDockï¼Œæ‰€ä»¥è¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œç‰¹æ­¤è®°å½•ä¸‹æ¥ã€‚</p></blockquote><h2 id="å‘äºŒ-å‚è€ƒèµ„æ–™"><a href="#å‘äºŒ-å‚è€ƒèµ„æ–™" class="headerlink" title="å‘äºŒ å‚è€ƒèµ„æ–™"></a>å‘äºŒ <a href="https://github.com/laradock/laradock/issues/1340#issuecomment-390484505" target="_blank" rel="noopener">å‚è€ƒèµ„æ–™</a></h2><blockquote><p>LaraDock çš„ Nginx ä½¿ç”¨å¤šç«™ç‚¹é…ç½®çš„æ—¶å€™ï¼Œlaravel-echo-server æ— æ³•é“¾æ¥åˆ° web è¿›è¡Œè®¤è¯ã€‚</p></blockquote><p>é€šè¿‡åœ¨ nginx å®¹å™¨é…ç½®ä¸­æ·»åŠ åˆ«å <strong> laradock/docker-compose.yml </strong></p><pre class=" language-yml"><code class="language-yml">### NGINX Server #########################################    nginx:      build:        context: ./nginx        args:          - PHP_UPSTREAM_CONTAINER=${NGINX_PHP_UPSTREAM_CONTAINER}          - PHP_UPSTREAM_PORT=${NGINX_PHP_UPSTREAM_PORT}      volumes:        - ${APP_CODE_PATH_HOST}:${APP_CODE_PATH_CONTAINER}        - ${NGINX_HOST_LOG_PATH}:/var/log/nginx        - ${NGINX_SITES_PATH}:/etc/nginx/sites-available      ports:        - "${NGINX_HOST_HTTP_PORT}:80"        - "${NGINX_HOST_HTTPS_PORT}:443"      depends_on:        - php-fpm      networks:        # before ----        # - frontend        # - backend        # end before ----        frontend:        backend:            aliases:              - my-site.com    ##åˆ«ååœ°å€ï¼Œåœ¨laravel-echo-server.json ä¸­å¡«å†™è¯¥åœ°å€å°±å¯ä»¥äº†</code></pre><p>æ›´æ”¹å®Œé…ç½®ä¹‹åéœ€è¦é‡æ–°æ„å»º nginx å’Œ laravel-echo-server å®¹å™¨ã€‚<br>å¹¶é‡æ–°å¼€å¯ã€‚</p><h2 id="å‘äºŒ"><a href="#å‘äºŒ" class="headerlink" title="å‘äºŒ"></a>å‘äºŒ</h2><blockquote><p>larave-echo-server çš„ ssl è¯ä¹¦</p></blockquote><ol><li>ç›´æ¥é…ç½® ssl è¯ä¹¦ã€‚ï¼ˆä¸æ˜ç™½è¯ä¹¦éœ€è¦å‘åœ¨ç›®å½•çš„ä»€ä¹ˆä½ç½®ï¼Œæ‰€ä»¥ google äº†å¾ˆå¤šå†…å®¹ä¹‹åé€‰æ‹©äº†ä¸‹é¢çš„æ–¹æ³•ã€‚ä»¥åå¦‚æœæœ‰æœºä¼šè¡¥å……ç¬¬ä¸€ç‚¹ï¼‰</li><li>é…ç½® nginx åå‘ä»£ç†ã€‚ <a href="https://github.com/tlaverdure/laravel-echo-server" target="_blank" rel="noopener">laravel-echo-server</a></li></ol><pre class=" language-nginx"><code class="language-nginx"><span class="token comment" spellcheck="true">#ä»¥ä¸‹å†…å®¹éœ€è¦åœ¨ä½ çš„ nginx ç«™ç‚¹é…ç½®æ–‡ä»¶çš„ server{} å—ä¹‹å†…</span><span class="token keyword">location</span> <span class="token operator">/</span>socket<span class="token punctuation">.</span>io <span class="token punctuation">{</span>        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>laravel<span class="token operator">-</span>echo<span class="token operator">-</span><span class="token keyword">server</span><span class="token punctuation">:</span><span class="token number">6001</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">#å¡«å†™é https çš„åœ°å€è¿›è¡Œåå‘ä»£ç†ï¼Œå¦‚æœ Echo å’Œ Nginx åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨å¯ä»¥å¡«å†™ localhost</span>        <span class="token keyword">proxy_http_version</span> <span class="token number">1.1</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Connection <span class="token string">"Upgrade"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><ol start="3"><li>é…ç½® laravel-echo-server é…ç½®æ–‡ä»¶ laravel-echo-server.json ä¸ºå¦‚ä¸‹å†…å®¹</li></ol><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>        <span class="token property">"authHost"</span><span class="token operator">:</span> <span class="token string">"https://laravel-echo-server"</span><span class="token punctuation">,</span> //æ³¨æ„ï¼šæ”¹åœ°å€æŒ‡å‘ web ç«™ç‚¹ï¼Œå³ echo-server æƒ³webç«¯è®¤è¯çš„åœ°å€        <span class="token property">"authEndpoint"</span><span class="token operator">:</span> <span class="token string">"/broadcasting/auth"</span><span class="token punctuation">,</span>        <span class="token property">"clients"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"database"</span><span class="token operator">:</span> <span class="token string">"redis"</span><span class="token punctuation">,</span>        <span class="token property">"databaseConfig"</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token property">"redis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>                        <span class="token property">"port"</span><span class="token operator">:</span> <span class="token string">"6379"</span><span class="token punctuation">,</span>                        <span class="token property">"host"</span><span class="token operator">:</span> <span class="token string">"redis"</span>                <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"devMode"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token property">"host"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"port"</span><span class="token operator">:</span> <span class="token string">"6001"</span><span class="token punctuation">,</span>        <span class="token property">"protocol"</span><span class="token operator">:</span> <span class="token string">"http"</span><span class="token punctuation">,</span>        <span class="token property">"socketio"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"sslCertPath"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"sslKeyPath"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">}</span></code></pre><h2 id="æ“ä½œæŠ€å·§"><a href="#æ“ä½œæŠ€å·§" class="headerlink" title="æ“ä½œæŠ€å·§"></a>æ“ä½œæŠ€å·§</h2><ol><li>ä¸ä½¿ç”¨ -d å‚æ•°å¯ä»¥æ›´å¥½çš„è¿›è¡Œè°ƒè¯•<pre class=" language-shell"><code class="language-shell">docker-compose up laravel-echo-server</code></pre></li><li>ä½¿ç”¨ logs å‚æ•°å¯ä»¥æŸ¥çœ‹è¯¦æƒ…çš„æ—¥å¿—è¾“å‡º<pre class=" language-shell"><code class="language-shell">docker-compose logs laravel-echo-server</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ç¯å¢ƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LaraDock </tag>
            
            <tag> å¼€å‘ç¯å¢ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravelå­¦ä¹ ç¬”è®°</title>
      <link href="/2019/06/18/laravel-xue-xi-bi-ji/"/>
      <url>/2019/06/18/laravel-xue-xi-bi-ji/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¬¬ä¸€æ­¥ï¼šäº†è§£å‡ ä¸ªå¸¸ç”¨åç§°"><a href="#ç¬¬ä¸€æ­¥ï¼šäº†è§£å‡ ä¸ªå¸¸ç”¨åç§°" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šäº†è§£å‡ ä¸ªå¸¸ç”¨åç§°"></a>ç¬¬ä¸€æ­¥ï¼šäº†è§£å‡ ä¸ªå¸¸ç”¨åç§°</h2><blockquote><p>ä»£ç åŸºäº Laravel-5.8 éƒ¨åˆ†å†…å®¹ç»™å…¶ä»–ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œä½†æ•´ä½“é€»è¾‘æ˜¯æ²¡æœ‰å¤ªå¤§å·®åˆ«çš„ã€‚</p></blockquote><blockquote><p>Service Containerã€Service Providerã€Facadesã€Contractsã€‚å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨ Laravel æ¡†æ¶çš„æ—¶å€™è¢«è¿™å‡ ä¸ªè¯ç›´æ¥æè’™åœˆäº†ï¼Œå®Œå…¨ä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€ï¼Œå°¤å…¶æ˜¯åœ¨çœ‹å®Œæ–‡æ¡£ä¹‹åï¼ŒçœŸçš„æƒ³è¯´ WTF ã€‚ä¸è¿‡ä¸çŸ¥é“ä¹Ÿä¸ä¼šå¤ªå½±å“ä½¿ç”¨ã€‚ï¼ˆğŸ˜…æœ‰ä¸ªæœ‹å‹è¯´è¿‡ï¼Œä¸ç®¡ç”¨ç€åœ¨ NB çš„æ¡†æ¶ï¼Œä¾ç„¶å¯ä»¥å†™å‡ºå±ä¸€æ ·çš„ä»£ç ï¼‰</p></blockquote><h3 id="Service-Container"><a href="#Service-Container" class="headerlink" title="Service Container"></a>Service Container</h3><p>ä¸­æ–‡è§£é‡Šï¼šæœåŠ¡å®¹å™¨ ï¼ˆğŸ˜‚ æ˜¯ä¸æ˜¯çœ‹å®Œè¿™ä¸ªç¿»è¯‘æ›´ä¸çŸ¥é“æ˜¯å•¥äº†ï¼‰</p><p>æˆ‘çš„ç†è§£ï¼šä¸€ä¸ªè£…ç€å„ç§å„æ ·çš„æœåŠ¡å®ä¾‹çš„å®¹å™¨ã€‚è¿™äº›æœåŠ¡å°±æ˜¯ Laravel ä¸­çš„å„ç§æ¨¡å—ï¼Œå¦‚ Redisã€Route ç­‰ç­‰ã€‚</p><p>å®ç°ä¸€ä¸ªç®€å•çš„å®¹å™¨ï¼š</p><pre class=" language-php"><code class="language-php"><span class="token keyword">class</span> <span class="token class-name">Container</span><span class="token punctuation">{</span>  <span class="token keyword">protected</span> <span class="token variable">$binds</span><span class="token punctuation">;</span>  <span class="token keyword">protected</span> <span class="token variable">$instances</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">bind</span><span class="token punctuation">(</span><span class="token variable">$abstract</span><span class="token punctuation">,</span> <span class="token variable">$concrete</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//Todo: å‘ container æ·»åŠ ä¸€ç§å¯¹è±¡çš„çš„ç”Ÿäº§æ–¹å¼</span>    <span class="token comment" spellcheck="true">//$abstract: ç¬¬ä¸€ä¸ªå‚æ•° $abstract, ä¸€èˆ¬ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²(æœ‰æ—¶å€™ä¹Ÿä¼šæ˜¯ä¸€ä¸ªæ¥å£), å½“ä½ éœ€è¦ make è¿™ä¸ªç±»çš„å¯¹è±¡çš„æ—¶å€™, ä¼ å…¥è¿™ä¸ªå­—ç¬¦ä¸²(æˆ–è€…æ¥å£), è¿™æ ·make å°±çŸ¥é“åˆ¶é€ ä»€ä¹ˆæ ·çš„å¯¹è±¡äº†</span>    <span class="token comment" spellcheck="true">//$concrete: ç¬¬äºŒä¸ªå‚æ•° $concrete, ä¸€èˆ¬ä¸ºä¸€ä¸ª Closure æˆ–è€… ä¸€ä¸ªå•ä¾‹å¯¹è±¡, ç”¨äºè¯´æ˜åˆ¶é€ è¿™ä¸ªå¯¹è±¡çš„æ–¹å¼</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$concrete</span> <span class="token keyword">instanceof</span> <span class="token class-name">Closure</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">binds</span><span class="token punctuation">[</span><span class="token variable">$abstract</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$concrete</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">instances</span><span class="token punctuation">[</span><span class="token variable">$abstract</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$concrete</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$abstract</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//Todo: ç”Ÿäº§ä¸€ç§å¯¹è±¡</span>    <span class="token comment" spellcheck="true">//$abstract: åœ¨bindæ–¹æ³•ä¸­å·²ç»ä»‹ç»è¿‡</span>    <span class="token comment" spellcheck="true">//$parameters: ç”Ÿäº§è¿™ç§å¯¹è±¡æ‰€éœ€è¦çš„å‚æ•°</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">instances</span><span class="token punctuation">[</span><span class="token variable">$abstract</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">instances</span><span class="token punctuation">[</span><span class="token variable">$abstract</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">array_unshift</span><span class="token punctuation">(</span><span class="token variable">$parameters</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">call_user_func_array</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">binds</span><span class="token punctuation">[</span><span class="token variable">$abstract</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="ä¸ºä»€ä¹ˆç†è§£-IOC-Container-å¯¹äºç†è§£-Laravel-æ¶æ„æ˜¯å¦‚æ­¤çš„é‡è¦ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆç†è§£-IOC-Container-å¯¹äºç†è§£-Laravel-æ¶æ„æ˜¯å¦‚æ­¤çš„é‡è¦ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆç†è§£ IOC Container å¯¹äºç†è§£ Laravel æ¶æ„æ˜¯å¦‚æ­¤çš„é‡è¦ï¼Ÿ"></a>ä¸ºä»€ä¹ˆç†è§£ IOC Container å¯¹äºç†è§£ Laravel æ¶æ„æ˜¯å¦‚æ­¤çš„é‡è¦ï¼Ÿ</h4><blockquote><p>å› ä¸ºåœ¨ Laravel ä¸­ï¼Œä½ æ‰€èƒ½ä½¿ç”¨åˆ°çš„ Laravel çš„ç‰¹æ€§å’ŒåŠŸèƒ½å‡ ä¹å…¨éƒ¨æ˜¯ç”± IOC Container å®ç°çš„ã€‚</p></blockquote><pre class=" language-php"><code class="language-php">Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token string">'HomeController@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢çš„ Cacheã€Route éƒ½æ˜¯é€šè¿‡æŠŠå„è‡ªç±»çš„å®ç° bind åˆ° Container ä¸­ï¼Œç„¶å Container make å‡ºçš„ä¸€ä¸ªå®ä¾‹ã€‚<br>é‚£ä¹ˆå®ƒä»¬æ˜¯åœ¨å“ªé‡Œè¿›è¡Œçš„ bind å‘¢ï¼Ÿæ²¡é”™å°±æ˜¯ Service Provider ä¸­ã€‚</p><h3 id="Service-Provider"><a href="#Service-Provider" class="headerlink" title="Service Provider"></a>Service Provider</h3><p>åœ¨ Laravel ä¸­æœ‰ä¸¤ç§æ–¹å¼æ¥ä½¿ç”¨ IOC Containerï¼š</p><ol><li>é€šè¿‡ Service Provider</li><li>ä¸é€šè¿‡ Service Provider<blockquote><p>ä¸€èˆ¬æƒ…å†µéƒ½æ˜¯ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ã€‚</p></blockquote></li></ol><h4 id="ä¸é€šè¿‡-Service-Provider-æ¥ä½¿ç”¨-IOC-Container"><a href="#ä¸é€šè¿‡-Service-Provider-æ¥ä½¿ç”¨-IOC-Container" class="headerlink" title="ä¸é€šè¿‡ Service Provider æ¥ä½¿ç”¨ IOC Container"></a>ä¸é€šè¿‡ Service Provider æ¥ä½¿ç”¨ IOC Container</h4><p>å®ä¾‹ï¼š</p><pre class=" language-php"><code class="language-php"><span class="token comment" spellcheck="true">//web.php</span><span class="token comment" spellcheck="true">//åˆ›å»ºä¸€ä¸ªç±»</span><span class="token keyword">class</span> <span class="token class-name">Apple</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span><span class="token punctuation">}</span>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//ä½¿ç”¨ app() è¾…åŠ©æ–¹æ³•å°† Apple ç±» bind åˆ° IOC Container ä¸­  </span>  App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//ä½¿ç”¨ App() è¾…åŠ©æ–¹æ³•å°† Apple å®ä¾‹ make å‡ºæ¥</span>  <span class="token variable">$apple</span> <span class="token operator">=</span> App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//ä½¿ç”¨ Apple ç±»ä¸­çš„å±æ€§</span>  <span class="token keyword">return</span> <span class="token variable">$apple</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">id</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="é€šè¿‡-Service-Provider-æ¥ä½¿ç”¨-IOC-Container"><a href="#é€šè¿‡-Service-Provider-æ¥ä½¿ç”¨-IOC-Container" class="headerlink" title="é€šè¿‡ Service Provider æ¥ä½¿ç”¨ IOC Container"></a>é€šè¿‡ Service Provider æ¥ä½¿ç”¨ IOC Container</h4><blockquote><p>åŸå› ï¼šæˆ‘ä»¬çŸ¥é“ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬çš„ç±»ã€æ¨¡å—ä¼šæœ‰éœ€è¦å…¶ä»–ç±»å’Œç»„ä»¶çš„æƒ…å†µï¼Œä¸ºäº†ä¿è¯åˆå§‹åŒ–é˜¶æ®µä¸ä¼šå‡ºç°æ‰€éœ€è¦çš„æ¨¡å—å’Œç»„ä»¶æ²¡æœ‰æ³¨å†Œçš„æƒ…å†µï¼Œlaravel å°†æ³¨å†Œå’Œåˆå§‹åŒ–è¡Œä¸ºè¿›è¡Œæ‹†åˆ†ï¼Œæ³¨å†Œçš„æ—¶å€™å°±åªèƒ½æ³¨å†Œï¼Œåˆå§‹åŒ–çš„æ—¶å€™å°±æ˜¯åˆå§‹åŒ–ã€‚æ‹†åˆ†åçš„äº§ç‰©å°±æ˜¯ç°åœ¨çš„ æœåŠ¡æä¾›è€…ã€‚<br>å¯ä»¥æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œä½ è¦ç»‘å®š 3 ä¸ªç±» A B C åˆ° IOC Container ä¸­ã€‚ Aï¼ŒBï¼ŒC éƒ½æ˜¯éå¸¸å¤æ‚çš„ç±»ã€‚åœ¨ bind A æ—¶ï¼Œå¼•ç”¨äº†ä¸€ä¸ªç±» B çš„å®ä¾‹ï¼Œé‚£ä¹ˆæƒ³è¦è·å¾—ç±» B çš„å®ä¾‹ï¼Œå°±éœ€è¦ B å·²ç»è¢« bindï¼Œåªæœ‰è¿™æ ·ï¼Œæˆ‘ä»¬çš„ IOC Container æ‰æœ‰èƒ½åŠ› make å‡ºä¸€ä¸ª B çš„å®ä¾‹ã€‚ è€Œåœ¨ bind B æ—¶ï¼Œæ°å¥½åˆéœ€è¦ C çš„å®ä¾‹.<br>å¦‚æœæ˜¯è¿™æ ·çš„é€»è¾‘ï¼Œé‚£ä¹ˆåœ¨ bind A B C æ—¶ï¼Œå°±å¿…é¡»æ‰‹åŠ¨çš„ä¸¥æ ¼å®‰æ’ bind çš„æ¬¡åºï¼Œè€Œä¸”è¿™åªæ˜¯ 3 ä¸ªç±»çš„æƒ…å†µï¼Œå¦‚æœæœ‰å‡ åä¸ªç±»çš„è¯ï¼Œäººå·¥å·²ç»æ— æ³•å®Œæˆäº†.<br>è€Œè¿™æ—¶å°±éœ€è¦ Service Provider çš„ä½œç”¨äº†ã€‚</p><blockquote><p>å¼•ç”¨è‡ªâ€”â€”<a href="https://learnku.com/laravel/t/3361/starting-with-the-1-line-of-code-with-a-systematic-understanding-of-the-core-concepts-of-service-container#e9b441" target="_blank" rel="noopener">ä» 1 è¡Œä»£ç å¼€å§‹ï¼Œå¸¦ä½ ç³»ç»Ÿæ€§åœ°ç†è§£ Service Container æ ¸å¿ƒæ¦‚å¿µ</a></p></blockquote></blockquote><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token comment" spellcheck="true">// 1. åˆ›å»ºä¸€ä¸ª Apple ç±» app/Test/Apple.php</span><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Test</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Apple</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token string">'agg'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//2. ä½¿ç”¨ php artisan make:provider AppleProvider ç”Ÿæˆ provider</span><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>ServiceProvider</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Test<span class="token punctuation">\</span>Apple</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">AppleProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * Register services.     *     * @return void     */</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">app</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$app</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * Bootstrap services.     *     * @return void     */</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 3. åœ¨ config/app.php ä¸­æ³¨å†Œ APPServiceProvider</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token string">'providers'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    App\<span class="token package">Providers<span class="token punctuation">\</span>AppleProvider</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment" spellcheck="true">// 4. æœ€ç»ˆåœ¨ route/web.php ä¸­ä½¿ç”¨</span>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*è¾“å‡ºç»“æœï¼Œå› ä¸ºä½¿ç”¨äº†å•ä¾‹çš„æ¨¡å¼è¿›è¡Œç»‘å®šæ‰€ä»¥è¾“å‡ºçš„ä¸¤ä¸ªå®ä¾‹çš„ç¼–å·æ˜¯ä¸€è‡´çš„object(App\Test\Apple)#206 (1) { ["id"]=> string(3) "agg" } object(App\Test\Apple)#206 (1) { ["id"]=> string(3) "agg" }*/</span></code></pre><h3 id="Facades"><a href="#Facades" class="headerlink" title="Facades"></a>Facades</h3><pre class=" language-php"><code class="language-php">Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token string">'HomeController@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>æƒ³å¿…å¤§å®¶åœ¨ç¬¬ä¸€ä½¿ç”¨ Laravel çš„æ—¶å€™ä¸€å®šä¼šæ³¨æ„åˆ°è¿™è¡Œä»£ç ã€‚åœ¨ä½¿ç”¨ phpStorm ä¹‹ç±»çš„ IDE å·¥å…·æ˜¯æ— æ³•è·³è½¬åˆ°å¯¹åº”çš„ç±»æ–‡ä»¶ã€‚é‚£ä¹ˆè¿™æ˜¯ä¸ºå•¥å‘¢ï¼Ÿ</p></blockquote><p>ä½ æ˜¯æ— æ³•æ‰¾åˆ°å¯¹ Route ç±»çš„å£°æ˜çš„ï¼Œæ˜¯å› ä¸ºä½¿ç”¨äº†åˆ«åã€‚åˆ«åæ˜¯ PHP çš„ä¸€ä¸ªç‰¹æ€§ï¼ˆ <a href="https://www.php.net/manual/zh/function.class-alias.php" target="_blank" rel="noopener">class_alias</a> æ–¹æ³• ï¼‰ã€‚</p><p>åˆ«ååœ¨å“ªé‡Œè®¾ç½®å‘¢â€”â€”app/config/app.php</p><pre class=" language-php"><code class="language-php"><span class="token string">'aliases'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token string">'Route'</span> <span class="token operator">=</span><span class="token operator">></span> Illuminate\<span class="token package">Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Route</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre><p>æŸ¥çœ‹ <em>vendor/laravel/framework/src/Illuminate/Support/Facades/Route.php</em> æ–‡ä»¶â€¦.å“ï¼Ÿæ€ä¹ˆåªæœ‰è¿™ä¹ˆç‚¹ä¸œè¥¿ï¼Œget å‘¢ï¼Ÿ</p><pre class=" language-php"><code class="language-php"><span class="token keyword">namespace</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*   é€šè¿‡è¿™è¡Œæ³¨é‡Šå¯ä»¥æ‰¾åˆ°çœŸå®çš„ Route ç±»åœ¨ä»€ä¹ˆåœ°æ–¹ * @see \Illuminate\Routing\Router */</span><span class="token keyword">class</span> <span class="token class-name">Route</span> <span class="token keyword">extends</span> <span class="token class-name">Facade</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * Get the registered name of the component.     *     * @return string     */</span>    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">getFacadeAccessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">'router'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>é¦–å…ˆè¦çŸ¥é“ Facade çš„ä½œç”¨ï¼šä½¿ç”¨ä¸€ä¸ªç®€å•çš„è¯­æ³•ï¼Œè®©ä½ ä» Laravel çš„ IOC Container ä¸­æ–¹ä¾¿çš„ make å‡ºä½ æƒ³è¦çš„å¯¹è±¡ã€‚</p></blockquote><h4 id="Facade-å®ç°åŸç†ï¼ˆmakeï¼‰"><a href="#Facade-å®ç°åŸç†ï¼ˆmakeï¼‰" class="headerlink" title="Facade å®ç°åŸç†ï¼ˆmakeï¼‰"></a>Facade å®ç°åŸç†ï¼ˆmakeï¼‰</h4><ol><li>é¦–å…ˆ Route ç»§æ‰¿è‡ª <code>Illuminate\Support\Facades</code>ã€‚</li><li><code>Illuminate\Support\Facades</code> é‡Œä¹Ÿæ²¡æœ‰ get é™æ€æ–¹æ³•ã€‚</li><li>ä½¿ç”¨äº† <a href="https://www.php.net/manual/zh/language.oop5.overloading.php#object.callstatic" target="_blank" rel="noopener">__callStatic()</a> é­”æœ¯æ–¹æ³•ã€‚</li><li>åœ¨ Route ä¸­è°ƒç”¨é™æ€çš„ get æ–¹æ³•ï¼Œå®é™…ä¸Š Illuminate\Support\Facades ä¸­çš„ <code>__callStatic</code> é­”æœ¯æ–¹æ³•è¢«è°ƒç”¨ã€‚</li><li>åœ¨ <a href="https://www.php.net/manual/zh/language.oop5.overloading.php#object.callstatic" target="_blank" rel="noopener">__callStatic()</a> æ–¹æ³•ä¸­è°ƒç”¨äº†é™æ€çš„ getFaRoot æ–¹æ³•ã€‚</li><li>åœ¨ <code>getFacadeRoot</code> æ–¹æ³•ä¸­è°ƒç”¨äº†é™æ€çš„ <code>resolveFacadeInstance</code> æ–¹æ³•ã€‚</li><li><code>resolveFacadeInstance</code> æ–¹æ³•éœ€è¦ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°é€šè¿‡é™æ€ <code>getFacadeAccessor</code> æ–¹æ³•è·å¾—ã€‚</li><li><code>getFacadeAccessor</code> è¯¥æ–¹æ³•åœ¨ Route ç±»ä¸­å®ç°äº† <code>getFacadeAccessor</code>å¹¶è¿”å› routeã€‚</li><li><code>resolveFacadeInstance</code> æ–¹æ³•æ¥æ”¶ route å­—ç¬¦ä¸²å‚æ•°ã€‚é¦–å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºå¯¹è±¡ï¼Œå½“ç„¶ä¸æ˜¯å•¦ï¼Œ$name æ˜¯å­—ç¬¦ä¸²ã€‚ ç„¶ååˆ¤æ–­è¯¥ <code>resolvedInstance</code> æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ route ç›¸å…³ä¿¡æ¯ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç¨‹åºæ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œå½“ç„¶ä¹Ÿæ˜¯æ²¡æœ‰çš„ã€‚ æœ€åè¿”å› <code>static::$app[&#39;route&#39;]</code>,åŒæ—¶æŠŠç»“æœä¿å­˜åˆ° <code>resolvedInstance</code> æ•°ç»„ä¸­ã€‚</li><li>$app å…¶å®å°±æ˜¯å‰é¢è¯´çš„ Application ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸ªç±»æ˜¯ä¸€ä¸ª IOC Containerï¼Œå®ä¾‹åŒ–è¿‡ç¨‹åœ¨ Laravel æœ€å¼€å§‹çš„æ—¶å€™ã€‚Facade åˆå§‹åŒ–çš„æ—¶å€™ä¹Ÿè®©è‡ªå·±æœ‰äº†ä¸€ä¸ª $app,è¿™ä¸ªå°±æ˜¯ Application ç±»çš„å®ä¾‹åŒ–å¯¹è±¡ã€‚</li><li>å…¶å®æ­¤æ—¶ $app ä¸­å¹¶æ²¡æœ‰ â€˜routeâ€™ å±æ€§ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå¯ä»¥è°ƒç”¨å‘¢ï¼Ÿå› ä¸º Application ç»§æ‰¿äº† Container, è€Œ Container åˆç»§æ‰¿äº† ArrayAccess ç±»,å¹¶å®ç°äº† offsetGet æ–¹æ³•ã€‚ è¯¥æ–¹æ³•çš„å†…å®¹ä¸º <code>return $this-&gt;make($key);</code> è¿™é‡Œå°±å¾ˆæ˜æ˜¾äº†ï¼Œç›´æ¥make å‡ºäº†ä¸€ä¸ª route å®ä¾‹ã€‚</li><li>æœ€ç»ˆç›¸å½“äº <code>$instance = static::getFacadeRoot();</code> ä¸ <code>$instance = $app-&gt;make(&#39;router&#39;);</code> æ˜¯ç›¸ç­‰çš„ã€‚</li></ol><pre class=" language-php"><code class="language-php">    <span class="token comment" spellcheck="true">//Illuminate\Support\Facades\Facades.php;</span>    <span class="token comment" spellcheck="true">//ä»¥ä¸Šå†…å®¹çœç•¥</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">getFacadeRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resolveFacadeInstance</span><span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getFacadeAccessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>     <span class="token comment" spellcheck="true">//è¯¥æ–¹æ³•è¢«å­ç±»å¤å†™</span>    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">getFacadeAccessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">'Facade does not implement getFacadeAccessor method.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">resolveFacadeInstance</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_object</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token variable">$name</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable">$resolvedInstance</span><span class="token punctuation">[</span><span class="token variable">$name</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable">$resolvedInstance</span><span class="token punctuation">[</span><span class="token variable">$name</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable">$resolvedInstance</span><span class="token punctuation">[</span><span class="token variable">$name</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable">$app</span><span class="token punctuation">[</span><span class="token variable">$name</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>   <span class="token comment" spellcheck="true">//ä»¥ä¸‹å†…å®¹çœç•¥ </span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">__callStatic</span><span class="token punctuation">(</span><span class="token variable">$method</span><span class="token punctuation">,</span> <span class="token variable">$args</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$instance</span> <span class="token operator">=</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getFacadeRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token variable">$instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">'A facade root has not been set.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token variable">$instance</span><span class="token operator">-</span><span class="token operator">></span><span class="token variable">$method</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token variable">$args</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h4 id="Facade-å®ç°åŸç†ï¼ˆbindï¼‰"><a href="#Facade-å®ç°åŸç†ï¼ˆbindï¼‰" class="headerlink" title="Facade å®ç°åŸç†ï¼ˆbindï¼‰"></a>Facade å®ç°åŸç†ï¼ˆbindï¼‰</h4><blockquote><p>åœ¨æœ€å¼€å§‹å°±äº†è§£åˆ°ï¼Œæ—¢ç„¶è¦ makeï¼Œå¿…é¡»é¦–å…ˆ bindã€‚è€Œä¸”æœ€å¥½çš„æ–¹å¼æ˜¯é€šè¿‡ serviceProvider æ¥ bind ç±»ã€‚ è€Œä¸”ä¸è®ºæ˜¯ make è¿˜æ˜¯ bind éƒ½éœ€è¦ä¸€ä¸ª keyï¼Œç”¨æ¥åœ¨å®¹å™¨ä¸­ä¿å­˜å’ŒæŸ¥æ‰¾è¿™ä¸ªç±»ã€‚ä¸Šé¢è®²çš„æ˜¯ä½¿ç”¨ route å…³é”®å­—è¿›è¡Œ make çš„è¿‡ç¨‹ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è‚¯å®šåœ¨ä¹‹å‰ä¸€å®šæœ‰ä¸€ä¸ªä½¿ç”¨ route è¿›è¡Œ bind çš„æ“ä½œã€‚ä¸‹é¢å°±è¿›è¡Œ bind çš„è®²è§£ã€‚</p></blockquote><ol><li>é¦–å…ˆ ServiceProvider éœ€è¦åœ¨ <code>config/app.php</code> è¿›è¡Œæ³¨å†Œï¼Œæˆ‘ä»¬åœ¨æ–‡ä»¶ä¸­æ‰¾åˆ°å¯¹åº” route ç›¸å…³çš„å†…å®¹ï¼Œå°±æ˜¯ <code>App\Providers\RouteServiceProvider::class,</code>ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘æ˜“äº‘éŸ³ä¹è¯„è®ºæ‘˜å½•</title>
      <link href="/2019/05/28/wang-yi-yun-yin-le-ping-lun-zhai-lu/"/>
      <url>/2019/05/28/wang-yi-yun-yin-le-ping-lun-zhai-lu/</url>
      
        <content type="html"><![CDATA[<p>ç½‘æ˜“äº‘éŸ³ä¹é‡Œæœ‰æ‰çš„äººå®åœ¨å¤ªå¤šï¼Œå†™å‡ºæ¥çš„æ­Œè¯æˆ–è¯„è®ºæ˜¯çœŸçš„ä¸é”™ã€‚è¿™é‡Œå°±æŠŠæˆ‘è§‰å¾—è¿˜ä¸é”™çš„æ”¶è—ä¸€æ³¢å§ï¼ˆä¸å®šæœŸæ›´æ–°ï¼‰ã€‚</p><h2 id="è¯„è®º"><a href="#è¯„è®º" class="headerlink" title="è¯„è®º"></a>è¯„è®º</h2><blockquote><p>äººä¼šé•¿å¤§ä¸‰æ¬¡ï¼š<br>ç¬¬ä¸€æ¬¡æ˜¯åœ¨å‘ç°è‡ªå·±ä¸æ˜¯ä¸–ç•Œçš„ä¸­å¿ƒçš„æ—¶å€™ã€‚<br>ç¬¬äºŒæ¬¡æ˜¯åœ¨å‘ç°å³ä½¿åœ¨æ€ä¹ˆåŠªåŠ›ï¼Œç»ˆç©¶è¿˜æ˜¯æœ‰äº›äº‹ä»¤äººæ— èƒ½ä¸ºåŠ›çš„æ—¶å€™ã€‚<br>ç¬¬ä¸‰æ¬¡æ˜¯åœ¨ï¼Œæ˜çŸ¥é“æœ‰äº›äº‹å¯èƒ½ä¼šæ— èƒ½ä¸ºåŠ›ï¼Œä½†è¿˜æ˜¯ä¼šå°½åŠ›äº‰å–çš„æ—¶å€™ã€‚<br>â€”â€”â€”â€”ã€Šä¸€å¦‚å°‘å¹´æ¨¡æ ·ã€‹</p></blockquote><blockquote><p>ç™½å¤©è¦å¥½å¥½è¯»ä¹¦ ä¹¦é‡Œæœ‰æ‚¨ä¸çŸ¥é“çš„<br>å¤œé‡Œè¦å¥½å¥½ç¡è§‰ æ¢¦é‡Œæœ‰ä½ æƒ³è¦çš„<br>â€”â€”â€”â€”ã€Šä»–ã€‹</p></blockquote><blockquote><p>ä½ å“­çš„æœ€ä¼¤å¿ƒçš„é‚£ä¸ªæ™šä¸Šå˜æˆå¤§äººäº†ä¹ˆï¼Ÿä¸æ˜¯ï¼Œæ˜¯æˆ‘å¿ä½æ²¡å“­çš„é‚£ä¸ªæ™šä¸Šã€‚<br>â€”â€”â€”â€”æ—å®¥å˜‰ã€Šå¤©çœŸæœ‰é‚ªã€‹</p></blockquote><blockquote><p>å°æ—¶å€™ï¼ŒæŠŠä¸€ç‰‡å£é¦™ç³–æ°æˆä¸¤å—å„¿ï¼Œå¾ˆèˆä¸å¾—åƒã€‚é‚£æ—¶å€™å°±å¤©çœŸçš„æƒ³ï¼Œç­‰æˆ‘é•¿å¤§äº†ï¼Œæœ‰é’±äº†ï¼Œå°±ä¸€å£æ°”åš¼ä¸€åŒ…ï¼ä¸€å®šç‰¹åˆ«ç”œï¼ä»Šå¤©çªç„¶æƒ³åˆ°äº†å„¿æ—¶çš„è¿™ä¸ªæ¢¦æƒ³ï¼Œå°±ä¹°äº†ä¸€åŒ…ï¼Œå½“æˆ‘æŠŠå£é¦™ç³–ä¸€ç‰‡ç‰‡å¡è¿›å˜´é‡Œçš„æ—¶å€™ï¼Œæˆ‘çš„çœ¼æ³ªå¤ºç›®è€Œå‡ºã€‚ã€‚ã€‚æˆ‘å“½å’½ç€å¤§å£çš„åš¼ç€ã€‚ã€‚ã€‚å¿ƒé‡Œå´æ»¡æ˜¯é…¸æ¥šï¼Œæˆ‘æƒ³ï¼Œè¿™æ—¶å…‰ä¸€ç‚¹ä¹Ÿä¸ç”œã€‚ã€‚ã€‚<br>â€”â€”â€”â€”å‘¨ä¼ é›„ã€Šé»„æ˜ã€‹ </p></blockquote><blockquote><p>çˆ±ä¸Šä¸€ä¸ªäººï¼Œå§‹äºé¢œå€¼ï¼Œé™·äºæ‰åï¼Œå¿ äºäººå“ï¼›çˆ±ä¸Šä¸€é¦–æ­Œï¼Œå§‹äºæ­Œåï¼Œé™·äºæ—‹å¾‹ï¼Œå¿ äºè¯ä¹‰ã€‚</p></blockquote><blockquote><p>å½“æˆ‘å­‘ç„¶ä¸€èº«çš„æ—¶å€™ï¼Œè´«ç©·ä¸æˆ‘ä¸è¿‡æ˜¯æ™šä¸Šåƒé¦’å¤´è¿˜æ˜¯ç‰›æ’çš„é—®é¢˜ï¼Œæ— æŸæˆ‘çš„å¿«ä¹ï¼Œå½“ä½†æˆ‘çˆ±ä¸Šä¸€ä¸ªå§‘å¨˜çš„æ—¶å€™ï¼Œæˆ‘æ‰æ·±æ·±æ„Ÿå—åˆ°äº†è´«ç©·æ‰€å¸¦æ¥çš„è‡ªå‘ã€‚</p></blockquote><blockquote><p>å¤ä»£è¯æˆ¿é—¨å£ä¼šæŒ‚ç€ï¼š<br>ä½†æ„¿ä¸–ä¸Šæ— ç–¾è‹¦ï¼Œå®å¯æ¶ä¸Šè¯ç”Ÿå°˜ã€‚<br>ç°åœ¨è¯æˆ¿é—¨å£è´´ç€ï¼š<br>ä¼šå‘˜ç§¯åˆ†ï¼Œä¹°åèµ äº”ï¼Œæ¶ˆè´¹æ»¡58é€20ä¸ªé¸¡è›‹ã€‚<br>â€”â€”â€”â€”ã€Šåªè¦å¹³å‡¡ã€‹</p></blockquote><blockquote><p>æœˆè€ï¼Œéº»çƒ¦ä¸‹æ¬¡ä¸ºæˆ‘ç‰µçº¢çº¿çš„æ—¶å€™èƒ½æ¢æˆé’¢ä¸å—ï¼Œçº¢çº¿è€TMæ–­ã€‚<br>â€”â€”â€”â€”ã€ŠçŒ«éƒ½ç§ä¸èµ·æˆ‘ã€‹</p></blockquote><blockquote><p>æˆ‘å‘Šè¯‰ä½ æˆ‘å–œæ¬¢ä½ ï¼Œå¹¶ä¸æ˜¯ä¸€å®šè¦å’Œä½ åœ¨ä¸€èµ·ï¼Œåªæ˜¯å¸Œæœ›ä»Šåçš„æ‚¨ï¼Œåœ¨é­é‡äººç”Ÿä½è°·çš„æ—¶å€™ï¼Œä¸è¦ç°å¿ƒï¼Œè‡³å°‘æ›¾ç»æœ‰äººè¢«ä½ çš„é­…åŠ›æ‰€å¸å¼•ï¼Œæ›¾ç»æ˜¯ï¼Œä»¥åä¹Ÿä¼šæ˜¯ã€‚<br>â€”â€”â€”â€”ã€Šæˆ‘è¦ä½ ã€‹</p></blockquote><h2 id="æ­Œè¯"><a href="#æ­Œè¯" class="headerlink" title="æ­Œè¯"></a>æ­Œè¯</h2><blockquote><p>ä½ æ˜¯æˆ‘æ‚£å¾—æ‚£å¤±çš„æ¢¦ æˆ‘æ˜¯ä½ å¯æœ‰å¯æ— çš„äºº æ¯•ç«Ÿè¿™ç©¿è¶Šå±±æ²³çš„å‰‘ åˆºçš„éƒ½æ˜¯ç”¨æƒ…è‡³æçš„äºº ä½ æ˜¯æˆ‘è¾—è½¬åä¾§çš„æ¢¦ æˆ‘æ˜¯ä½ å¦‚æ¢¦å±±æ²³çš„å¤äºº<br>â€”â€”â€”â€”è§£å¿§å°‘å¸…ã€Šå†™ç»™é»„æ·®ã€‹</p></blockquote><blockquote><p>åƒæˆ‘è¿™æ ·ä¼˜ç§€çš„äºº æœ¬è¯¥ç¿çƒ‚è¿‡ä¸€ç”Ÿ æ€ä¹ˆäºŒåå¤šå¹´åˆ°å¤´æ¥ è¿˜åœ¨äººæµ·é‡Œæµ®æ²‰<br>â€”â€”â€”â€” æ¯›ä¸æ˜“ã€Šåƒæˆ‘è¿™æ ·çš„äººã€‹</p></blockquote><blockquote><p>å¯æ˜¯ä½ æ›¾ç»çš„é‚£äº›æ¢¦ï¼Œéƒ½å·²å˜å¾—æ¨¡ç³Šçœ‹ä¸è§ï¼Œé‚£äº›ä¸ºäº†ç†æƒ³çš„æˆ˜æ–—ï¼Œä¹Ÿä¸è¿‡æ˜¯ä¸ºäº†é’±ã€‚<br>æˆ‘ä¸è¦åœ¨å¤±è´¥å­¤ç‹¬ä¸­æ­»å»ï¼Œæˆ‘ä¸è¦ä¸€ç›´æ´»åœ¨åœ°ä¸‹é‡Œï¼Œç‰©è´¨çš„éª—å±€ï¼ŒåŒ†åŒ†çš„èš‚èšï¼Œæ²¡æœ‰æ–‡åŒ–çš„äººä¸ä¼¤å¿ƒã€‚<br>â€”â€”â€”â€” æ–°è£¤å­ä¹é˜Ÿã€Šæ²¡æœ‰ç†æƒ³çš„äººä¸ä¼¤å¿ƒã€‹</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‘˜å½• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitå¸¸ç”¨å‘½ä»¤æ€»ç»“</title>
      <link href="/2019/04/06/git-chang-yong-ming-ling-zong-jie/"/>
      <url>/2019/04/06/git-chang-yong-ming-ling-zong-jie/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å†…å®¹ä¸å®šæœŸæ›´æ–°</p></blockquote><h2 id="è‡ªå·±å¸¸ç”¨çš„-git-alias-å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ›´å¥½çš„æ˜¾ç¤º-log-ä¿¡æ¯"><a href="#è‡ªå·±å¸¸ç”¨çš„-git-alias-å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ›´å¥½çš„æ˜¾ç¤º-log-ä¿¡æ¯" class="headerlink" title="è‡ªå·±å¸¸ç”¨çš„ git alias å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ›´å¥½çš„æ˜¾ç¤º log ä¿¡æ¯"></a>è‡ªå·±å¸¸ç”¨çš„ git alias å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ›´å¥½çš„æ˜¾ç¤º log ä¿¡æ¯</h2><pre class=" language-shell"><code class="language-shell">alias gl="git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"alias gll="git log --graph --abbrev-commit --decorate --all --format=format:'%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(dim white) - %an%C(reset) %C(bold green)(%ar)%C(reset)%C(bold yellow)%d%C(reset)%n %C(white)%s%C(reset)'"</code></pre><h2 id="1-git-commit-â€“amend"><a href="#1-git-commit-â€“amend" class="headerlink" title="1. git commit â€“amend"></a>1. git commit â€“amend</h2><pre class=" language-git"><code class="language-git">git commit --amend</code></pre><blockquote><p>è§£é‡Šï¼šå½“ç¬¬ä¸€æ¬¡ commit ä¹‹åï¼Œå‘ç°æ²¡æœ‰ä¿®æ”¹æ­£ç¡®ï¼Œä½†æ˜¯åˆä¸æƒ³åœ¨ git log ä¸­å‡ºç°ä¸¤æ¬¡æäº¤è®°å½•ï¼Œé‚£ä¹ˆåœ¨ç¬¬äºŒæ¬¡ä¿®æ”¹åï¼Œå¯ä»¥ä½¿ç”¨ git commit â€“amend å‘½ä»¤è¿›è¡Œä¿®æ”¹æäº¤ã€‚æ­¤æ—¶æäº¤æˆåŠŸåå°±åªæœ‰ä¸€æ¡ commit è®°å½•äº†ã€‚</p></blockquote><h2 id="2-gitignore-ç”Ÿæ•ˆ"><a href="#2-gitignore-ç”Ÿæ•ˆ" class="headerlink" title="2. gitignore ç”Ÿæ•ˆ"></a>2. gitignore ç”Ÿæ•ˆ</h2><blockquote><p>è§£é‡Š: .gitignore æ–‡ä»¶æ˜¯å¿½ç•¥ git é¡¹ç›®ä¸­ä¸éœ€è¦æäº¤çš„å†…å®¹çš„é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯å½“æŸæ¬¡æäº¤çš„æ—¶å€™æŠŠä¸éœ€è¦çš„å†…å®¹æäº¤åˆ° git ç‰ˆæœ¬æ§åˆ¶ä¸­äº†ä¹‹åã€‚å†æƒ³ä¿®æ”¹ .gitignore æ–‡ä»¶æ¥å¿½ç•¥é‚£ä¸ªæ–‡ä»¶çš„è¯æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚éœ€è¦å…ˆæƒ³æ–‡ä»¶åœ¨ git ç¼“å­˜ä¸­åˆ é™¤ï¼Œç„¶ååœ¨è¿›è¡Œæäº¤ã€‚å°±å¯ä»¥äº†ã€‚ï¼ˆä¸‹é¢æ˜¯æ“ä½œæ­¥éª¤ï¼‰</p></blockquote><pre class=" language-git"><code class="language-git">git rm -r --cached .   //å¦‚ä½•æ˜¯ç›®å½•çš„è¯ï¼Œå¢åŠ  -r å‚æ•°git add .git commit -m <span class="token string">'fix ignore'</span>//åˆ é™¤æŒ‡å®šæ–‡ä»¶çš„ç¼“å­˜git rm --cached xx.html</code></pre><h2 id="3-git-reset-â€“soft-hard-hash"><a href="#3-git-reset-â€“soft-hard-hash" class="headerlink" title="3. git reset â€“soft/hard  hash*"></a>3. git reset â€“soft/hard  <strong>hash*</strong></h2><pre class=" language-git"><code class="language-git">git reset --soft  **hash***git reset --hard  **hash***</code></pre><blockquote><p>è§£é‡Šï¼šå½“æ‰§è¡Œ git commit ä¹‹åï¼Œæƒ³å›åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ git reset è¿›è¡Œç‰ˆæœ¬å›é€€ã€‚â€“sorf å‚æ•°çš„æ„æ€æ˜¯ï¼Œgit log æ’¤é”€ç‰ˆæœ¬ï¼Œä½†ä»£ç ä¸­çš„å†…å®¹æ²¡æœ‰å›é€€ã€‚ â€“hard å‚æ•°çš„æ„æ€æ˜¯ï¼Œgit log ä¸­çš„è®°å½•å’Œ æ–‡ä»¶å†…å®¹å®Œå…¨å›é€€åˆ°é€‰çš„çš„ç‰ˆæœ¬ã€‚ï¼ˆâ€“hard æ›´å¸¸ç”¨ï¼‰</p></blockquote><h2 id="4-git-stash"><a href="#4-git-stash" class="headerlink" title="4. git stash"></a>4. git stash</h2><pre class=" language-git"><code class="language-git">git stash           //å°†å½“å‰å·¥ä½œå»å†…å®¹è¿›è¡Œæš‚å­˜ï¼Œç„¶åå°±è¿›è¡Œåˆ‡æ¢åˆ†æ”¯æˆ–å…¶ä»–çš„æ“ä½œäº†git stash list      //æŸ¥çœ‹å½“å‰å·²ç»æš‚å­˜çš„è®°å½•åˆ—è¡¨git stash pop       //å°†å½“å‰æš‚å­˜å†…å®¹å›å¤åˆ°å·¥ä½œåŒºå¹¶åˆ é™¤æš‚å­˜è®°å½•åˆ—è¡¨ä¸­çš„å†…å®¹git stash apply     //å°†å½“å‰æš‚å­˜å†…å®¹å›å¤åˆ°å·¥ä½œåŒºï¼Œä¸åˆ é™¤è®°å½•</code></pre><h2 id="5-git-rebase-å˜åŸº"><a href="#5-git-rebase-å˜åŸº" class="headerlink" title="5. git rebase (å˜åŸº)"></a>5. git rebase (å˜åŸº)</h2><blockquote><p>è§£é‡Šï¼šå½“åœ¨ä¸¤ä¸ªåˆ†æ”¯è¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨ merge å°†ä¸¤ä¸ªåˆ†æ”¯è¿›è¡Œåˆå¹¶ï¼Œä½†æ˜¯è¿™æ ·ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„æäº¤ï¼Œå¹¶ä¸”å¦ä¸€ä¸ªåˆ†æ”¯çš„æäº¤è®°å½•åœ¨å½“å‰åˆ†æ”¯æ˜¯ä¸å­˜åœ¨çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ rebaseã€‚</p></blockquote><pre class=" language-git"><code class="language-git">//å‰æï¼šmaster åˆ†æ”¯å’Œ new-feature åˆ†æ”¯éƒ½è¿›è¡Œäº†å¤šæ¬¡æäº¤git checkout new-feature        //é¦–å…ˆåˆ‡æ¢åˆ°æ–°åˆ†æ”¯git rebase master               //å°† master åˆ†æ”¯çš„æäº¤è®°å½•æ·»åŠ åˆ°å½“å‰åˆ†æ”¯git checkout master             //åˆ‡æ¢å› master åˆ†æ”¯git merge new-feature           //å°† new-feature åˆ†æ”¯åˆå¹¶å…¥masterï¼Œæ­¤æ—¶ master åˆ†æ”¯ä¸­å°±æœ‰äº† new-feature åˆ†æ”¯çš„æäº¤è®°å½•ï¼Œä½†æ˜¯ä¸ä¼šäº§ç”Ÿæ–°çš„æäº¤è®°å½•ã€‚æ­¤å‘½ä»¤å¯ä»¥ä½¿æäº¤å†å²æ›´ä¸ºæ•´æ´ã€‚</code></pre>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨frpæ­å»ºæœ¬åœ°å¾®ä¿¡å¼€å‘ç¯å¢ƒ</title>
      <link href="/2019/03/08/shi-yong-frp-da-jian-ben-di-wei-xin-kai-fa-huan-jing/"/>
      <url>/2019/03/08/shi-yong-frp-da-jian-ben-di-wei-xin-kai-fa-huan-jing/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>2019-3-10</strong> æ›´æ–°è®°å½•</p></blockquote><p>å†ä½¿ç”¨ TP5 è¿›è¡Œå¼€å‘çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹</p><ol><li>å…³é—­ trace è°ƒè¯•æ¨¡å¼ã€‚</li><li>åœ¨ä½¿ç”¨è·¯ç”±çš„æ—¶å€™å°½é‡ç¡®å®šå¯¹åº”æ¥å£è¯·æ±‚çš„ç±»å‹ï¼Œå¦‚æœä¸çŸ¥é“ç±»å‹å»ºè®®ä½¿ç”¨ <strong>Route::any()</strong>;</li></ol><p><em>å¯ä»¥ä½¿ç”¨ <a href="http://www.fangbei.org/tool/message" target="_blank" rel="noopener">å¾®ä¿¡æ¶ˆæ¯æµ‹è¯•å·¥å…·</a>è¿›è¡Œæµ‹è¯•</em>ã€‚</p><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>ä¹‹å‰åœ¨åšç›¸å…³å¾®ä¿¡å¼€å‘æ—¶ï¼Œå› ä¸ºéœ€è¦éªŒè¯å…¬ç½‘å¯ä»¥è®¿é—®çš„åˆ°çš„åŸŸåï¼Œæ‰€ä»¥æ€»æ˜¯å°†ä»£ç æ¨åˆ°çº¿ä¸ŠæœåŠ¡å™¨è¿›è¡Œç›¸å…³çš„æµ‹è¯•ã€‚æ¯æ¬¡æœ‰äº›å°æ”¹åŠ¨ä¹Ÿè¦è¿›æœ¬åœ°ä»£ç æ¨é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ‹‰å–æœ€æ–°ä»£ç è¿™ç§é‡å¤æ€§çš„æ“ä½œï¼Œæ„Ÿè§‰ååˆ†ç¹çï¼Œä¸€ç›´æƒ³æ‰¾ä¸€ä¸ªç®€å•æ–¹ä¾¿çš„æ–¹å¼è¿›è¡Œå¾®ä¿¡æœ¬åœ°ç¯å¢ƒçš„å¼€å‘ã€‚ğŸ˜“ æ— å¥ˆä¹‹å‰è‡ªå·±å¤ªæ‡’äº†â€¦â€¦æ€»æ˜¯æ‹–ã€‚æœ€è¿‘å‡ å¤©å¥½å¥½ç ”ç©¶äº†ä¸‹ç‰¹æ­¤è®°å½•ä¸‹æ¥ã€‚</p><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol><li>ä¸€å°å…¬ç½‘å¯ä»¥è®¿é—®çš„æœåŠ¡å™¨ï¼ˆæˆ–ä½¿ç”¨æµ·å¤–æœåŠ¡å™¨ï¼‰ã€‚</li><li>ä¸€ä¸ªå·²ç»å¤‡æ¡ˆçš„åŸŸåã€‚</li><li>å†…ç½‘ç©¿é€å·¥å…· <a href="https://github.com/fatedier/frp" target="_blank" rel="noopener">frp</a></li></ol><h2 id="æœåŠ¡ç«¯é…ç½®"><a href="#æœåŠ¡ç«¯é…ç½®" class="headerlink" title="æœåŠ¡ç«¯é…ç½®"></a>æœåŠ¡ç«¯é…ç½®</h2><h3 id="ä¸‹è½½-frp"><a href="#ä¸‹è½½-frp" class="headerlink" title="ä¸‹è½½ frp"></a>ä¸‹è½½ frp</h3><p>ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„ <a href="https://github.com/fatedier/frp/releases" target="_blank" rel="noopener">frp</a> åŒ…ã€‚å› ä¸ºæˆ‘çš„å…¬ç½‘æœåŠ¡å™¨æ˜¯ centOS6-x64 æ‰€ä»¥ä¸‹è½½äº† <code>frp_0.24.1_linux_amd64.tar.gz</code> åŒ…ã€‚</p><h3 id="é…ç½®-frp-æœåŠ¡ç«¯"><a href="#é…ç½®-frp-æœåŠ¡ç«¯" class="headerlink" title="é…ç½® frp æœåŠ¡ç«¯"></a>é…ç½® frp æœåŠ¡ç«¯</h3><ol><li>åœ¨æœåŠ¡å™¨ä¸Šè§£å‹ä¸‹è½½å¥½çš„ frp åŒ…ã€‚</li></ol><pre class=" language-bash"><code class="language-bash"> <span class="token function">tar</span> zxvf frp_0.24.1_linux_amd64.tar.gz</code></pre><ol start="2"><li><p>è¿›å…¥è§£å‹å¥½çš„ç›®å½•ï¼Œç¼–è¾‘ frp æœåŠ¡å™¨ç«¯é…ç½®æ–‡ä»¶ <strong>frps.ini</strong>ã€‚</p><pre class=" language-ini"><code class="language-ini"><span class="token selector">[common]</span><span class="token constant">bind_port</span> <span class="token attr-value"><span class="token punctuation">=</span> 7000             #frp ç»‘å®šçš„ç«¯å£</span><span class="token constant">vhost_http_port</span> <span class="token attr-value"><span class="token punctuation">=</span> 8000       #http è®¿é—®ç«¯å£</span></code></pre><ol start="3"><li>å¯åŠ¨æœåŠ¡ç«¯ frp</li></ol><pre class=" language-bash"><code class="language-bash">./frps -c ./frps.ini</code></pre></li></ol><h2 id="è§£æåŸŸå"><a href="#è§£æåŸŸå" class="headerlink" title="è§£æåŸŸå"></a>è§£æåŸŸå</h2><p>åœ¨åŸŸåæœåŠ¡å•†é…ç½®åŸŸåè§£æï¼Œå°†åŸŸåè§£æåˆ°ä¸Šé¢çš„æœåŠ¡å™¨ ip åœ°å€ä¸Šã€‚</p><h2 id="é…ç½®-nginx-åå‘ä»£ç†è¿›è¡Œ-frp-ç«¯å£çš„è½¬å‘"><a href="#é…ç½®-nginx-åå‘ä»£ç†è¿›è¡Œ-frp-ç«¯å£çš„è½¬å‘" class="headerlink" title="é…ç½® nginx åå‘ä»£ç†è¿›è¡Œ frp ç«¯å£çš„è½¬å‘"></a>é…ç½® nginx åå‘ä»£ç†è¿›è¡Œ frp ç«¯å£çš„è½¬å‘</h2><ol><li>é…ç½® nginx </li></ol><pre class=" language-nginx"><code class="language-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>    <span class="token keyword">listen</span> <span class="token number">80</span><span class="token punctuation">;</span>    <span class="token keyword">server_name</span> wx<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>com<span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># ç»‘å®šåŸŸå</span>    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">8000</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># è½¬å‘è‡³æœ¬æœº8000,å³åœ¨frps.iniä¸­é…ç½®>çš„vhost_http_port</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ol start="2"><li>é‡å¯ nginx</li></ol><h2 id="æœ¬åœ°ç«¯é…ç½®"><a href="#æœ¬åœ°ç«¯é…ç½®" class="headerlink" title="æœ¬åœ°ç«¯é…ç½®"></a>æœ¬åœ°ç«¯é…ç½®</h2><blockquote><p> æœ¬åœ°ä½¿ç”¨çš„æ˜¯ vagrant è™šæ‹Ÿæœºã€‚ä½¿ç”¨çš„åŒæ ·æ˜¯ centOS6-x64ã€‚åœ¨é…ç½® frp å®¢æˆ·ç«¯ä¹‹å‰éœ€è¦å°†é¡¹ç›®ä»£ç åœ¨ nginx ä¸­æ­£ç¡®é…ç½®ï¼ŒæŒ‡å®šçš„åŸŸåå°±æ˜¯ä¸Šé¢è§£æçš„åŸŸåã€‚</p></blockquote><ol><li>æ ¹æ®æœ¬åœ°ç³»ç»Ÿç¯å¢ƒä¸‹è½½å¯¹åº”çš„  <a href="https://github.com/fatedier/frp/releases" target="_blank" rel="noopener">frp</a> åŒ…ã€‚</li><li><p>ç¼–è¾‘ frp å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ <strong>frpc.ini</strong>ã€‚</p><pre class=" language-ini"><code class="language-ini"><span class="token selector">[common]</span><span class="token constant">server_addr</span> <span class="token attr-value"><span class="token punctuation">=</span> x.x.x.x     #frps æ‰€åœ¨çš„æœåŠ¡å™¨çš„ IP</span><span class="token constant">server_port</span> <span class="token attr-value"><span class="token punctuation">=</span> 7000        #frps ç»‘å®šçš„ç«¯å£</span><span class="token constant">use_encryption</span> <span class="token attr-value"><span class="token punctuation">=</span> true     #å°† frpc ä¸ frps ä¹‹é—´çš„é€šä¿¡å†…å®¹åŠ å¯†ä¼ è¾“ï¼Œå°†ä¼šæœ‰æ•ˆé˜²æ­¢æµé‡è¢«æ‹¦æˆªã€‚ </span><span class="token constant">use_compression</span> <span class="token attr-value"><span class="token punctuation">=</span> true     # å¯¹ä¼ è¾“å†…å®¹è¿›è¡Œå‹ç¼©ï¼Œå¯ä»¥æœ‰æ•ˆå‡å° frpc ä¸ frps ä¹‹é—´çš„ç½‘ç»œæµé‡ï¼ŒåŠ å¿«æµé‡è½¬å‘é€Ÿåº¦ï¼Œä½†æ˜¯ä¼šé¢å¤–æ¶ˆè€—ä¸€äº› cpu èµ„æºã€‚</span><span class="token selector">[web]</span><span class="token constant">type</span> <span class="token attr-value"><span class="token punctuation">=</span> http</span><span class="token constant">local_port</span> <span class="token attr-value"><span class="token punctuation">=</span> 80   #ä¸ºæœ¬åœ°æœºå™¨ä¸Š web æœåŠ¡å¯¹åº”çš„ç«¯å£</span><span class="token constant">custom_domains</span> <span class="token attr-value"><span class="token punctuation">=</span> wx.domain.com   #ä¸Šä¸€æ­¥ä¸­è§£æå¥½çš„åŸŸå</span></code></pre></li></ol><ol start="3"><li>å¯åŠ¨ frp å®¢æˆ·ç«¯<pre class=" language-bash"><code class="language-bash">./frpc -c ./frpc.ini</code></pre></li></ol><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>å¦‚æœä¸€åˆ‡æ­£å¸¸é‚£ä¹ˆç°åœ¨éšä¾¿æ‰¾ä¸€å°è®¾å¤‡ï¼Œè®¿é—®åˆšæ‰çš„åŸŸåå°±å¯ä»¥è®¿é—®åˆ°æœ¬åœ°çš„é¡¹ç›®äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ç¯å¢ƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼€å‘ç¯å¢ƒ </tag>
            
            <tag> frp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL å„ç§é”çš„ç†è§£</title>
      <link href="/2019/02/14/ge-chong-suo-de-li-jie/"/>
      <url>/2019/02/14/ge-chong-suo-de-li-jie/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¹‹å‰æ€»æ˜¯å¬è¯´ MySQL ä¸­çš„é”ï¼Œä¸€ç›´æ²¡æœ‰å…·ä½“çš„çœ‹è¿‡ï¼Œæ™šä¸ŠæŠ½äº†ç©ºçœ‹äº†ä¸€ç‚¹å°±å…ˆè®°å½•äº†ä¸‹æ¥ï¼Œåé¢æœ‰æœºä¼šåœ¨è¡¥å……ã€‚</p></blockquote><h2 id="ä¸ºä»€ä¹ˆéœ€è¦é”"><a href="#ä¸ºä»€ä¹ˆéœ€è¦é”" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦é”"></a>ä¸ºä»€ä¹ˆéœ€è¦é”</h2><p>å› ä¸ºæ•°æ®åº“æ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å…±äº«çš„èµ„æºï¼Œä¹Ÿå°±æ˜¯ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®æ•°æ®ã€‚å½“æœ‰ä¸€ä¸ªå•†å“è¡¨åº“å­˜ä¸º1ï¼Œå½“ä¸€ä¸ªç”¨æˆ·è´­ä¹°è¯¥å•†å“çš„æ—¶å€™ï¼Œé¦–å…ˆéœ€è¦æŸ¥è¯¢å•†å“çš„åº“å­˜ã€‚å¦‚æœä¸€ä¸ªäººè¯·æ±‚æ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ã€‚ä½†æ˜¯å½“ä¸¤ä¸ªç”¨æˆ·åŒæ—¶è´­ä¹°è¯¥å•†å“çš„æ—¶å€™ç”±äºæ—¶é—´æ¯”è¾ƒæ¥è¿‘ï¼Œå½“ç¬¬ä¸€ä¸ªç”¨æˆ·æŸ¥è¯¢å®Œå•†å“è¿˜æœªè¿›è¡Œæ›´æ–°åº“å­˜çš„æ—¶å€™ï¼Œç¬¬äºŒä¸ªç”¨æˆ·å°±è¿›æ¥äº†ï¼Œç”±äºåº“å­˜è¿˜æ²¡æœ‰æ›´æ–°ï¼Œæ‰€ä»¥è¯¥ç”¨æˆ·ä¹Ÿå¯ä»¥ä¸‹å•æˆåŠŸã€‚æœ€ç»ˆå°†å¯¼è‡´åº“å­˜ä¸º-1ï¼Œç ´å¹»äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚ä¸ºäº†è§£å†³è¿™é—®é¢˜æ‰æœ‰ä¸ªé”çš„æ¦‚å¿µã€‚</p><h2 id="æœ‰å“ªäº›é”"><a href="#æœ‰å“ªäº›é”" class="headerlink" title="æœ‰å“ªäº›é”"></a>æœ‰å“ªäº›é”</h2><ul><li>é”çš„ç±»å‹<ul><li>è¯»é”</li><li>å†™é”</li></ul></li><li>é”çš„ç²’åº¦<ul><li>è¡Œé”</li><li>è¡¨é”</li></ul></li><li>æŒæœ‰é”çš„æ—¶é—´<ul><li>ä¸´æ—¶é”</li><li>æŒç»­é”</li></ul></li></ul><h2 id="éš”ç¦»çº§åˆ«"><a href="#éš”ç¦»çº§åˆ«" class="headerlink" title="éš”ç¦»çº§åˆ«"></a>éš”ç¦»çº§åˆ«</h2><blockquote><p>è¯´åˆ°é”é‚£ä¹ˆæ¥ä¸‹æ¥å°±éœ€è¦äº†è§£éš”ç¦»çº§åˆ«ï¼Œäº†è§£éš”ç¦»çº§åˆ«å°±éœ€è¦äº†è§£æ•°æ®åº“çš„å››è¦ç´ ã€‚</p></blockquote><h3 id="æ•°æ®åº“å››è¦ç´ ï¼ˆACIDï¼‰"><a href="#æ•°æ®åº“å››è¦ç´ ï¼ˆACIDï¼‰" class="headerlink" title="æ•°æ®åº“å››è¦ç´ ï¼ˆACIDï¼‰"></a>æ•°æ®åº“å››è¦ç´ ï¼ˆACIDï¼‰</h3><ul><li>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨ <strong>ä¸</strong> å®Œæˆã€‚</li><li>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡å•å…ƒæäº¤åæ‰å¯ä»¥è¢«å…¶ä»–äº‹åŠ¡æŸ¥çœ‹åˆ°ã€‚</li><li>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šå¹¶å‘äº‹åŠ¡ä¹‹é—´ä¸ç›¸äº’å½±å“ã€‚<em>è®¾ç«‹äº†ä¸åŒçš„éš”ç¦»çº§åˆ«ï¼Œé€šè¿‡é€‚åº¦ç ´åä¸€è‡´æ€§æ¥æé«˜æ€§èƒ½</em></li><li>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šäº‹ç‰©æäº¤ä¹‹åå³æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ä¸ä¼šä¸¢å¤±ã€‚</li></ul><p><em><strong>é”åªæ˜¯å®ç°éš”ç¦»çº§åˆ«çš„å‡ ç§æ–¹å¼ä¹‹ä¸€ï¼Œé™¤äº†é”ï¼Œå®ç°å¹¶å‘é—®é¢˜çš„æ–¹å¼è¿˜æœ‰æ—¶é—´æˆ³ï¼Œå¤šç‰ˆæœ¬æ§åˆ¶ç­‰ç­‰ï¼Œè¿™äº›ä¹Ÿå¯ä»¥ç§°ä¸ºæ— é”çš„å¹¶å‘æ§åˆ¶ã€‚</strong></em></p><h3 id="å››ç§éš”ç¦»çº§åˆ«"><a href="#å››ç§éš”ç¦»çº§åˆ«" class="headerlink" title="å››ç§éš”ç¦»çº§åˆ«"></a>å››ç§éš”ç¦»çº§åˆ«</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">#æŸ¥è¯¢å½“å‰éš”ç¦»çº§åˆ«</span><span class="token keyword">select</span> @<span class="token variable">@global.tx_isolation</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">#æŸ¥è¯¢å…¨å±€éš”ç¦»çº§åˆ«</span><span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation level</span> <span class="token keyword">read</span> <span class="token keyword">uncommitted</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">#è®¾ç½®å½“å‰éš”ç¦»çº§åˆ«ä¸º RU</span><span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation level</span> <span class="token keyword">read</span> <span class="token keyword">committed</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">#è®¾ç½®å½“å‰éš”ç¦»çº§åˆ«ä¸º RC</span><span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation level</span> <span class="token keyword">repeatable</span> <span class="token keyword">read</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">#è®¾ç½®å½“å‰éš”ç¦»çº§åˆ«ä¸º RR</span><span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation level</span> <span class="token keyword">serializable</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">#è®¾ç½®å½“å‰éš”ç¦»çº§åˆ«ä¸º RS</span></code></pre><ul><li>è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰ï¼šäº‹åŠ¡çš„è¯»ä¸é˜»å¡å…¶ä»–äº‹åŠ¡çš„è¯»å’Œå†™ï¼Œäº‹åŠ¡çš„å†™åªé˜»å¡å…¶ä»–äº‹åŠ¡çš„å†™ï¼Œä½†ä¸é˜»å¡è¯»ã€‚<strong>é€šè¿‡å¯¹å†™æ“ä½œåŠ â€œæŒç»­ X é”â€ï¼Œå¯¹è¯»æ“ä½œä¸åŠ é”å®ç°ã€‚</strong></li><li>è¯»å·²æäº¤ï¼ˆRead Committedï¼‰ï¼šäº‹åŠ¡çš„è¯»ä¸é˜»å¡å…¶ä»–äº‹åŠ¡çš„è¯»å’Œå†™ï¼Œäº‹åŠ¡çš„å†™ä¹Ÿä¼šé˜»å¡å…¶ä»–äº‹åŠ¡çš„è¯»å’Œå†™ã€‚<strong>é€šè¿‡å¯¹å†™æ“ä½œåŠ â€œæŒç»­ X é”â€ï¼Œå¯¹è¯»æ“ä½œåŠ â€œä¸´æ—¶ S é”â€å®ç°ã€‚</strong></li><li>å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰ï¼šäº‹åŠ¡çš„è¯»ä¼šé˜»å¡å…¶ä»–äº‹åŠ¡çš„å†™ï¼Œä½†ä¸é˜»å¡è¯»ã€‚äº‹åŠ¡çš„å†™ä¼šé˜»å¡å…¶ä»–äº‹åŠ¡çš„è¯»å’Œå†™ã€‚<strong>é€šè¿‡å¯¹å†™æ“ä½œåŠ â€œæŒç»­ X é”â€ï¼Œå¯¹è¯»æ“ä½œåŠ â€œæŒç»­ S é”â€å®ç°ã€‚</strong></li><li>åºåˆ—åŒ–ï¼ˆSerializableï¼‰ï¼šæœ€å®‰å…¨çš„ä¸€ç§çº§åˆ«ï¼Œä¸ä¼šå‡ºç°è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜ã€‚ä½†æ˜¯å¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„è¶…æ—¶ç°è±¡å’Œé”ç«äº‰ã€‚<strong>ä½¿ç”¨çš„æ˜¯è¡¨çº§é”</strong></li></ul><h3 id="å¯èƒ½äº§ç”Ÿçš„é—®é¢˜"><a href="#å¯èƒ½äº§ç”Ÿçš„é—®é¢˜" class="headerlink" title="å¯èƒ½äº§ç”Ÿçš„é—®é¢˜"></a>å¯èƒ½äº§ç”Ÿçš„é—®é¢˜</h3><p><img src="http://static.xiangdangnian.net.cn/blog/WX20190219-093153@2x.png" alt="WX20190219-093153@2x.png"></p><h4 id="è„è¯»"><a href="#è„è¯»" class="headerlink" title="è„è¯»"></a>è„è¯»</h4><p>å…¬å¸å‘å·¥èµ„ï¼Œæ‰“äº†10000ä¸‡åˆ°æˆ‘çš„è´¦æˆ·ï¼Œä½†æ˜¯è¯¥äº‹åŠ¡æ²¡æœ‰æäº¤ã€‚è¿™æ—¶æˆ‘æ­£å¥½æŸ¥çœ‹è´¦æˆ·ï¼Œå‘ç°10000å…ƒå·²ç»åˆ°è´¦ï¼Œéå¸¸å¼€å¿ƒã€‚å¯ä»¥å…¬å¸è¿™æ—¶åˆå‘ç°å‘é”™äº†ï¼Œäºæ˜¯å›æ»šäº‹åŠ¡ï¼Œä¿®æ”¹é‡‘é¢ä¸º5000ï¼Œç„¶åæäº¤äº‹åŠ¡ã€‚æœ€ç»ˆæˆ‘å®é™…å¾—åˆ°çš„å·¥èµ„åªæœ‰5000ï¼Œç©ºæ¬¢å–œä¸€åœºã€‚</p><blockquote><p>è¿™å°±æ˜¯è„è¯»ï¼Œä¸¤ä¸ªå¹¶å‘çš„äº‹åŠ¡ï¼Œå…¶ä¸­ä¸€ä¸ªè¯»å–åˆ°äº†å¦ä¸€ä¸ªæ²¡æœ‰æäº¤çš„æ•°æ®ã€‚</p></blockquote><h4 id="ä¸å¯é‡å¤è¯»"><a href="#ä¸å¯é‡å¤è¯»" class="headerlink" title="ä¸å¯é‡å¤è¯»"></a>ä¸å¯é‡å¤è¯»</h4><p>æ‹¿ç€åˆšå‘çš„å·¥èµ„å»ä¹°æœ¬ä¹¦çœ‹çœ‹ï¼Œä»˜é’±æ—¶ç³»ç»Ÿè¯»åˆ°æˆ‘å¡é‡Œæœ‰5000å…ƒï¼Œç„¶è€Œæ­¤æ—¶å¥³å‹ä¹Ÿæ‹¿ç€æˆ‘çš„å¡åœ¨æ¶ˆè´¹ï¼Œå¹¶èŠ±å®Œäº†å¡é‡Œçš„é’±ï¼Œå¹¶åœ¨æˆ‘ä¹‹å‰æäº¤äº†äº‹åŠ¡ï¼Œå½“æˆ‘è¿™è¾¹è¿›è¡Œæ‰£æ¬¾çš„æ—¶å€™ç³»ç»Ÿå‘ç°å¡é‡Œæ²¡æœ‰é’±äº†ï¼Œæç¤ºæ‰£æ¬¾å¤±è´¥ã€‚æˆ‘å°±ååˆ†çº³é—·ï¼Œæ˜æ˜æœ‰é’±å•Šï¼Œæ€ä¹ˆã€‚ã€‚ã€‚</p><blockquote><p> è¿™å°±æ˜¯ä¸å¯é‡å¤è¯»ï¼Œä¸¤ä¸ªå¹¶å‘äº‹åŠ¡ï¼Œåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡ä¸­æäº¤äº†çš„ç»“æœï¼Œç¬¬ä¸€äº‹åŠ¡åœ¨ç¬¬äºŒä¸ªäº‹åŠ¡æäº¤å‰å’Œæäº¤åæŸ¥çœ‹åˆ°çš„ç»“æœä¸ä¸€è‡´ã€‚ï¼ˆä¸»è¦æ˜¯é’ˆå¯¹æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼‰<strong>å½“éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºRead committedæ—¶ï¼Œé¿å…äº†è„è¯»ï¼Œä½†æ˜¯å¯èƒ½ä¼šé€ æˆä¸å¯é‡å¤è¯»ã€‚</strong></p></blockquote><h4 id="å¹»è¯»"><a href="#å¹»è¯»" class="headerlink" title="å¹»è¯»"></a>å¹»è¯»</h4><p>æˆ‘åˆä¸€ä¸ªè®¡åˆ’ä»»åŠ¡è¡¨ï¼Œå½“å‰ä¸ºç©ºçš„ã€‚åœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­æˆ‘æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡æ˜¾ç¤ºä¸ºç©ºã€‚è¿™æ—¶å¥³å‹åœ¨å¦ä¸€ä¸ªäº‹åŠ¡å¢åŠ äº†ä¸€æ¡ä»»åŠ¡â€œæ—©ä¸Šèµ·åºŠåšæ—©é¥­â€ï¼Œå¹¶æäº¤äº†äº‹åŠ¡ã€‚è¿™æ˜¯æˆ‘åˆæŸ¥çœ‹äº†ä¸€ä¸‹æ‰€æœ‰ä»»åŠ¡å‘ç°è¿˜æ˜¯ç©ºçš„ï¼Œæˆ‘å°±å‡†å¤‡åŠ ä¸€ä¸ªä»»åŠ¡â€œæ—©ä¸Šèµ·åºŠåšæ—©é¥­â€ï¼Œå¯æ˜¯è¿™æ—¶å´æç¤ºæˆ‘é”™è¯¯ã€‚æˆ‘å°±çº³äº†é—·äº†ï¼Œæ˜æ˜æ²¡æœ‰æ•°æ®å•Šï¼Œæ€ä¹ˆä¸è®©æˆ‘åŠ å‘¢ï¼Ÿéš¾é“å‡ºç°äº†å¹»è§‰ï¼Ÿ</p><blockquote><p>è¿™å°±æ˜¯å¹»è¯»ã€‚ç¬¬ä¸€ä¸ªäº‹åŠ¡å¯¹ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè¿™ç§ä¿®æ”¹æ¶‰åŠåˆ°è¡¨ä¸­çš„å…¨éƒ¨æ•°æ®è¡Œã€‚åŒæ—¶ï¼Œç¬¬äºŒä¸ªäº‹åŠ¡ä¹Ÿä¿®æ”¹è¿™ä¸ªè¡¨ä¸­çš„æ•°æ®ï¼Œè¿™ç§ä¿®æ”¹æ˜¯å‘è¡¨ä¸­æ’å…¥ä¸€è¡Œæ–°æ•°æ®ã€‚é‚£ä¹ˆï¼Œä»¥åå°±ä¼šå‘ç”Ÿæ“ä½œç¬¬ä¸€ä¸ªäº‹åŠ¡çš„ç”¨æˆ·å‘ç°è¡¨ä¸­è¿˜æœ‰æ²¡æœ‰ä¿®æ”¹çš„æ•°æ®è¡Œï¼Œå°±å¥½è±¡å‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ã€‚ï¼ˆä¸»è¦é’ˆå¯¹æ–°å¢æ“ä½œï¼‰</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°è´Ÿè½½å‡è¡¡</title>
      <link href="/2019/01/27/shi-xian-fu-zai-jun-heng/"/>
      <url>/2019/01/27/shi-xian-fu-zai-jun-heng/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¶æ„å›¾"><a href="#æ¶æ„å›¾" class="headerlink" title="æ¶æ„å›¾"></a>æ¶æ„å›¾</h2><p><img src="http://static.xiangdangnian.net.cn/blog/2019-01-273.56.02.png" alt="æ¶æ„å›¾"></p><blockquote><p>ç®€ä»‹ï¼š ç”¨æˆ·è®¿é—®è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨å°†ç›¸åº”çš„è¯·æ±‚è½¬å‘è‡³åº”ç”¨æœåŠ¡å™¨APP1æˆ–APP2ã€‚å½“å‰å…¶ä¸­ä¸€å°åº”ç”¨æœåŠ¡å™¨downè°ƒçš„æ—¶å€™ï¼Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨å°†ä¼šæŠŠè¯·æ±‚è½¬å‘è‡³å¦ä¸€å°æ­£å¸¸çš„æœåŠ¡å™¨ä¸Šã€‚</p></blockquote><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><h3 id="å®‰è£…è´Ÿè½½å‡è¡¡æœåŠ¡å™¨"><a href="#å®‰è£…è´Ÿè½½å‡è¡¡æœåŠ¡å™¨" class="headerlink" title="å®‰è£…è´Ÿè½½å‡è¡¡æœåŠ¡å™¨"></a>å®‰è£…è´Ÿè½½å‡è¡¡æœåŠ¡å™¨</h3><h4 id="å®‰è£…å¹¶å¯åŠ¨-nginx-æˆ–ä½¿ç”¨-jellybool-çš„-sh-è„šæœ¬"><a href="#å®‰è£…å¹¶å¯åŠ¨-nginx-æˆ–ä½¿ç”¨-jellybool-çš„-sh-è„šæœ¬" class="headerlink" title="å®‰è£…å¹¶å¯åŠ¨ nginx (æˆ–ä½¿ç”¨ jellybool çš„ sh è„šæœ¬)"></a>å®‰è£…å¹¶å¯åŠ¨ nginx (<a href="https://github.com/JellyBool/laravel-server-script/blob/master/laravel-nginx-proxy-server.sh" target="_blank" rel="noopener">æˆ–ä½¿ç”¨ jellybool çš„ sh è„šæœ¬</a>)</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update<span class="token function">sudo</span> LC_ALL<span class="token operator">=</span>en_US.UTF-8 add-apt-repository ppa:nginx/development -y<span class="token function">sudo</span> <span class="token function">apt-get</span> update<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> nginx<span class="token function">sudo</span> <span class="token function">cp</span> /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak<span class="token function">sudo</span> <span class="token function">service</span> nginx start</code></pre><h4 id="é…ç½®-nginx-æœåŠ¡å™¨ä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨"><a href="#é…ç½®-nginx-æœåŠ¡å™¨ä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨" class="headerlink" title="é…ç½® nginx æœåŠ¡å™¨ä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨"></a>é…ç½® nginx æœåŠ¡å™¨ä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨</h4><pre class=" language-nginx"><code class="language-nginx"><span class="token keyword">upstream</span> backend <span class="token punctuation">{</span>    <span class="token keyword">server</span> pravite<span class="token operator">-</span>ip<span class="token operator">-</span>address<span class="token number">-1</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">#åº”ç”¨æœåŠ¡å™¨ipåœ°å€</span>    <span class="token keyword">server</span> pravite<span class="token operator">-</span>ip<span class="token operator">-</span>address<span class="token number">-2</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">#åº”ç”¨æœåŠ¡å™¨ipåœ°å€</span><span class="token punctuation">}</span><span class="token keyword">server</span> <span class="token punctuation">{</span>    <span class="token keyword">listen</span> <span class="token number">80</span> default_server<span class="token punctuation">;</span>    <span class="token keyword">listen</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token number">80</span> default_server<span class="token punctuation">;</span>    <span class="token keyword">server_name</span> nuli<span class="token punctuation">.</span>io www<span class="token punctuation">.</span>nuli<span class="token punctuation">.</span>io<span class="token punctuation">;</span>    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>        <span class="token keyword">add_header</span> X<span class="token operator">-</span>Content<span class="token operator">-</span>Type<span class="token operator">-</span>Options nosniff<span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Scheme <span class="token variable">$scheme</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Host <span class="token variable">$http_host</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>NginX<span class="token operator">-</span><span class="token keyword">Proxy</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_hide_header</span> X<span class="token operator">-</span>Powered<span class="token operator">-</span>By<span class="token punctuation">;</span>        <span class="token keyword">proxy_hide_header</span> Vary<span class="token punctuation">;</span>        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>backend<span class="token punctuation">;</span>        <span class="token keyword">proxy_redirect</span> off<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="æ£€æµ‹-nginx-é…ç½®å¹¶é‡å¯-nginx-æœåŠ¡"><a href="#æ£€æµ‹-nginx-é…ç½®å¹¶é‡å¯-nginx-æœåŠ¡" class="headerlink" title="æ£€æµ‹ nginx é…ç½®å¹¶é‡å¯ nginx æœåŠ¡"></a>æ£€æµ‹ nginx é…ç½®å¹¶é‡å¯ nginx æœåŠ¡</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> nginx -t<span class="token function">sudo</span> <span class="token function">service</span> nginx reload</code></pre><h3 id="å®‰è£…åº”ç”¨æœåŠ¡å™¨-APP1"><a href="#å®‰è£…åº”ç”¨æœåŠ¡å™¨-APP1" class="headerlink" title="å®‰è£…åº”ç”¨æœåŠ¡å™¨ APP1"></a>å®‰è£…åº”ç”¨æœåŠ¡å™¨ APP1</h3><h4 id="å®‰è£…-nginx-å’Œ-php-ä»¥åŠ-php-æ‰©å±•-æˆ–ä½¿ç”¨-jellybool-çš„-sh-è„šæœ¬"><a href="#å®‰è£…-nginx-å’Œ-php-ä»¥åŠ-php-æ‰©å±•-æˆ–ä½¿ç”¨-jellybool-çš„-sh-è„šæœ¬" class="headerlink" title="å®‰è£… nginx å’Œ php ä»¥åŠ php æ‰©å±•  æˆ–ä½¿ç”¨ jellybool çš„ sh è„šæœ¬"></a>å®‰è£… nginx å’Œ php ä»¥åŠ php æ‰©å±•  <a href="https://github.com/JellyBool/laravel-server-script/blob/master/laravel-app-server.sh" target="_blank" rel="noopener">æˆ–ä½¿ç”¨ jellybool çš„ sh è„šæœ¬</a></h4><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> zsh <span class="token function">htop</span> <span class="token function">zip</span> unzip composer<span class="token function">sudo</span> LC_ALL<span class="token operator">=</span>en_US.UTF-8 add-apt-repository ppa:nginx/development -y<span class="token function">sudo</span> <span class="token function">apt-get</span> update<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> nginx<span class="token function">sudo</span> <span class="token function">service</span> nginx start<span class="token function">sudo</span> LC_ALL<span class="token operator">=</span>en_US.UTF-8 add-apt-repository ppa:ondrej/php -y<span class="token function">sudo</span> <span class="token function">apt-get</span> update<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> php7.2<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> php7.2-mysql<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> php7.2-fpm<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> php7.2-curl php7.2-xml php7.2-json php7.2-gd php7.2-mbstring php7.2-bcmath<span class="token function">sudo</span> <span class="token function">service</span> php7.2-fpm restart<span class="token function">sudo</span> <span class="token function">cp</span> /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak</code></pre><h3 id="å®‰è£…åº”ç”¨æœåŠ¡å™¨-APP2-åŒ-APP1"><a href="#å®‰è£…åº”ç”¨æœåŠ¡å™¨-APP2-åŒ-APP1" class="headerlink" title="å®‰è£…åº”ç”¨æœåŠ¡å™¨ APP2 (åŒ APP1)"></a>å®‰è£…åº”ç”¨æœåŠ¡å™¨ APP2 (åŒ APP1)</h3><h3 id="æµ‹è¯•è´Ÿè½½å‡è¡¡"><a href="#æµ‹è¯•è´Ÿè½½å‡è¡¡" class="headerlink" title="æµ‹è¯•è´Ÿè½½å‡è¡¡"></a>æµ‹è¯•è´Ÿè½½å‡è¡¡</h3><ol><li>åœ¨ APP1 æœåŠ¡å™¨ä¸Šçš„ <code>/var/www/html</code> ç›®å½•ä¸‹å°† <code>index.html</code>æ–‡ä»¶å†…å®¹æ›´æ”¹ä¸º APP1ã€‚</li><li>åœ¨ APP2 æœåŠ¡å™¨ä¸Šçš„ <code>/var/www/html</code> ç›®å½•ä¸‹å°† <code>index.html</code>æ–‡ä»¶å†…å®¹æ›´æ”¹ä¸º APP2ã€‚</li><li>è®¿é—®è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ ip åœ°å€æˆ–é…ç½®çš„åŸŸåã€‚æ­¤æ—¶é¡µé¢å°†äº¤æ›¿æ˜¾ç¤º APP1 å’Œ APP2 ã€‚~~~æˆåŠŸã€‚</li></ol><h3 id="ä½¿ç”¨-Envoy-å°†-Laravel-é¡¹ç›®åŒæ—¶éƒ¨ç½²åœ¨æ‰€æœ‰è´Ÿè½½å‡è¡¡çš„æœºå™¨ä¸Š"><a href="#ä½¿ç”¨-Envoy-å°†-Laravel-é¡¹ç›®åŒæ—¶éƒ¨ç½²åœ¨æ‰€æœ‰è´Ÿè½½å‡è¡¡çš„æœºå™¨ä¸Š" class="headerlink" title="ä½¿ç”¨ Envoy å°† Laravel é¡¹ç›®åŒæ—¶éƒ¨ç½²åœ¨æ‰€æœ‰è´Ÿè½½å‡è¡¡çš„æœºå™¨ä¸Š"></a>ä½¿ç”¨ Envoy å°† Laravel é¡¹ç›®åŒæ—¶éƒ¨ç½²åœ¨æ‰€æœ‰è´Ÿè½½å‡è¡¡çš„æœºå™¨ä¸Š</h3><ol><li>åœ¨æœ¬æœºä¸Šåˆ›å»º Laravel é¡¹ç›®</li><li>å°†é¡¹ç›®æäº¤åˆ° coding æˆ– github ä¸Š</li><li>é…ç½® coding æˆ– github çš„ssh ï¼ˆå¯é€‰ï¼‰</li><li>ä½¿ç”¨ ssh æˆ– https çš„æ–¹å¼å°†é¡¹ç›®éƒ¨ç½²åˆ° APP1 å’Œ APP2 æœåŠ¡å™¨ä¸Š</li><li>é…ç½®ä¸¤å°æœåŠ¡å™¨çš„ .env æ–‡ä»¶ <strong><strong>ä¿è¯ä¸¤å°æœåŠ¡å™¨çš„ APP_KEY è¦ä¸€ç›´</strong></strong></li><li>æµ‹è¯•â€”â€”<em>è®¿é—®è´Ÿè½½å‡è¡¡æœåŠ¡å™¨å¯ä»¥çœ‹åˆ° Laravel æ¬¢è¿è¯­</em></li><li>åœ¨æœ¬æœºä¸­çš„ Laravel é¡¹ç›®ä¸­å®‰è£… Envoy æ‰©å±•  <a href="https://laravel-china.org/docs/laravel/5.7/envoy/2307" target="_blank" rel="noopener">å‚è€ƒæ–‡æ¡£</a></li><li>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å¢ <code>Envoy.blade.php</code> æ–‡ä»¶å¹¶åœ¨æ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹å†…å®¹ã€‚ã€Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šæœ¬æœºå¯ä»¥é€šè¿‡ ssh çš„æ–¹å¼è®¿é—®å¯¹åº”çš„æœåŠ¡å™¨ã€</li></ol><pre class=" language-php"><code class="language-php">@<span class="token function">servers</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'web-1'</span>  <span class="token operator">=</span><span class="token operator">></span>  <span class="token string">'ssh root@192.168.3.11'</span><span class="token punctuation">,</span> <span class="token string">'web-2'</span>  <span class="token operator">=</span><span class="token operator">></span>  <span class="token string">'ssh root@192.168.3.11'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>@<span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'deploy'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'on'</span>  <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'web-1'</span><span class="token punctuation">,</span> <span class="token string">'web-2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'parallel'</span>  <span class="token operator">=</span><span class="token operator">></span>  <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span>cd <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>laravel<span class="token operator">-</span>deploy   sudo git pull origin master@endtask</code></pre><ol start="9"><li>è¿è¡Œéƒ¨ç½²å‘½ä»¤ <code>envoy run deploy</code>,å¦‚æœè¾“å‡ºå†…å®¹æ²¡æœ‰é”™è¯¯çš„è¯ï¼Œå°±è¡¨ç¤ºéƒ¨ç½²æˆåŠŸï¼Œå°±å¯ä»¥åœ¨è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¸Šè¿›è¡ŒæŸ¥çœ‹äº†ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> æœåŠ¡å™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> nginx </tag>
            
            <tag> è´Ÿè½½å‡è¡¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CGI, Fast-CGIï¼ŒPHP-CGIï¼ŒPHP-FPM å‡ ä¸ªæ¦‚å¿µçš„æ€»ç»“</title>
      <link href="/2019/01/24/cgi-fast-cgi-php-cgi-php-fpm-li-jie-md/"/>
      <url>/2019/01/24/cgi-fast-cgi-php-cgi-php-fpm-li-jie-md/</url>
      
        <content type="html"><![CDATA[<blockquote><p>2019-6-27 æ›´æ–°</p></blockquote><p><strong> æœ€è¿‘åˆçœ‹åˆ°äº†ç±»ä¼¼çš„æ–‡ç« ï¼Œå‘ç°ä¹‹å‰è®°å½•çš„å¥½åƒæ˜¯ä¸å¤ªå¯¹ã€‚ç°åœ¨ä¹Ÿä¸çŸ¥é“å“ªä¸ªæ˜¯æ­£ç¡®çš„ï¼Œå°±éƒ½å…ˆè®°ä¸‹æ¥å§ã€‚</strong> </p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><ol><li>CGIã€FastCGI åªæ˜¯PHPçš„çš„è¿è¡Œæ–¹å¼ã€‚å…¶ä»–çš„è¿˜æœ‰APACHE2HANDLERã€CLI æ–¹å¼ã€‚</li><li>PHP-FPMï¼ˆFastCGI Process Managerï¼‰ åªæ˜¯ FastCGI çš„è¿›ç¨‹ç®¡ç†å™¨ã€‚</li><li>PHP-CGI åªæ˜¯ Fast-CGI çš„å­è¿›ç¨‹ã€‚</li></ol><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a href="https://www.jb51.net/article/62554.htm" target="_blank" rel="noopener">php çš„4ç§å¸¸è§è¿è¡Œæ–¹å¼</a></p><hr><blockquote><p>åœ¨å¼€å§‹å­¦phpçš„æ—¶å€™æœ‰å‡ ä¸ªæ¦‚å¿µä¸€ç›´æ²¡æœ‰å¼„æ˜ç™½ï¼Œæœ€è¿‘æŸ¥äº†äº›èµ„æ–™ï¼Œç‰¹æ­¤è¡¥å……è®°å½•ä¸€ä¸‹ï¼Œä»¥é˜²å¿˜è®°ã€‚æœ‰ä¸å¯¹çš„åœ°æ–¹è¿˜è¯·é«˜æ‰‹æŒ‡ç‚¹ã€‚</p></blockquote><h2 id="ç»“è®º-1"><a href="#ç»“è®º-1" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><ul><li>CGIï¼šWEB æœåŠ¡å™¨ä¸ WEB åº”ç”¨ç¨‹åºä¹‹é—´äº¤æ¢æ•°æ®çš„ä¸€ç§åè®®ã€‚</li><li>FastCGIï¼šåŒ CGI ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ç§åè®®ï¼Œåªæ˜¯åœ¨æ•ˆç‡ä¸Šæ¯” CGI å¥½ä¸€äº›ã€‚</li><li>PHP-CGIï¼šfastCGI åè®®çš„ä¸€ç§å®ç°ã€‚(ä¹Ÿå°±æ˜¯ php å¯æ‰§è¡Œç›®å½•ä¸‹çš„php-cgiç¨‹åº)ã€‚ä»–æœ‰2ä¸ªé—®é¢˜ã€‚<ul><li>æ›´æ”¹é…ç½®æ–‡ä»¶åæ— æ³•å¹³æ»‘é‡å¯ã€‚</li><li>æ— æ³•åŠ¨æ€è°ƒæ•´è¿›åˆ¶å¤šå°‘ã€‚</li></ul></li><li>spawn-fcgiï¼šè§£å†³äº† php-cgi å‡ºç°çš„é—®é¢˜ã€‚ä½†å™¨ä»…ä»…æ˜¯ä¸€ä¸ªè¿›ç¨‹ç®¡ç†å™¨ã€‚</li><li>PHP-FPMï¼šå®ç°äº† Fast-CGI åè®®å¹¶ä¸”ä¹‹å‰å¹³æ»‘é‡å¯ï¼ŒåŒæ—¶è¿˜å¸¦æœ‰è¿›ç¨‹ç®¡ç†åŠŸèƒ½ã€‚</li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="https://www.ietf.org/rfc/rfc3875" target="_blank" rel="noopener">CGI åè®®å†…å®¹</a></p><p><a href="http://andylin02.iteye.com/blog/648412" target="_blank" rel="noopener">Fast-CGI åè®®å†…å®¹</a></p><p><a href="http://yongxiong.leanote.com/post/%E4%BB%8ECGI%E5%88%B0FastCGI%E5%88%B0PHP-FPM" target="_blank" rel="noopener">ä»CGIåˆ°FastCGIåˆ°PHP-FPM</a></p><p><a href="https://www.awaimai.com/371.html" target="_blank" rel="noopener">CGIã€FastCGIå’ŒPHP-FPMå…³ç³»å›¾è§£</a></p>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« </title>
      <link href="/2019/01/21/wo-de-di-yi-pian-wen-zhang/"/>
      <url>/2019/01/21/wo-de-di-yi-pian-wen-zhang/</url>
      
        <content type="html"><![CDATA[<h1 id="æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« "><a href="#æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« " class="headerlink" title="æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« "></a>æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« </h1><blockquote><p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä¸»è¦è®°å½•ä¸€ä¸‹hexoåšå®¢çš„å»ºç«‹å’Œä½¿ç”¨æ–¹æ³•ã€‚</p></blockquote><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://github.com/HarleyWang93/blog/issues/1" target="_blank" rel="noopener">æ­å»ºå‚è€ƒ</a></p><p><a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md" target="_blank" rel="noopener">ä¸»é¢˜é…ç½®</a></p><h2 id="æ­å»ºè¿‡ç¨‹"><a href="#æ­å»ºè¿‡ç¨‹" class="headerlink" title="æ­å»ºè¿‡ç¨‹"></a>æ­å»ºè¿‡ç¨‹</h2><h3 id="ç¯å¢ƒå®‰è£…"><a href="#ç¯å¢ƒå®‰è£…" class="headerlink" title="ç¯å¢ƒå®‰è£…"></a>ç¯å¢ƒå®‰è£…</h3><ol><li>éœ€è¦å®‰è£…gitå’ŒNode.js</li><li>æ³¨å†ŒGithubè´¦å·</li></ol><h3 id="å®‰è£…Hexo"><a href="#å®‰è£…Hexo" class="headerlink" title="å®‰è£…Hexo"></a>å®‰è£…Hexo</h3><ol><li><p>ä½¿ç”¨npmå…¨å±€å®‰è£…hexo</p><pre class=" language-yaml"><code class="language-yaml">sudo npm install <span class="token punctuation">-</span>g hexo<span class="token punctuation">-</span>cli</code></pre></li><li><p>ä½¿ç”¨hexo init åˆå§‹åŒ–é¡¹ç›®</p><pre class=" language-yaml"><code class="language-yaml">hexo init blog</code></pre></li><li><p>ä½¿ç”¨hexo sæŸ¥çœ‹çŠ¶æ€(é»˜è®¤è®¿é—®è¯¥åœ°å€<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000 </a>)</p><pre class=" language-yaml"><code class="language-yaml">hexo s</code></pre></li></ol><h3 id="å…³è”Github"><a href="#å…³è”Github" class="headerlink" title="å…³è”Github"></a>å…³è”Github</h3><ol><li>åˆ›å»ºä»“åº“</li><li>å¼€å¯Github Pages</li><li>é€‰æ‹©åˆ†æ”¯</li></ol><h3 id="ä¿®æ”¹å…¨å±€é…ç½®-æ³¨æ„ï¼šæ¯ä¸ªå†’å·åé¢éƒ½æœ‰ä¸ªç©ºæ ¼"><a href="#ä¿®æ”¹å…¨å±€é…ç½®-æ³¨æ„ï¼šæ¯ä¸ªå†’å·åé¢éƒ½æœ‰ä¸ªç©ºæ ¼" class="headerlink" title="ä¿®æ”¹å…¨å±€é…ç½®(æ³¨æ„ï¼šæ¯ä¸ªå†’å·åé¢éƒ½æœ‰ä¸ªç©ºæ ¼)"></a>ä¿®æ”¹å…¨å±€é…ç½®(æ³¨æ„ï¼šæ¯ä¸ªå†’å·åé¢éƒ½æœ‰ä¸ªç©ºæ ¼)</h3><p>åœ¨é¡¹ç›®ä¸­æ‰¾åˆ°_config.ymlæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ€åæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>    <span class="token key atrule">type</span><span class="token punctuation">:</span> git    <span class="token key atrule">repository</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/xxx/xxx.github.io.git  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master</code></pre><h3 id="ç”Ÿæˆé™æ€é¡µé¢"><a href="#ç”Ÿæˆé™æ€é¡µé¢" class="headerlink" title="ç”Ÿæˆé™æ€é¡µé¢"></a>ç”Ÿæˆé™æ€é¡µé¢</h3><ol><li>æ‰§è¡Œç”Ÿæˆé™æ€æ–‡ä»¶å‘½ä»¤</li></ol><pre class=" language-yaml"><code class="language-yaml">hexo g</code></pre><ol start="2"><li>å®‰è£…gitä¸Šä¼ æ’ä»¶</li></ol><pre class=" language-yaml"><code class="language-yaml">npm install hexo<span class="token punctuation">-</span>deployer<span class="token punctuation">-</span>git <span class="token punctuation">-</span><span class="token punctuation">-</span>save</code></pre><ol start="3"><li>æ‰§è¡Œä¸Šä¼ é™æ€æ–‡ä»¶å‘½ä»¤</li></ol><pre class=" language-yaml"><code class="language-yaml">hexo d</code></pre><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><pre><code>hexo new &quot;æ–‡ç« æ ‡é¢˜&quot;         //æ–°å»ºæ–‡ç« hexo new page &quot;é¡µé¢å&quot;      //æ–°å»ºé¡µé¢hexo g                     //ç”Ÿæˆé™æ€æ–‡ä»¶è‡³publicç›®å½•hexo server                //å¼€å¯æœ¬åœ°è®¿é—®hexo deploy                //éƒ¨ç½²åˆ°github</code></pre><h2 id="ä¸»é¢˜ä½¿ç”¨"><a href="#ä¸»é¢˜ä½¿ç”¨" class="headerlink" title="ä¸»é¢˜ä½¿ç”¨"></a>ä¸»é¢˜ä½¿ç”¨</h2><blockquote><p>å…·ä½“è¯¦ç»†å†…å®¹æŸ¥çœ‹é¡¹ç›®é“¾æ¥ <a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md" target="_blank" rel="noopener">hexo-theme-matery</a></p></blockquote><h3 id="æ–‡ç« å¤´éƒ¨ç¤ºä¾‹"><a href="#æ–‡ç« å¤´éƒ¨ç¤ºä¾‹" class="headerlink" title="æ–‡ç« å¤´éƒ¨ç¤ºä¾‹"></a>æ–‡ç« å¤´éƒ¨ç¤ºä¾‹</h3><pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> typora<span class="token punctuation">-</span>vue<span class="token punctuation">-</span>themeä¸»é¢˜ä»‹ç»<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-07 09:25:00</span><span class="token key atrule">author</span><span class="token punctuation">:</span> èµµå¥‡<span class="token key atrule">img</span><span class="token punctuation">:</span> /source/images/xxx.jpg <span class="token comment" spellcheck="true"># æˆ–è€…:http://xxx.com/xxx.jpg</span><span class="token key atrule">top</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment" spellcheck="true"># å¦‚æœtopå€¼ä¸ºtrueï¼Œåˆ™ä¼šæ˜¯é¦–é¡µæ¨èæ–‡ç« </span><span class="token comment" spellcheck="true"># å¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥åœ¨è®¾ç½®passwordçš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨SHA256åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´</span><span class="token key atrule">password</span><span class="token punctuation">:</span> 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92<span class="token comment" spellcheck="true"># æœ¬æ–‡ç« æ˜¯å¦å¼€å¯mathjaxï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„_config.ymlæ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ</span><span class="token key atrule">mathjax</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">categories</span><span class="token punctuation">:</span> Markdown<span class="token key atrule">tags</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> Typora  <span class="token punctuation">-</span> Markdown<span class="token punctuation">---</span></code></pre><blockquote><ol><li>å¦‚æœimgå±æ€§ä¸å¡«å†™çš„è¯ï¼Œæ–‡ç« ç‰¹è‰²å›¾ä¼šæ ¹æ®æ–‡ç« æ ‡é¢˜çš„hashcodeçš„å€¼å–ä½™ï¼Œç„¶åé€‰å–ä¸»é¢˜ä¸­å¯¹åº”çš„ç‰¹è‰²å›¾ç‰‡ï¼Œä»è€Œè¾¾åˆ°è®©æ‰€æœ‰æ–‡ç« éƒ½çš„ç‰¹è‰²å›¾å„æœ‰ç‰¹è‰²ã€‚</li><li>dateçš„å€¼å°½é‡ä¿è¯æ¯ç¯‡æ–‡ç« æ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºæœ¬ä¸»é¢˜ä¸­Gitalkå’ŒGitmentè¯†åˆ«idæ˜¯é€šè¿‡dateçš„å€¼æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„ã€‚</li><li>å¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„åŠŸèƒ½ï¼Œä¸ä»…è¦åœ¨Front-matterä¸­è®¾ç½®é‡‡ç”¨äº†SHA256åŠ å¯†çš„passwordçš„å€¼ï¼Œè¿˜éœ€è¦åœ¨ä¸»é¢˜çš„_config.ymlä¸­æ¿€æ´»äº†é…ç½®ã€‚æœ‰äº›åœ¨çº¿çš„ SHA256 åŠ å¯†çš„åœ°å€ï¼Œå¯ä¾›ä½ ä½¿ç”¨ï¼šå¼€æºä¸­å›½åœ¨çº¿å·¥å…·ã€chahuoã€ç«™é•¿å·¥å…·ã€‚</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> å°æŠ€å·§ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
