<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>docker å­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰</title>
      <link href="/2020/08/19/docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/"/>
      <url>/2020/08/19/docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B/</url>
      
        <content type="html"><![CDATA[<h1 id="docker-ç½‘ç»œ"><a href="#docker-ç½‘ç»œ" class="headerlink" title="docker ç½‘ç»œ"></a>docker ç½‘ç»œ</h1><blockquote><p>é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥é€šè¿‡ image æ¥åˆ›å»ºç›¸å…³çš„å®¹å™¨ï¼Œä¾‹å¦‚ï¼šåˆ›å»ºä¸€ä¸ª mysql å®¹å™¨ï¼Œnginx å®¹å™¨ã€php-fpm å®¹å™¨ã€‚ä½†æ˜¯æˆ‘ä»¬æƒ³è¦ä½¿ç”¨è¿™äº›å®¹å™¨ä½œä¸ºå¼€å‘æˆ–è€…ç”Ÿäº§çš„ç¯å¢ƒè¿˜ç¼ºå°‘å…³é”®çš„ä¸€æ­¥ï¼Œé‚£å°±æ˜¯å®¹å™¨é—´çš„é€šä¿¡ã€‚è¿™ä¸€é›†æˆ‘ä»¬æ¥å­¦ä¹ å®¹å™¨é—´çš„ç½‘ç»œé€šä¿¡</p></blockquote><h2 id="å®¹å™¨é—´ç½‘ç»œäº’è¿"><a href="#å®¹å™¨é—´ç½‘ç»œäº’è¿" class="headerlink" title="å®¹å™¨é—´ç½‘ç»œäº’è¿"></a>å®¹å™¨é—´ç½‘ç»œäº’è¿</h2><p>Docker é»˜è®¤æä¾›äº†ä¸‰ç§ç½‘ç»œæ¨¡å¼ã€åˆ†åˆ«æ˜¯bridgeã€hostã€noneã€‚å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹</p><pre class=" language-bash"><code class="language-bash">$ docker network <span class="token function">ls</span>NETWORK ID          NAME                DRIVER              SCOPEb7ad6ddfa6be        bridge              bridge              local8eceb8218986        host                host                local0cedda606a66        none                null                local</code></pre><h3 id="bridge-æ¡¥æ¥æ¨¡å¼"><a href="#bridge-æ¡¥æ¥æ¨¡å¼" class="headerlink" title="bridge æ¡¥æ¥æ¨¡å¼"></a>bridge æ¡¥æ¥æ¨¡å¼</h3><p>åŸç†ï¼šåœ¨ä¸»æœºä¸Šè™šæ‹Ÿå‡ºä¸€ä¸ªdocker0 çš„<a href="https://baike.baidu.com/item/%E7%BD%91%E6%A1%A5" target="_blank" rel="noopener">ç½‘æ¡¥</a>ï¼Œé»˜è®¤åˆ›å»ºçš„å®¹å™¨éƒ½ä¼šè™šæ‹Ÿå‡ºç½‘å¡å’Œè¿™ä¸ªç½‘æ¡¥è¿æ¥ï¼Œå®¹å™¨çš„ ip åœ°å€ä» 172.17.0.0/16 åœ°å€æ®µç”Ÿæˆã€‚</p><p><img src="http://static.xiangdangnian.net.cn/16828bdd2287ee1c.png" alt="ç½‘ç»œè¿æ¥ç¤ºæ„å›¾"></p><p><img src="http://static.xiangdangnian.net.cn/FyD8K1folZQ95m6XHPLwTkOzuVJWpaIn.png" alt="docker0"></p><blockquote><p>ç”±äºåœ¨ mac å’Œ windows ç³»ç»Ÿä¸Šï¼Œdocker çš„è¿è¡Œæ–¹å¼ä¸å¤ªä¸€æ ·ï¼ˆåœ¨winã€mac ä¸Šå®‰è£… dockerï¼Œå®é™…ä¸Šæ˜¯å®‰è£…äº†ä¸€ä¸ª docker è™šæ‹Ÿæœºï¼Œè€Œæˆ‘ä»¬åˆ›å»ºçš„å®¹å™¨éƒ½æ˜¯è·‘åœ¨ docker è™šæ‹Ÿæœºä¸­çš„ï¼‰ã€‚</p></blockquote><p>macç³»ç»Ÿä¸‹è¿›å…¥docker è™šæ‹Ÿæœº å‘½ä»¤</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">screen</span> ~/Library/Containers/com.docker.docker/Data/vms/0/tty</code></pre><p>docker ç‰ˆæœ¬å°äº18.06 åˆ™ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">screen</span> ~/Library/Containers/com.docker.docker/Data/com.docker.driver.amd64-linux/tty</code></pre><h4 id="æµ‹è¯•æ¡¥æ¥æ¨¡å¼-æç¤ºç¬¦ä¸ºä¸»æœºã€-æç¤ºç¬¦ä¸ºå®¹å™¨å†…"><a href="#æµ‹è¯•æ¡¥æ¥æ¨¡å¼-æç¤ºç¬¦ä¸ºä¸»æœºã€-æç¤ºç¬¦ä¸ºå®¹å™¨å†…" class="headerlink" title="æµ‹è¯•æ¡¥æ¥æ¨¡å¼($ æç¤ºç¬¦ä¸ºä¸»æœºã€# æç¤ºç¬¦ä¸ºå®¹å™¨å†…)"></a>æµ‹è¯•æ¡¥æ¥æ¨¡å¼($ æç¤ºç¬¦ä¸ºä¸»æœºã€# æç¤ºç¬¦ä¸ºå®¹å™¨å†…)</h4><p>ä½¿ç”¨ busybox é•œåƒè¿›è¡Œæµ‹è¯•ã€‚è¯¥é•œåƒéå¸¸å°å¹¶ä¸”å®‰è£…äº†pingã€ifconfigç­‰å®ç”¨å·¥å…·ï¼Œéå¸¸é€‚åˆæµ‹è¯•ã€‚</p><pre class=" language-bash"><code class="language-bash">$ docker run --name box1 -it --rm busybox sh// æµ‹è¯•ç½‘ç»œè¿é€š/<span class="token comment" spellcheck="true"># ping www.baidu.com  </span>PING www.baidu.com <span class="token punctuation">(</span>180.97.34.96<span class="token punctuation">)</span>: 56 data bytes64 bytes from 180.97.34.96: seq<span class="token operator">=</span>0 ttl<span class="token operator">=</span>45 time<span class="token operator">=</span>10.489 ms64 bytes from 180.97.34.96: seq<span class="token operator">=</span>1 ttl<span class="token operator">=</span>45 time<span class="token operator">=</span>10.512 ms64 bytes from 180.97.34.96: seq<span class="token operator">=</span>2 ttl<span class="token operator">=</span>45 time<span class="token operator">=</span>10.424 ms64 bytes from 180.97.34.96: seq<span class="token operator">=</span>3 ttl<span class="token operator">=</span>45 time<span class="token operator">=</span>10.409 ms^C--- www.baidu.com <span class="token function">ping</span> statistics ---4 packets transmitted, 4 packets received, 0% packet lossround-trip min/avg/max <span class="token operator">=</span> 10.409/10.458/10.512 ms// æŸ¥çœ‹ç½‘å¡ ip åœ°å€/<span class="token comment" spellcheck="true"># ifconfig</span>eth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:07          inet addr:172.17.0.7  Bcast:172.17.255.255  Mask:255.255.0.0          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1          RX packets:16 errors:0 dropped:0 overruns:0 frame:0          TX packets:8 errors:0 dropped:0 overruns:0 carrier:0          collisions:0 txqueuelen:0          RX bytes:1421 <span class="token punctuation">(</span>1.3 KiB<span class="token punctuation">)</span>  TX bytes:622 <span class="token punctuation">(</span>622.0 B<span class="token punctuation">)</span>// é€€å‡ºå®¹å™¨ã€‚ä½¿ç”¨ Ctrl+P+Q é€€å‡ºå®¹å™¨ä½†æ˜¯å®¹å™¨ä¸ä¼šå…³é—­// æŸ¥çœ‹ box1 å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯,åªæˆªå–äº†éƒ¨åˆ†å†…å®¹$ docker inspect box1<span class="token keyword">.</span><span class="token keyword">.</span><span class="token keyword">.</span><span class="token string">"Networks"</span><span class="token keyword">:</span> <span class="token punctuation">{</span>    <span class="token string">"bridge"</span>:<span class="token punctuation">{</span>        <span class="token string">"IPAMConfig"</span>:null,        <span class="token string">"Links"</span>:null,        <span class="token string">"Aliases"</span>:null,        <span class="token string">"NetworkID"</span><span class="token keyword">:</span><span class="token string">"b7ad6ddfa6beac6b0ebf87dcec3d7ee933478592f16d48b3c01b28cd6a48a7f9"</span>,        <span class="token string">"EndpointID"</span><span class="token keyword">:</span><span class="token string">"30eb2f7a0b5e4dbebe8a8f0522a01e105c65fe6a14d0a6ffe02120af009cff27"</span>,        <span class="token string">"Gateway"</span><span class="token keyword">:</span><span class="token string">"172.17.0.1"</span>,        <span class="token string">"IPAddress"</span><span class="token keyword">:</span><span class="token string">"172.17.0.7"</span>,        <span class="token string">"IPPrefixLen"</span>:16,        <span class="token string">"IPv6Gateway"</span><span class="token keyword">:</span><span class="token string">""</span>,        <span class="token string">"GlobalIPv6Address"</span><span class="token keyword">:</span><span class="token string">""</span>,        <span class="token string">"GlobalIPv6PrefixLen"</span>:0,        <span class="token string">"MacAddress"</span><span class="token keyword">:</span><span class="token string">"02:42:ac:11:00:07"</span>,        <span class="token string">"DriverOpts"</span>:null    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">.</span><span class="token keyword">.</span><span class="token keyword">.</span></code></pre><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚çš„çœ‹åˆ° box1 å®¹å™¨ä½¿ç”¨çš„æ˜¯ bridge æ¨¡å¼ï¼Œåˆ†é…çš„ ip åœ°å€ä¸º 172.17.0.7 å¹¶ä¸”å¯ä»¥è®¿é—®äº’è”ç½‘ã€‚</p><h3 id="Host-ä¸»æœºæ¨¡å¼-æç¤ºç¬¦ä¸ºä¸»æœºã€-æç¤ºç¬¦ä¸ºå®¹å™¨å†…"><a href="#Host-ä¸»æœºæ¨¡å¼-æç¤ºç¬¦ä¸ºä¸»æœºã€-æç¤ºç¬¦ä¸ºå®¹å™¨å†…" class="headerlink" title="Host ä¸»æœºæ¨¡å¼($ æç¤ºç¬¦ä¸ºä¸»æœºã€# æç¤ºç¬¦ä¸ºå®¹å™¨å†…)"></a>Host ä¸»æœºæ¨¡å¼($ æç¤ºç¬¦ä¸ºä¸»æœºã€# æç¤ºç¬¦ä¸ºå®¹å™¨å†…)</h3><p>åŸç†ï¼šå®¹å™¨ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„IPã€‚<br><img src="http://static.xiangdangnian.net.cn/16828bdd20dcb5be" alt="ç¤ºæ„å›¾"></p><pre class=" language-bash"><code class="language-bash">// åˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶åŠ å…¥ host ç½‘ç»œ$ docker run --name box2 -it --network host busybox// åœ¨å®¹å™¨ä¸­æŸ¥çœ‹ç½‘å¡ eth0<span class="token comment" spellcheck="true"># ifconfig eth0</span>eth0      Link encap:Ethernet  HWaddr FA:16:3E:F4:68:C0          inet addr:192.168.0.3  Bcast:192.168.0.255  Mask:255.255.255.0          inet6 addr: fe80::f816:3eff:fef4:68c0/64 Scope:Link          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1          RX packets:612175 errors:0 dropped:0 overruns:0 frame:0          TX packets:203387 errors:0 dropped:0 overruns:0 carrier:0          collisions:0 txqueuelen:1000          RX bytes:725999816 <span class="token punctuation">(</span>692.3 MiB<span class="token punctuation">)</span>  TX bytes:74349925 <span class="token punctuation">(</span>70.9 MiB<span class="token punctuation">)</span>// æµ‹è¯•ç½‘ç»œè¿é€š/<span class="token comment" spellcheck="true"># ping www.baidu.com  </span>PING www.baidu.com <span class="token punctuation">(</span>180.97.34.96<span class="token punctuation">)</span>: 56 data bytes64 bytes from 180.97.34.96: seq<span class="token operator">=</span>0 ttl<span class="token operator">=</span>45 time<span class="token operator">=</span>10.489 ms64 bytes from 180.97.34.96: seq<span class="token operator">=</span>1 ttl<span class="token operator">=</span>45 time<span class="token operator">=</span>10.512 ms64 bytes from 180.97.34.96: seq<span class="token operator">=</span>2 ttl<span class="token operator">=</span>45 time<span class="token operator">=</span>10.424 ms64 bytes from 180.97.34.96: seq<span class="token operator">=</span>3 ttl<span class="token operator">=</span>45 time<span class="token operator">=</span>10.409 ms// é€€å‡ºå®¹å™¨ã€‚ä½¿ç”¨ Ctrl+P+Q é€€å‡ºå®¹å™¨ä½†æ˜¯å®¹å™¨ä¸ä¼šå…³é—­//åœ¨å®¿ä¸»æœºä¸ŠæŸ¥çœ‹ç½‘å¡ eth0          $ <span class="token function">ifconfig</span> eth0eth0: flags<span class="token operator">=</span>4163<span class="token operator">&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">></span>  mtu 1500        inet 192.168.0.3  netmask 255.255.255.0  broadcast 192.168.0.255        inet6 fe80::f816:3eff:fef4:68c0  prefixlen 64  scopeid 0x20<span class="token operator">&lt;</span>link<span class="token operator">></span>        ether fa:16:3e:f4:68:c0  txqueuelen 1000  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>        RX packets 612230  bytes 726004260 <span class="token punctuation">(</span>726.0 MB<span class="token punctuation">)</span>        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 203435  bytes 74354859 <span class="token punctuation">(</span>74.3 MB<span class="token punctuation">)</span>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</code></pre><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚çš„çœ‹åˆ° box2 å®¹å™¨ä½¿ç”¨çš„æ˜¯ host æ¨¡å¼ï¼Œip åœ°å€å’Œå®¿ä¸»æœºä¸€è‡´ï¼Œä¹Ÿèƒ½è®¿é—®å¤–ç½‘ã€‚</p><h3 id="none-æ— ç½‘ç»œæ¨¡å¼"><a href="#none-æ— ç½‘ç»œæ¨¡å¼" class="headerlink" title="none æ— ç½‘ç»œæ¨¡å¼"></a>none æ— ç½‘ç»œæ¨¡å¼</h3><p>ä¸ç»™å®¹å™¨æä¾›ä»»ä½•ç½‘ç»œé…ç½®ï¼Œåªæœ‰lo ç½‘ç»œæ¥å£ã€‚éœ€è¦æˆ‘ä»¬è‡ªå·±ä¸ºDockerå®¹å™¨æ·»åŠ ç½‘å¡ã€é…ç½®IPç­‰ã€‚<br><img src="http://static.xiangdangnian.net.cn/16828bdd222d2bbb.png" alt="ç¤ºæ„å›¾"></p><pre class=" language-bash"><code class="language-bash">$ docker run --name box3 -it --network none --rm  busybox<span class="token comment" spellcheck="true"># ifconfig</span>lo        Link encap:Local Loopback          inet addr:127.0.0.1  Mask:255.0.0.0          UP LOOPBACK RUNNING  MTU:65536  Metric:1          RX packets:0 errors:0 dropped:0 overruns:0 frame:0          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0          collisions:0 txqueuelen:1000          RX bytes:0 <span class="token punctuation">(</span>0.0 B<span class="token punctuation">)</span>  TX bytes:0 <span class="token punctuation">(</span>0.0 B<span class="token punctuation">)</span>$ docker inspect box3<span class="token keyword">.</span><span class="token keyword">.</span><span class="token keyword">.</span><span class="token string">"Networks"</span>:<span class="token punctuation">{</span>    <span class="token string">"none"</span>:<span class="token punctuation">{</span>        <span class="token string">"IPAMConfig"</span>:null,        <span class="token string">"Links"</span>:null,        <span class="token string">"Aliases"</span>:null,        <span class="token string">"NetworkID"</span><span class="token keyword">:</span><span class="token string">"0cedda606a66614ba025ff7a992cb0d405fb567ff8da240310b96fa59f5fe99a"</span>,        <span class="token string">"EndpointID"</span><span class="token keyword">:</span><span class="token string">"e4fd85c2629d2524928f34fb428305bf4cf2d99195ff5ce7d428a9cff14902c0"</span>,        <span class="token string">"Gateway"</span><span class="token keyword">:</span><span class="token string">""</span>,        <span class="token string">"IPAddress"</span><span class="token keyword">:</span><span class="token string">""</span>,        <span class="token string">"IPPrefixLen"</span>:0,        <span class="token string">"IPv6Gateway"</span><span class="token keyword">:</span><span class="token string">""</span>,        <span class="token string">"GlobalIPv6Address"</span><span class="token keyword">:</span><span class="token string">""</span>,        <span class="token string">"GlobalIPv6PrefixLen"</span>:0,        <span class="token string">"MacAddress"</span><span class="token keyword">:</span><span class="token string">""</span>,        <span class="token string">"DriverOpts"</span>:null    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">.</span><span class="token keyword">.</span><span class="token keyword">.</span></code></pre><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚çš„çœ‹åˆ° box3 å®¹å™¨ä½¿ç”¨çš„æ˜¯ none æ¨¡å¼ï¼Œæ²¡æœ‰ç½‘å¡ï¼Œåªæœ‰ lo ç½‘ç»œæ¥å£ã€‚</p><h2 id="å¤–éƒ¨è®¿é—®å®¹å™¨"><a href="#å¤–éƒ¨è®¿é—®å®¹å™¨" class="headerlink" title="å¤–éƒ¨è®¿é—®å®¹å™¨"></a>å¤–éƒ¨è®¿é—®å®¹å™¨</h2><blockquote><p>å®¹å™¨ä¸­å¯ä»¥è¿è¡Œä¸€äº›ç½‘ç»œåº”ç”¨ï¼Œè¦è®©å¤–éƒ¨ä¹Ÿå¯ä»¥è®¿é—®è¿™äº›åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡ -P æˆ– -p å‚æ•°æ¥æŒ‡å®šç«¯å£æ˜ å°„ã€‚</p></blockquote><ol><li>å½“ä½¿ç”¨ -P(å¤§å†™) æ ‡è®°æ—¶ï¼ŒDocker ä¼šéšæœºæ˜ å°„ä¸€ä¸ª 49000~49900 çš„ç«¯å£åˆ°å†…éƒ¨å®¹å™¨å¼€æ”¾çš„ç½‘ç»œç«¯å£ã€‚</li><li>-p åˆ™å¯ä»¥æŒ‡å®šè¦æ˜ å°„çš„ç«¯å£ï¼Œå¹¶ä¸”ï¼Œåœ¨ä¸€ä¸ªæŒ‡å®šç«¯å£ä¸Šåªå¯ä»¥ç»‘å®šä¸€ä¸ªå®¹å™¨ã€‚æ”¯æŒçš„æ ¼å¼æœ‰ ip:hostPort:containerPort | ip::containerPort | hostPort:containerPortã€‚</li></ol><p>åˆ›å»ºä¸€ä¸ª nginx å®¹å™¨ï¼Œä½¿ç”¨ -P éšæœºäº§ç”Ÿä¸€ä¸ªç«¯å£å·</p><pre class=" language-bash"><code class="language-bash">$ docker run --name <span class="token function">test</span> -P -d  nginx769acc819c0dc26848b93c3e39040ba410385c8c7536a39c2a586896e120ae86$ docker container <span class="token function">ls</span>IMAGE       CONTAINER ID        STATUS         PORTS                  NAMESnginx       769acc819c0d        Up 4 minutes   0.0.0.0:32769-<span class="token operator">></span>80/tcp  <span class="token function">test</span></code></pre><p>æœ¬æœºè®¿é—®ç»“æœ<br><img src="http://static.xiangdangnian.net.cn/WX20200819-145535.png" alt="ç»“æœ"></p><p><strong>å…¶ä»–ç«¯å£æ˜ å°„é…ç½®å¯ä»¥æŸ¥çœ‹é“¾æ¥</strong> <a href="https://yeasy.gitbook.io/docker_practice/network/port_mapping" target="_blank" rel="noopener">https://yeasy.gitbook.io/docker_practice/network/port_mapping</a></p><h2 id="ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œå®ç°å®¹å™¨é—´çš„äº’è¿"><a href="#ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œå®ç°å®¹å™¨é—´çš„äº’è¿" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œå®ç°å®¹å™¨é—´çš„äº’è¿"></a>ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œå®ç°å®¹å™¨é—´çš„äº’è¿</h2><blockquote><p>åœ¨å®é™…åº”ç”¨ä¸­å„å®¹å™¨é—´çš„é€šä¿¡ä¸æ˜¯é€šè¿‡ ip åœ°å€ï¼Œè€Œæ˜¯é€šè¿‡å®¹å™¨åç§°æ¥è¿æ¥çš„ï¼Œé‚£ä¹ˆè¿™ç§äº‹å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿç»§ç»­å¾€ä¸‹çœ‹å§ã€‚</p></blockquote><h3 id="åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œ"><a href="#åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œ" class="headerlink" title="åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œ"></a>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œ</h3><pre class=" language-bash"><code class="language-bash">$ docker network create my-neta4806e9a4874118f1269992086dbe4137024b53603a4ac68cd6c0c548257b6b7 $ docker network <span class="token function">ls</span>NETWORK ID          NAME                DRIVER              SCOPEa4806e9a4874        my-net              bridge              local</code></pre><h3 id="åˆ›å»º-2-ä¸ªå®¹å™¨å°†å…¶åŠ å…¥è‡ªå®šä¹‰ç½‘ç»œ"><a href="#åˆ›å»º-2-ä¸ªå®¹å™¨å°†å…¶åŠ å…¥è‡ªå®šä¹‰ç½‘ç»œ" class="headerlink" title="åˆ›å»º 2 ä¸ªå®¹å™¨å°†å…¶åŠ å…¥è‡ªå®šä¹‰ç½‘ç»œ"></a>åˆ›å»º 2 ä¸ªå®¹å™¨å°†å…¶åŠ å…¥è‡ªå®šä¹‰ç½‘ç»œ</h3><pre class=" language-bash"><code class="language-bash">$ docker run --name box1 -it --rm  --network my-net busybox sh<span class="token comment" spellcheck="true"># //é€€å‡ºå®¹å™¨ã€‚ä½¿ç”¨ Ctrl+P+Q é€€å‡ºå®¹å™¨ä½†æ˜¯å®¹å™¨ä¸ä¼šå…³é—­</span>$ docker run --name box2 -it --rm  --network my-net busybox sh<span class="token comment" spellcheck="true"># //é€€å‡ºå®¹å™¨ã€‚ä½¿ç”¨ Ctrl+P+Q é€€å‡ºå®¹å™¨ä½†æ˜¯å®¹å™¨ä¸ä¼šå…³é—­</span>$ docker container <span class="token function">ls</span> --format <span class="token string">"table {{.Image}}\t{{.ID}}\t{{.Status}}\t{{.Names}}"</span> --allIMAGE                   CONTAINER ID        STATUS                      NAMESbusybox                 5e6a4861f857        Up About a minute           box2busybox                 1d7fa8762b4d        Up 2 minutes                box1</code></pre><h3 id="é€šè¿‡å®¹å™¨åç§°è¿›è¡Œé€šä¿¡"><a href="#é€šè¿‡å®¹å™¨åç§°è¿›è¡Œé€šä¿¡" class="headerlink" title="é€šè¿‡å®¹å™¨åç§°è¿›è¡Œé€šä¿¡"></a>é€šè¿‡å®¹å™¨åç§°è¿›è¡Œé€šä¿¡</h3><pre class=" language-bash"><code class="language-bash">// è¿›å…¥ box2 å®¹å™¨è¿›è¡Œ <span class="token function">ping</span> æµ‹è¯•è¿é€š$ docker <span class="token function">exec</span> -it box2 sh<span class="token comment" spellcheck="true"># ping box1</span>PING box1 <span class="token punctuation">(</span>172.19.0.2<span class="token punctuation">)</span>: 56 data bytes64 bytes from 172.19.0.2: seq<span class="token operator">=</span>0 ttl<span class="token operator">=</span>64 time<span class="token operator">=</span>0.049 ms64 bytes from 172.19.0.2: seq<span class="token operator">=</span>1 ttl<span class="token operator">=</span>64 time<span class="token operator">=</span>0.063 ms64 bytes from 172.19.0.2: seq<span class="token operator">=</span>2 ttl<span class="token operator">=</span>64 time<span class="token operator">=</span>0.057 ms64 bytes from 172.19.0.2: seq<span class="token operator">=</span>3 ttl<span class="token operator">=</span>64 time<span class="token operator">=</span>0.061 ms^C<span class="token comment" spellcheck="true">#</span></code></pre><p>å¥½äº†ï¼Œä»Šå¤©çš„ç½‘ç»œç›¸å…³å†…å®¹å°±åˆ°è¿™é‡Œå•¦ï¼Œä¸‹é›†è§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰</title>
      <link href="/2020/08/17/docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%89/"/>
      <url>/2020/08/17/docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<h2 id="docker-å®¹å™¨"><a href="#docker-å®¹å™¨" class="headerlink" title="docker å®¹å™¨"></a>docker å®¹å™¨</h2><p>å®¹å™¨æ˜¯é€šè¿‡ image åˆ›å»ºçš„è¿›ç¨‹ã€‚</p><blockquote><p>é•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ ç±» å’Œ å®ä¾‹ ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</p></blockquote><h3 id="æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨"><a href="#æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨" class="headerlink" title="æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨"></a>æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨</h3><p>ä¸‹é¢çš„å‘½ä»¤çš„å«ä¹‰ï¼šé€šè¿‡ Ubuntu:18.04 è¿™ä¸ª image åˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶è¿è¡Œ /bin/echo â€˜Hello worldâ€™ï¼Œå®Œæˆååœæ­¢è¯¥å®¹å™¨ã€‚</p><pre class=" language-bash"><code class="language-bash">$ docker run ubuntu:18.04 /bin/echo <span class="token string">'Hello world'</span>Hello world</code></pre><p>ä½¿ç”¨ docker run å‘½ä»¤ï¼Œåå°å®é™…ä¸Šæ‰§è¡Œçš„å†…å®¹ä¸ºï¼š</p><ol><li>æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨å°±ä»å…¬æœ‰ä»“åº“ä¸‹è½½</li><li>åˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨</li><li>åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½ä¸€å±‚å¯è¯»å†™å±‚ï¼ˆåé¢ä¼šå­¦ï¼‰</li><li>ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­å»ï¼ˆåé¢ä¼šå­¦ï¼‰</li><li>ä»åœ°å€æ± é…ç½®ä¸€ä¸ª ip åœ°å€ç»™å®¹å™¨ï¼ˆåé¢ä¼šå­¦ï¼‰</li><li>æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åº</li><li>æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«ç»ˆæ­¢</li></ol><p>ä¸Šé¢çš„ç¤ºä¾‹æ‰§è¡Œå®Œä»¥åä¼šç»ˆæ­¢ï¼Œä½†æ˜¯ä¸€èˆ¬æˆ‘ä»¬åœ¨ä½¿ç”¨ä¸€ä¸ªæä¾›æœåŠ¡çš„å®¹å™¨çš„æ—¶å€™ï¼Œä¸æƒ³è®©å®ƒåœæ­¢ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ -d å‚æ•°ï¼Œä½¿å®¹å™¨ä¿æŒåœ¨åå°è¿è¡Œã€‚ä½†æ˜¯éœ€è¦æ³¨æ„â€”â€”<strong>å®¹å™¨æ˜¯å¦ä¼šé•¿ä¹…è¿è¡Œï¼Œæ˜¯å’Œ docker run æŒ‡å®šçš„å‘½ä»¤æœ‰å…³ï¼Œå’Œ -d å‚æ•°æ— å…³</strong></p><p>å¦‚ä¸‹å‘½ä»¤æ‰§è¡Œå®Œåï¼Œå®¹å™¨ä¾ç„¶ä¼šåœæ­¢</p><pre class=" language-bash"><code class="language-bash">$ docker run -d ubuntu</code></pre><p><img src="http://static.xiangdangnian.net.cn/XF6zB8vbNWw9uPLGrSkiIt3YdZaHc0K7.png" alt="å·²åœæ­¢"></p><p>è€Œå¦‚ä¸‹å‘½ä»¤æ‰§è¡Œå®Œåï¼Œå®¹å™¨åˆ™åœ¨åå°ä¿æŒè¿è¡Œ</p><pre class=" language-bash"><code class="language-bash">$ docker run -d ubuntu /bin/sh -c <span class="token string">"while true; do echo hello world; sleep 1; done"</span></code></pre><p><img src="http://static.xiangdangnian.net.cn/VcoLwKIYlG65etAO1bCWNfHUES9FpBza.png" alt="è¿è¡Œä¸­"></p><h3 id="è¿›å…¥å®¹å™¨"><a href="#è¿›å…¥å®¹å™¨" class="headerlink" title="è¿›å…¥å®¹å™¨"></a>è¿›å…¥å®¹å™¨</h3><h4 id="attach-å‘½ä»¤"><a href="#attach-å‘½ä»¤" class="headerlink" title="attach å‘½ä»¤"></a>attach å‘½ä»¤</h4><pre class=" language-bash"><code class="language-bash">$ docker run -dit ubuntuffff9516c6151ef3b436df1bccc70ba9da2d0f57bbec5afe19353fe481e12702$ docker container <span class="token function">ls</span>CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS              PORTS                                      NAMESffff9516c615        ubuntu                  <span class="token string">"/bin/bash"</span>              7 seconds ago       Up 6 seconds                                                   elegant_hypatia$ docker attach ffff9516c615root@ffff9516c615:/<span class="token comment" spellcheck="true">#</span></code></pre><p><strong>æ³¨æ„ï¼š å¦‚æœä»è¿™ä¸ª stdin ä¸­ exitï¼Œä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚</strong></p><h4 id="exec-å‘½ä»¤-æ¨èä½¿ç”¨ï¼Œä¸€èˆ¬é…åˆ-it-å‚æ•°"><a href="#exec-å‘½ä»¤-æ¨èä½¿ç”¨ï¼Œä¸€èˆ¬é…åˆ-it-å‚æ•°" class="headerlink" title="exec å‘½ä»¤(æ¨èä½¿ç”¨ï¼Œä¸€èˆ¬é…åˆ -it å‚æ•°)"></a>exec å‘½ä»¤(æ¨èä½¿ç”¨ï¼Œä¸€èˆ¬é…åˆ -it å‚æ•°)</h4><pre class=" language-bash"><code class="language-bash">$ docker run -dit ubuntu15fc4d97c1b4ea25d76e568fb4e695d5b48d7f13ebbb6d718a80b86a4764a005// åªç”¨ -i å‚æ•°æ—¶ï¼Œç”±äºæ²¡æœ‰åˆ†é…ä¼ªç»ˆç«¯ï¼Œç•Œé¢æ²¡æœ‰æˆ‘ä»¬ç†Ÿæ‚‰çš„ Linux å‘½ä»¤æç¤ºç¬¦ï¼Œä½†å‘½ä»¤æ‰§è¡Œç»“æœä»ç„¶å¯ä»¥è¿”å›ã€‚$ docker <span class="token function">exec</span> -i 15fc4d97c1b4ea25 <span class="token function">bash</span><span class="token function">ls</span>binbootdevetc<span class="token punctuation">..</span>.//å½“ -i -t å‚æ•°ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œåˆ™å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„ Linux å‘½ä»¤æç¤ºç¬¦ã€‚$ docker <span class="token function">exec</span> -it 15fc4d97c1b4ea25 <span class="token function">bash</span>root@15fc4d97c1b4:/<span class="token comment" spellcheck="true">#</span></code></pre><p><strong>æ³¨æ„ï¼šå¦‚æœä»è¿™ä¸ª stdin ä¸­ exitï¼Œä¸ä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚</strong></p><h4 id="å®¹å™¨å¸¸ç”¨å‘½ä»¤"><a href="#å®¹å™¨å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å®¹å™¨å¸¸ç”¨å‘½ä»¤"></a>å®¹å™¨å¸¸ç”¨å‘½ä»¤</h4><ol><li>docker container ls â€“all        <strong>æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­çš„æ‰€æœ‰ï¼ˆè¿è¡Œä¸­ã€å·²åœæ­¢çš„ï¼‰å®¹å™¨</strong> </li><li>docker container start XXX       <strong>æŠŠå·²ç»åœæ­¢çš„ XXX å®¹å™¨å¯åŠ¨</strong></li><li>docker container stop XXX        <strong>æŠŠè¿è¡Œæ€»çš„ XXX å®¹å™¨åœæ­¢</strong> </li><li>docker container restart XXX     <strong>é‡æ–°å¯åŠ¨è¿è¡Œä¸­çš„ XXX å®¹å™¨</strong></li><li>docker container prune           <strong>åˆ é™¤æ‰€æœ‰å¤„äºåœæ­¢çŠ¶æ€çš„å®¹å™¨</strong></li></ol>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</title>
      <link href="/2020/08/10/docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%8C/"/>
      <url>/2020/08/10/docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="é•œåƒ-Image"><a href="#é•œåƒ-Image" class="headerlink" title="é•œåƒ Image"></a>é•œåƒ Image</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><blockquote><p>Docker é•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚</p></blockquote><p>ä¸Šé¢æ˜¯æ¯”è¾ƒå®˜æ–¹çš„è§£é‡Šï¼Œä¼°è®¡å¤§éƒ¨åˆ†ä¹Ÿæ²¡çœ‹å¤ªæ‡‚ï¼Œé‚£ä¹ˆæˆ‘å°±ç”¨æˆ‘è‡ªå·±ç†è§£çš„æ–¹å¼è¯´ä¸€ä¸‹å§ã€‚</p><p>image ç±»ä¼¼äºæˆ‘ä»¬å®‰è£…ç³»ç»Ÿçš„é•œåƒæ–‡ä»¶ï¼Œé€šè¿‡ image æ–‡ä»¶æˆ‘ä»¬å¯ä»¥ç”Ÿæˆå®¹å™¨æ–‡ä»¶ã€‚ä¸€èˆ¬é•œåƒæ–‡ä»¶æ˜¯åˆ†å±‚å­˜å‚¨çš„ï¼Œä½¿ç”¨äº†Union Fs çš„æŠ€æœ¯ï¼ˆå…·ä½“æ˜¯ä¸ªå•¥æˆ‘ä¹Ÿä¸å¤ªæ‡‚ğŸ¤¦â€â™‚ï¸ï¼‰ï¼Œä¹Ÿå°±è¯´ä¸€ä¸ªé•œåƒæ–‡ä»¶æ˜¯å¾ˆå¤šå—ç»„æˆçš„ï¼Œæœ‰ç‚¹ç±»ä¼¼äºç°åœ¨å‰ç«¯çš„ç»„ä»¶åŒ–å¼€å‘ï¼Œæ˜¯ä¸€ç»„æ–‡ä»¶ç»„æˆçš„ã€‚é•œåƒå¯ä»¥å‘é¢å‘å¯¹è±¡çš„ç±»ä¸€æ ·å¯ä»¥è¿›è¡Œç»§æ‰¿ï¼Œé€šè¿‡ä¸€äº›åŸºç¡€é•œåƒæ¥æ„å»ºå±äºæˆ‘ä»¬è‡ªå·±çš„é•œåƒã€‚</p><p>ä¸Šé¢è¯´äº†ä¸€å¤§å †å¥½åƒè¿˜ä¸æ˜¯å¾ˆæ˜ç™½çš„æ ·å­ï¼Œä¸‹é¢è¿˜æ˜¯ç”¨ä¾‹å­æ¥è¯´æ˜å§ã€‚go go go~~~</p><h2 id="è·å–é•œåƒ"><a href="#è·å–é•œåƒ" class="headerlink" title="è·å–é•œåƒ"></a>è·å–é•œåƒ</h2><blockquote><p>é€šè¿‡ docker pull å‘½ä»¤ä» Docker Hub ä»“åº“è·å–é•œåƒã€‚</p></blockquote><pre class=" language-bash"><code class="language-bash">docker pull <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> <span class="token punctuation">[</span>Docker Registry åœ°å€<span class="token punctuation">[</span>:ç«¯å£å·<span class="token punctuation">]</span>/<span class="token punctuation">]</span>ä»“åº“å<span class="token punctuation">[</span>:æ ‡ç­¾<span class="token punctuation">]</span></code></pre><p>å…·ä½“çš„é€‰é¡¹å¯ä»¥é€šè¿‡ docker pull â€“help æŸ¥çœ‹</p><ol><li>åœ°å€çš„æ ¼å¼ä¸€èˆ¬æ˜¯ &lt;åŸŸå/IP&gt;[:ç«¯å£å·] é»˜è®¤åœ°å€æ˜¯ Docker Hub, å¯ä»¥çœç•¥</li><li>ä»“åº“åï¼šè¿™é‡Œçš„ä»“åº“åæ˜¯ä¸¤æ®µå¼åç§°ï¼Œå³ &lt;ç”¨æˆ·å&gt;/&lt;è½¯ä»¶å&gt;ã€‚å¯¹äº Docker Hubï¼Œå¦‚æœä¸ç»™å‡ºç”¨æˆ·åï¼Œåˆ™é»˜è®¤ä¸º libraryï¼Œä¹Ÿå°±æ˜¯å®˜æ–¹é•œåƒã€‚</li><li>æ ‡ç­¾ï¼š ä¸€èˆ¬ä¸ºç‰ˆæœ¬å·</li></ol><p><strong>è¿™é‡Œç©¿æ’ä¸€ä¸ªé•œåƒæ€¥é€Ÿçš„å†…å®¹</strong><br>ç”±äºå›½å†…ç½‘ç»œçš„é—®é¢˜æˆ‘ä»¬éœ€è¦å¯¹æ‹‰å–é•œåƒçš„åœ°å€é•œåƒæ›´æ”¹ï¼Œä½¿ç”¨å›½å†…çš„é•œåƒåœ°å€æ¥åŠ å¿«æ‹‰å–é€Ÿåº¦ã€‚</p><h3 id="linux-ç³»ç»Ÿï¼ˆå·²æµ‹è¯•ï¼‰"><a href="#linux-ç³»ç»Ÿï¼ˆå·²æµ‹è¯•ï¼‰" class="headerlink" title="linux ç³»ç»Ÿï¼ˆå·²æµ‹è¯•ï¼‰"></a>linux ç³»ç»Ÿï¼ˆå·²æµ‹è¯•ï¼‰</h3><p>åœ¨ /etc/docker/daemon.json ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨è¯·æ–°å»ºè¯¥æ–‡ä»¶ï¼‰</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"registry-mirrors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"https://hub-mirror.c.163.com"</span><span class="token punctuation">,</span>    <span class="token string">"https://mirror.baidubce.com"</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><p>é‡å¯æœåŠ¡</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> systemctl daemon-reload$ <span class="token function">sudo</span> systemctl restart docker</code></pre><h3 id="Windows-10ï¼ˆæœªæµ‹è¯•ï¼‰"><a href="#Windows-10ï¼ˆæœªæµ‹è¯•ï¼‰" class="headerlink" title="Windows 10ï¼ˆæœªæµ‹è¯•ï¼‰"></a>Windows 10ï¼ˆæœªæµ‹è¯•ï¼‰</h3><p>åœ¨ä»»åŠ¡æ æ‰˜ç›˜ Docker å›¾æ ‡å†…å³é”®èœå•é€‰æ‹© Settingsï¼Œæ‰“å¼€é…ç½®çª—å£ååœ¨å·¦ä¾§å¯¼èˆªèœå•é€‰æ‹© Docker Engineï¼Œåœ¨å³ä¾§åƒä¸‹è¾¹ä¸€æ ·ç¼–è¾‘ json æ–‡ä»¶ï¼Œä¹‹åç‚¹å‡» Apply &amp; Restart ä¿å­˜å Docker å°±ä¼šé‡å¯å¹¶åº”ç”¨é…ç½®çš„é•œåƒåœ°å€äº†ã€‚</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"registry-mirrors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"https://hub-mirror.c.163.com"</span><span class="token punctuation">,</span>    <span class="token string">"https://mirror.baidubce.com"</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><h3 id="macOSã€‚ï¼ˆå·²æµ‹è¯•ï¼‰"><a href="#macOSã€‚ï¼ˆå·²æµ‹è¯•ï¼‰" class="headerlink" title="macOSã€‚ï¼ˆå·²æµ‹è¯•ï¼‰"></a>macOSã€‚ï¼ˆå·²æµ‹è¯•ï¼‰</h3><p>åœ¨ä»»åŠ¡æ ç‚¹å‡» Docker Desktop åº”ç”¨å›¾æ ‡ -&gt; Perferencesï¼Œåœ¨å·¦ä¾§å¯¼èˆªèœå•é€‰æ‹© Docker Engineï¼Œåœ¨å³ä¾§åƒä¸‹è¾¹ä¸€æ ·ç¼–è¾‘ json æ–‡ä»¶ã€‚ä¿®æ”¹å®Œæˆä¹‹åï¼Œç‚¹å‡» Apply &amp; Restart æŒ‰é’®ï¼ŒDocker å°±ä¼šé‡å¯å¹¶åº”ç”¨é…ç½®çš„é•œåƒåœ°å€äº†ã€‚</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"registry-mirrors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"https://hub-mirror.c.163.com"</span><span class="token punctuation">,</span>    <span class="token string">"https://mirror.baidubce.com"</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><p>æ‰§è¡Œ <strong>$ docker info</strong>å¦‚æœä»ç»“æœä¸­çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">..</span>.Registry Mirrors: https://hub-mirror.c.163.com/<span class="token punctuation">..</span>.</code></pre><h2 id="ç»§ç»­é•œåƒçš„æ‹‰å–"><a href="#ç»§ç»­é•œåƒçš„æ‹‰å–" class="headerlink" title="ç»§ç»­é•œåƒçš„æ‹‰å–"></a>ç»§ç»­é•œåƒçš„æ‹‰å–</h2><p>ä½¿ç”¨ docker pull æ‹‰å–Ubuntu é•œåƒ</p><pre class=" language-bash"><code class="language-bash">$ docker pull ubuntu:18.0418.04: Pulling from library/ubuntu7595c8c21622: Pull completed13af8ca898f: Pull complete70799171ddba: Pull completeb6c12202c5ef: Pull completeDigest: sha256:a61728f6128fb4a7a20efaa7597607ed6e69973ee9b9123e3b4fd28b7bba100bStatus: Downloaded newer image <span class="token keyword">for</span> ubuntu:18.04docker.io/library/ubuntu:18.04</code></pre><p>ä¸Šé¢çš„å‘½ä»¤ä¸­æ²¡æœ‰ç»™å‡º Docker é•œåƒä»“åº“åœ°å€ï¼Œå› æ­¤å°†ä¼šä» Docker Hub è·å–é•œåƒã€‚è€Œé•œåƒåç§°æ˜¯ ubuntu:18.04ï¼Œå› æ­¤å°†ä¼šè·å–å®˜æ–¹é•œåƒ library/ubuntu ä»“åº“ä¸­æ ‡ç­¾ä¸º 18.04 çš„é•œåƒã€‚</p><p>ä»ä¸‹è½½è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¹‹å‰æåŠçš„åˆ†å±‚å­˜å‚¨çš„æ¦‚å¿µï¼Œé•œåƒæ˜¯ç”±å¤šå±‚å­˜å‚¨æ‰€æ„æˆã€‚ä¸‹è½½ä¹Ÿæ˜¯ä¸€å±‚å±‚çš„å»ä¸‹è½½ï¼Œå¹¶éå•ä¸€æ–‡ä»¶ã€‚</p><h2 id="ä»¥é•œåƒä¸ºåŸºç¡€å¯åŠ¨å®¹å™¨"><a href="#ä»¥é•œåƒä¸ºåŸºç¡€å¯åŠ¨å®¹å™¨" class="headerlink" title="ä»¥é•œåƒä¸ºåŸºç¡€å¯åŠ¨å®¹å™¨"></a>ä»¥é•œåƒä¸ºåŸºç¡€å¯åŠ¨å®¹å™¨</h2><pre class=" language-bash"><code class="language-bash">$ docker run -i -t --rm ubuntu:18.04 <span class="token function">bash</span>root@94053f3fa153:/<span class="token comment" spellcheck="true"># cat /etc/os-release</span>NAME<span class="token operator">=</span><span class="token string">"Ubuntu"</span>VERSION<span class="token operator">=</span><span class="token string">"18.04.4 LTS (Bionic Beaver)"</span>ID<span class="token operator">=</span>ubuntuID_LIKE<span class="token operator">=</span>debianPRETTY_NAME<span class="token operator">=</span><span class="token string">"Ubuntu 18.04.4 LTS"</span>VERSION_ID<span class="token operator">=</span><span class="token string">"18.04"</span>HOME_URL<span class="token operator">=</span><span class="token string">"https://www.ubuntu.com/"</span>SUPPORT_URL<span class="token operator">=</span><span class="token string">"https://help.ubuntu.com/"</span>BUG_REPORT_URL<span class="token operator">=</span><span class="token string">"https://bugs.launchpad.net/ubuntu/"</span>PRIVACY_POLICY_URL<span class="token operator">=</span><span class="token string">"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"</span>VERSION_CODENAME<span class="token operator">=</span>bionicUBUNTU_CODENAME<span class="token operator">=</span>bionicroot@94053f3fa153:/<span class="token comment" spellcheck="true">#</span></code></pre><p>docker run å°±æ˜¯è¿è¡Œå®¹å™¨çš„å‘½ä»¤ï¼Œå…·ä½“æ ¼å¼åœ¨åé¢å®¹å™¨ç›¸å…³ç« èŠ‚è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚è¿™é‡Œç®€å•è§£é‡Šä¸€ä¸‹</p><ul><li>-i äº¤äº’å¼æ“ä½œï¼Œè®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€ã€‚</li><li>-t é€‰é¡¹è®© Docker åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼ˆpseudo-ttyï¼‰å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Šã€‚</li><li>â€“rm å®¹å™¨é€€å‡ºåéšä¹‹å°†å…¶åˆ é™¤ã€‚ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºäº†æ’éšœéœ€æ±‚ï¼Œé€€å‡ºçš„å®¹å™¨å¹¶ä¸ä¼šç«‹å³åˆ é™¤ï¼Œé™¤éæ‰‹åŠ¨ docker rmã€‚æˆ‘ä»¬è¿™é‡Œåªæ˜¯éšä¾¿æ‰§è¡Œä¸ªå‘½ä»¤ï¼Œçœ‹çœ‹ç»“æœï¼Œä¸éœ€è¦æ’éšœå’Œä¿ç•™ç»“æœï¼Œå› æ­¤ä½¿ç”¨ â€“rm å¯ä»¥é¿å…æµªè´¹ç©ºé—´ã€‚ï¼‰</li><li>ubuntuï¼š18.04  ä½¿ç”¨ ubuntu:18.04 é•œåƒä¸ºåŸºç¡€æ¥å¯åŠ¨å®¹å™¨ã€‚</li><li>bash æ”¾åœ¨é•œåƒååçš„æ˜¯ å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ bashã€‚</li></ul><p>è¿›å…¥å®¹å™¨åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Shell ä¸‹æ“ä½œï¼Œæ‰§è¡Œä»»ä½•æ‰€éœ€çš„å‘½ä»¤ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æ‰§è¡Œäº† cat /etc/os-releaseï¼Œè¿™æ˜¯ Linux å¸¸ç”¨çš„æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬çš„å‘½ä»¤ï¼Œä»è¿”å›çš„ç»“æœå¯ä»¥çœ‹åˆ°å®¹å™¨å†…æ˜¯ Ubuntu 18.04.1 LTS ç³»ç»Ÿã€‚</p><p>æœ€åæˆ‘ä»¬é€šè¿‡ exit é€€å‡ºäº†è¿™ä¸ªå®¹å™¨ã€‚</p><h2 id="åˆ—å‡ºé•œåƒ"><a href="#åˆ—å‡ºé•œåƒ" class="headerlink" title="åˆ—å‡ºé•œåƒ"></a>åˆ—å‡ºé•œåƒ</h2><p>ä½¿ç”¨ docker image ls åˆ—å‡ºå·²ç»ä¸‹è½½äº†çš„é•œåƒæ–‡ä»¶</p><pre class=" language-bash"><code class="language-bash">$ docker image <span class="token function">ls</span>REPOSITORY           TAG                 IMAGE ID            CREATED             SIZEredis                latest              5f515359c7f8        5 days ago          183 MBnginx                latest              05a60462f8ba        5 days ago          181 MBmongo                3.2                 fe9198c04d62        5 days ago          342 MB<span class="token operator">&lt;</span>none<span class="token operator">></span>               <span class="token operator">&lt;</span>none<span class="token operator">></span>              00285df0df87        5 days ago          342 MBubuntu               18.04               f753707788c5        4 weeks ago         127 MBubuntu               latest              f753707788c5        4 weeks ago         127 MB</code></pre><p>åˆ—è¡¨åŒ…å«äº† ä»“åº“åã€æ ‡ç­¾ã€é•œåƒ IDã€åˆ›å»ºæ—¶é—´ ä»¥åŠ æ‰€å ç”¨çš„ç©ºé—´ã€‚</p><ul><li><p>é•œåƒ ID åˆ™æ˜¯é•œåƒçš„å”¯ä¸€æ ‡è¯†ï¼Œå› ä¸ºä¸€ä¸ªé•œåƒå¯ä»¥å¯¹åº”å¤šä¸ªæ ‡ç­¾ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° ubuntu:18.04 å’Œ ubuntu:latest æ‹¥æœ‰ç›¸åŒçš„ IDï¼Œå› ä¸ºå®ƒä»¬å¯¹åº”çš„æ˜¯åŒä¸€ä¸ªé•œåƒã€‚</p></li><li><p>é•œåƒçš„ä½“ç§¯è·Ÿ Docker Hub ä¸Šçš„ä¸ä¸€è‡´æ˜¯å› ä¸º Docker Hub ä¸­æ˜¾ç¤ºçš„ä½“ç§¯æ˜¯å‹ç¼©åçš„ä½“ç§¯ã€‚è€Œ docker image ls æ˜¾ç¤ºçš„æ˜¯é•œåƒä¸‹è½½åˆ°æœ¬åœ°åï¼Œå±•å¼€çš„å¤§å°ï¼Œå‡†ç¡®è¯´ï¼Œæ˜¯å±•å¼€åçš„å„å±‚æ‰€å ç©ºé—´çš„æ€»å’Œã€‚</p></li><li><p>å¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼Œdocker image ls åˆ—è¡¨ä¸­çš„é•œåƒä½“ç§¯æ€»å’Œå¹¶éæ˜¯æ‰€æœ‰é•œåƒå®é™…ç¡¬ç›˜æ¶ˆè€—ã€‚ç”±äº Docker é•œåƒæ˜¯å¤šå±‚å­˜å‚¨ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥ç»§æ‰¿ã€å¤ç”¨ï¼Œå› æ­¤ä¸åŒé•œåƒå¯èƒ½ä¼šå› ä¸ºä½¿ç”¨ç›¸åŒçš„åŸºç¡€é•œåƒï¼Œä»è€Œæ‹¥æœ‰å…±åŒçš„å±‚ã€‚ç”±äº Docker ä½¿ç”¨ Union FSï¼Œç›¸åŒçš„å±‚åªéœ€è¦ä¿å­˜ä¸€ä»½å³å¯ï¼Œå› æ­¤å®é™…é•œåƒç¡¬ç›˜å ç”¨ç©ºé—´å¾ˆå¯èƒ½è¦æ¯”è¿™ä¸ªåˆ—è¡¨é•œåƒå¤§å°çš„æ€»å’Œè¦å°çš„å¤šã€‚</p></li></ul><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹é•œåƒã€å®¹å™¨ã€æ•°æ®å·æ‰€å ç”¨çš„ç©ºé—´ã€‚</p><pre class=" language-bash"><code class="language-bash">$ docker system <span class="token function">df</span>TYPE                TOTAL               ACTIVE              SIZE                RECLAIMABLEImages              24                  0                   1.992GB             1.992GB <span class="token punctuation">(</span>100%<span class="token punctuation">)</span>Containers          1                   0                   62.82MB             62.82MB <span class="token punctuation">(</span>100%<span class="token punctuation">)</span>Local Volumes       9                   0                   652.2MB             652.2MB <span class="token punctuation">(</span>100%<span class="token punctuation">)</span>Build Cache                                                 0B                  0B</code></pre><h3 id="è™šæ‚¬é•œåƒ"><a href="#è™šæ‚¬é•œåƒ" class="headerlink" title="è™šæ‚¬é•œåƒ"></a>è™šæ‚¬é•œåƒ</h3><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>none<span class="token operator">></span>               <span class="token operator">&lt;</span>none<span class="token operator">></span>              00285df0df87        5 days ago          342 MB</code></pre><p>æ—¢æ²¡æœ‰ä»“åº“åï¼Œä¹Ÿæ²¡æœ‰æ ‡ç­¾,æ˜¾ç¤ºä¸º none çš„å°±æ˜¯è™šæ‚¬é•œåƒ</p><p>ä¸ªé•œåƒåŸæœ¬æ˜¯æœ‰é•œåƒåå’Œæ ‡ç­¾çš„ï¼ŒåŸæ¥ä¸º mongo:3.2ï¼Œéšç€å®˜æ–¹é•œåƒç»´æŠ¤ï¼Œå‘å¸ƒäº†æ–°ç‰ˆæœ¬åï¼Œé‡æ–° docker pull mongo:3.2 æ—¶ï¼Œmongo:3.2 è¿™ä¸ªé•œåƒåè¢«è½¬ç§»åˆ°äº†æ–°ä¸‹è½½çš„é•œåƒèº«ä¸Šï¼Œè€Œæ—§çš„é•œåƒä¸Šçš„è¿™ä¸ªåç§°åˆ™è¢«å–æ¶ˆï¼Œä»è€Œæˆä¸ºäº† <none>ã€‚é™¤äº† docker pull å¯èƒ½å¯¼è‡´è¿™ç§æƒ…å†µï¼Œdocker build ä¹ŸåŒæ ·å¯ä»¥å¯¼è‡´è¿™ç§ç°è±¡ã€‚ç”±äºæ–°æ—§é•œåƒåŒåï¼Œæ—§é•œåƒåç§°è¢«å–æ¶ˆï¼Œä»è€Œå‡ºç°ä»“åº“åã€æ ‡ç­¾å‡ä¸º <none> çš„é•œåƒã€‚è¿™ç±»æ— æ ‡ç­¾é•œåƒä¹Ÿè¢«ç§°ä¸º è™šæ‚¬é•œåƒ(dangling image) ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ä¸“é—¨æ˜¾ç¤ºè¿™ç±»é•œåƒï¼š</none></none></p><pre class=" language-bash"><code class="language-bash">$ docker image <span class="token function">ls</span> -f dangling<span class="token operator">=</span>trueREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<span class="token operator">&lt;</span>none<span class="token operator">></span>              <span class="token operator">&lt;</span>none<span class="token operator">></span>              00285df0df87        5 days ago          342 MB</code></pre><p>ä¸€èˆ¬æ¥è¯´ï¼Œè™šæ‚¬é•œåƒå·²ç»å¤±å»äº†å­˜åœ¨çš„ä»·å€¼ï¼Œæ˜¯å¯ä»¥éšæ„åˆ é™¤çš„ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ é™¤ã€‚</p><pre class=" language-bash"><code class="language-bash">$ docker image prune</code></pre><h3 id="ä¸­é—´å±‚é•œåƒ"><a href="#ä¸­é—´å±‚é•œåƒ" class="headerlink" title="ä¸­é—´å±‚é•œåƒ"></a>ä¸­é—´å±‚é•œåƒ</h3><p>ä¸ºäº†åŠ é€Ÿé•œåƒæ„å»ºã€é‡å¤åˆ©ç”¨èµ„æºï¼ŒDocker ä¼šåˆ©ç”¨ ä¸­é—´å±‚é•œåƒã€‚æ‰€ä»¥åœ¨ä½¿ç”¨ä¸€æ®µæ—¶é—´åï¼Œå¯èƒ½ä¼šçœ‹åˆ°ä¸€äº›ä¾èµ–çš„ä¸­é—´å±‚é•œåƒã€‚é»˜è®¤çš„ docker image ls åˆ—è¡¨ä¸­åªä¼šæ˜¾ç¤ºé¡¶å±‚é•œåƒï¼Œå¦‚æœå¸Œæœ›æ˜¾ç¤ºåŒ…æ‹¬ä¸­é—´å±‚é•œåƒåœ¨å†…çš„æ‰€æœ‰é•œåƒçš„è¯ï¼Œéœ€è¦åŠ  -a å‚æ•°ã€‚</p><pre class=" language-bash"><code class="language-bash">$ docker image <span class="token function">ls</span> -a</code></pre><p><strong>è¿™äº›æ— æ ‡ç­¾é•œåƒä¸åº”è¯¥åˆ é™¤ï¼Œå¦åˆ™ä¼šå¯¼è‡´ä¸Šå±‚é•œåƒå› ä¸ºä¾èµ–ä¸¢å¤±è€Œå‡ºé”™</strong></p><h3 id="å¸¸ç”¨åˆ—å‡ºé•œåƒçš„å‘½ä»¤"><a href="#å¸¸ç”¨åˆ—å‡ºé•œåƒçš„å‘½ä»¤" class="headerlink" title="å¸¸ç”¨åˆ—å‡ºé•œåƒçš„å‘½ä»¤"></a>å¸¸ç”¨åˆ—å‡ºé•œåƒçš„å‘½ä»¤</h3><h4 id="æ ¹æ®ä»“åº“ååˆ—å‡ºé•œåƒ"><a href="#æ ¹æ®ä»“åº“ååˆ—å‡ºé•œåƒ" class="headerlink" title="æ ¹æ®ä»“åº“ååˆ—å‡ºé•œåƒ"></a>æ ¹æ®ä»“åº“ååˆ—å‡ºé•œåƒ</h4><pre class=" language-bash"><code class="language-bash">$ docker image <span class="token function">ls</span> ubuntuREPOSITORY          TAG                 IMAGE ID            CREATED             SIZEubuntu              18.04               f753707788c5        4 weeks ago         127 MBubuntu              latest              f753707788c5        4 weeks ago         127 MB</code></pre><h4 id="åˆ—å‡ºç‰¹å®šçš„æŸä¸ªé•œåƒ"><a href="#åˆ—å‡ºç‰¹å®šçš„æŸä¸ªé•œåƒ" class="headerlink" title="åˆ—å‡ºç‰¹å®šçš„æŸä¸ªé•œåƒ"></a>åˆ—å‡ºç‰¹å®šçš„æŸä¸ªé•œåƒ</h4><pre class=" language-bash"><code class="language-bash">$ docker image <span class="token function">ls</span> ubuntu:18.04REPOSITORY          TAG                 IMAGE ID            CREATED             SIZEubuntu              18.04               f753707788c5        4 weeks ago         127 MB</code></pre><h4 id="åªæŸ¥çœ‹é•œåƒID"><a href="#åªæŸ¥çœ‹é•œåƒID" class="headerlink" title="åªæŸ¥çœ‹é•œåƒID"></a>åªæŸ¥çœ‹é•œåƒID</h4><pre class=" language-bash"><code class="language-bash">$ docker image <span class="token function">ls</span> -q5f515359c7f805a60462f8bafe9198c04d6200285df0df87f753707788c5f753707788c51e0c3dd64ccd</code></pre><h4 id="ä»¥è¡¨æ ¼ç­‰è·æ˜¾ç¤ºï¼Œå¹¶ä¸”æœ‰æ ‡é¢˜è¡Œ"><a href="#ä»¥è¡¨æ ¼ç­‰è·æ˜¾ç¤ºï¼Œå¹¶ä¸”æœ‰æ ‡é¢˜è¡Œ" class="headerlink" title="ä»¥è¡¨æ ¼ç­‰è·æ˜¾ç¤ºï¼Œå¹¶ä¸”æœ‰æ ‡é¢˜è¡Œ"></a>ä»¥è¡¨æ ¼ç­‰è·æ˜¾ç¤ºï¼Œå¹¶ä¸”æœ‰æ ‡é¢˜è¡Œ</h4><pre class=" language-bash"><code class="language-bash">$ docker image <span class="token function">ls</span> --format <span class="token string">"table {{.ID}}\t{{.Repository}}\t{{.Tag}}"</span>IMAGE ID            REPOSITORY          TAG5f515359c7f8        redis               latest05a60462f8ba        nginx               latestfe9198c04d62        mongo               3.200285df0df87        <span class="token operator">&lt;</span>none<span class="token operator">></span>              <span class="token operator">&lt;</span>none<span class="token operator">></span>f753707788c5        ubuntu              18.04f753707788c5        ubuntu              latest</code></pre><h2 id="åˆ é™¤é•œåƒ"><a href="#åˆ é™¤é•œåƒ" class="headerlink" title="åˆ é™¤é•œåƒ"></a>åˆ é™¤é•œåƒ</h2><blockquote><p>æ ¼å¼</p><pre class=" language-bash"><code class="language-bash">$ docker image <span class="token function">rm</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> <span class="token operator">&lt;</span>é•œåƒ1<span class="token operator">></span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>é•œåƒ2<span class="token operator">></span> <span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre><p><strong>å…¶ä¸­ï¼Œ&lt;é•œåƒ&gt; å¯ä»¥æ˜¯ é•œåƒçŸ­ IDã€é•œåƒé•¿ IDã€é•œåƒå æˆ–è€… é•œåƒæ‘˜è¦ã€‚</strong></p></blockquote><h3 id="Untagged-å’Œ-Deleted"><a href="#Untagged-å’Œ-Deleted" class="headerlink" title="Untagged å’Œ Deleted"></a>Untagged å’Œ Deleted</h3><p>å› ä¸ºä¸€ä¸ªé•œåƒå¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ <code>docker image rm</code> å‘½ä»¤æ—¶ï¼Œå¦‚æœå¦‚æœè¿˜æœ‰å…¶ä»–æ ‡ç­¾æŒ‡å‘è¿™ä¸ªé•œåƒï¼Œé‚£ä¹ˆå°±ä¸ä¼šäº§ç”Ÿ Delete æ“ä½œã€‚</p><h3 id="ç”¨-docker-image-ls-å‘½ä»¤æ¥é…åˆåˆ é™¤"><a href="#ç”¨-docker-image-ls-å‘½ä»¤æ¥é…åˆåˆ é™¤" class="headerlink" title="ç”¨ docker image ls å‘½ä»¤æ¥é…åˆåˆ é™¤"></a>ç”¨ docker image ls å‘½ä»¤æ¥é…åˆåˆ é™¤</h3><p>ä»¥ä¸‹å‘½ä»¤å¯ä»¥åˆ é™¤æ‰€æœ‰ä»“åº“åä¸º redis çš„é•œåƒ</p><pre class=" language-bash"><code class="language-bash">$ docker image <span class="token function">rm</span> <span class="token variable"><span class="token variable">$(</span>docker image <span class="token function">ls</span> -q redis<span class="token variable">)</span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</title>
      <link href="/2020/08/09/docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%80/"/>
      <url>/2020/08/09/docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<h2 id="docker-ä»‹ç»"><a href="#docker-ä»‹ç»" class="headerlink" title="docker ä»‹ç»"></a>docker ä»‹ç»</h2><p>docker è¿™ä¸ªä¸œè¥¿åº”è¯¥åšå¼€å‘çš„åº”è¯¥éƒ½æœ‰å¬è¯´è¿‡ï¼Œä½†æ˜¯ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰è¯¦ç»†çš„äº†è§£è¿‡ã€‚åæ­£æˆ‘æ˜¯å±äºå¬è¯´è¿‡ï¼Œå¤§æ¦‚çŸ¥é“æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œèƒ½ç‰¹åˆ«ç®€å•çš„ä½¿ç”¨ã€‚ä½†æ˜¯ä¸€ç›´æ²¡æœ‰æ·±å…¥çš„å­¦ä¹ è¿‡ï¼Œä»Šå¤©åœ¨è¿™é‡Œæˆ‘æƒ³æŠŠå­¦ä¹  docker çš„è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿æ—¥åæŸ¥æ‰¾ã€‚</p><p>é‚£ä¹ˆä¸‹é¢å¼€å§‹å•¦ã€‚~~~</p><h2 id="ä¸ºå•¥è¦ä½¿ç”¨-docker"><a href="#ä¸ºå•¥è¦ä½¿ç”¨-docker" class="headerlink" title="ä¸ºå•¥è¦ä½¿ç”¨ docker"></a>ä¸ºå•¥è¦ä½¿ç”¨ docker</h2><blockquote><p>åœ¨æˆ‘ç”µè„‘ä¸Šè¿è¡Œçš„æ˜¯æ­£å¸¸çš„å•Šï¼Ÿæ€ä¹ˆåˆ°äº†åˆ«äººçš„ç”µè„‘ä¸Šå°±ä¸èƒ½æ­£å¸¸è¿è¡Œäº†å‘¢ï¼Ÿ</p></blockquote><p>å¦‚æœä½ ä¹Ÿç¢°åˆ°ä¸Šé¢çš„é—®é¢˜äº†ï¼Œé‚£ä¹ˆè¯·ä½ ä¹Ÿå¼€å§‹ docker çš„å­¦ä¹ å§ã€‚è¿™ä¸ªæ—¶å€™æœ‰äººä¼šè¯´ä¸ºå•¥ä¸ç”¨è™šæ‹Ÿæœºå‘¢ï¼Œå› ä¸ºè™šæ‹Ÿæœºæ˜¯å®Œå…¨æ¨¡æ‹Ÿä¸€å°æ­£å¸¸è¿è¡Œçš„ã€‚å°±ç®—ä½ åªæ˜¯éœ€è¦è¿è¡Œä¸€ä¸ª php çš„ç¯å¢ƒï¼Œé‚£ä¹ˆç³»ç»Ÿé»˜è®¤çš„ä¸€äº›å…¶ä»–è¿›ç¨‹ä¹Ÿæ˜¯ä¼šå¯åŠ¨çš„ï¼Œè¿™æ ·å°±ä¼šé™ä½æˆ‘ä»¬ç”µè„‘çš„åˆ©ç”¨ç‡ã€‚è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯è™šæ‹Ÿæœºä¸€èˆ¬æ˜¯ä¸èƒ½å†ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨çš„ã€‚ä½†æ˜¯ docker æ²¡æœ‰é—®é¢˜ã€‚æ€»è€Œè¨€ä¹‹ä¸€å¥è¯ï¼Œè™šæ‹Ÿæœºä¸å¥½ï¼Œæˆ‘ä»¬è¦ç”¨ docker ã€‚</p><h2 id="docker-çš„ç”¨é€”"><a href="#docker-çš„ç”¨é€”" class="headerlink" title="docker çš„ç”¨é€”"></a>docker çš„ç”¨é€”</h2><ol><li>æä¾›ä¸€æ¬¡æ€§çš„ç¯å¢ƒã€‚æ¯”å¦‚ï¼Œæœ¬åœ°æµ‹è¯•ä»–äººçš„è½¯ä»¶ã€æŒç»­é›†æˆçš„æ—¶å€™æä¾›å•å…ƒæµ‹è¯•å’Œæ„å»ºçš„ç¯å¢ƒã€‚</li><li>æä¾›å¼¹æ€§çš„äº‘æœåŠ¡ã€‚å› ä¸º Docker å®¹å™¨å¯ä»¥éšå¼€éšå…³ï¼Œå¾ˆé€‚åˆåŠ¨æ€æ‰©å®¹å’Œç¼©å®¹ã€‚</li><li>ç»„å»ºå¾®æœåŠ¡æ¶æ„ã€‚é€šè¿‡å¤šä¸ªå®¹å™¨ï¼Œä¸€å°æœºå™¨å¯ä»¥è·‘å¤šä¸ªæœåŠ¡ï¼Œå› æ­¤åœ¨æœ¬æœºå°±å¯ä»¥æ¨¡æ‹Ÿå‡ºå¾®æœåŠ¡æ¶æ„ã€‚</li></ol><h2 id="docker-çš„å®‰è£…"><a href="#docker-çš„å®‰è£…" class="headerlink" title="docker çš„å®‰è£…"></a>docker çš„å®‰è£…</h2><p>docker åˆ†ä¸ºç¤¾åŒºç‰ˆï¼ˆCEï¼‰ã€ä¼ä¸šç‰ˆæœ¬ï¼ˆEEï¼‰<br>win å’Œ mac å®‰è£…å¾ˆç®€å•ï¼Œå°±æ˜¯æ­£å¸¸çš„å®‰è£…è½¯ä»¶çš„æ–¹æ³•ï¼Œè€Œç”¨èƒ½ç”¨ linux ç³»ç»Ÿçš„ï¼Œç›¸ä¿¡ä½ ä¹Ÿæœ‰åŠæ³•æ‰¾åˆ°å®‰è£…çš„æ–¹æ³•çš„ã€‚</p><p>å®‰è£…å®Œæˆä¹‹åä½¿ç”¨å¦‚ä¸‹å‘½ä»¤éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</p><pre class=" language-bash"><code class="language-bash">$ docker version<span class="token comment" spellcheck="true"># æˆ–è€…</span>$ docker info</code></pre><p><strong>Docker éœ€è¦ç”¨æˆ·å…·æœ‰ sudo æƒé™ï¼Œä¸ºäº†é¿å…æ¯æ¬¡å‘½ä»¤éƒ½è¾“å…¥sudoï¼Œå¯ä»¥æŠŠç”¨æˆ·åŠ å…¥ Docker ç”¨æˆ·ç»„</strong></p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">usermod</span> -aG docker <span class="token variable">$USER</span></code></pre><p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨ docker</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># service å‘½ä»¤çš„ç”¨æ³•</span>$ <span class="token function">sudo</span> <span class="token function">service</span> docker start<span class="token comment" spellcheck="true"># systemctl å‘½ä»¤çš„ç”¨æ³•</span>$ <span class="token function">sudo</span> systemctl start docker</code></pre><h2 id="ç¬¬ä¸€ä¸ªå®ä¾‹-hello-world"><a href="#ç¬¬ä¸€ä¸ªå®ä¾‹-hello-world" class="headerlink" title="ç¬¬ä¸€ä¸ªå®ä¾‹ hello world"></a>ç¬¬ä¸€ä¸ªå®ä¾‹ hello world</h2><pre class=" language-bash"><code class="language-bash">$ docker container run hello-world</code></pre><p>å¦‚æœè¿è¡ŒæˆåŠŸï¼Œä½ ä¼šåœ¨å±å¹•ä¸Šè¯»åˆ°ä¸‹é¢çš„è¾“å‡ºã€‚</p><pre class=" language-bash"><code class="language-bash">$ docker container run hello-worldHello from Docker<span class="token operator">!</span>This message shows that your installation appears to be working correctly.<span class="token punctuation">..</span>. <span class="token punctuation">..</span>.</code></pre><p>ä¸Šé¢å‘½ä»¤çš„è¿‡ç¨‹å°±æ˜¯ï¼š</p><ol><li>ä» docker çš„å®˜æ–¹ä»“åº“æ‹‰å– hello world image æ–‡ä»¶åˆ°æœ¬åœ°</li><li>ä½¿ç”¨ image æ–‡ä»¶ ç”Ÿæˆ å®¹å™¨æ–‡ä»¶</li><li>è¿è¡Œ hello world å®¹å™¨ â€”&gt; è¾“å‡ºç›¸å…³å†…å®¹  â€”&gt; å®¹å™¨è‡ªåŠ¨ç»ˆæ­¢ï¼ˆæœ‰äº›å®¹å™¨ä¸ä¼šè‡ªåŠ¨ç»ˆæ­¢ï¼Œå› ä¸ºæä¾›çš„æ˜¯æœåŠ¡ã€‚æ¯”å¦‚ï¼Œå®‰è£…è¿è¡Œ Ubuntu çš„ imageï¼Œå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä½“éªŒ Ubuntu ç³»ç»Ÿã€‚ï¼‰</li></ol><p>é€šè¿‡ä¸Šé¢çš„å®ä¾‹å¤§æ¦‚çŸ¥é“äº† docker çš„æ˜¯æ€ä¹ˆå›äº‹äº†ã€‚ä¸»è¦å°±æ˜¯éœ€è¦æ˜ç™½ä¸¤ä¸ªæ–‡ä»¶ï¼Œimageæ–‡ä»¶å’Œå®¹å™¨æ–‡ä»¶ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åˆ¶ä½œä¸€ä¸ª image æ–‡ä»¶ï¼Œå¹¶é€šè¿‡è¯¥æ–‡ä»¶ç”Ÿæˆå®¹å™¨å¹¶è¿è¡Œã€‚</p><h2 id="åˆ¶ä½œè‡ªå·±çš„-docker-å®¹å™¨"><a href="#åˆ¶ä½œè‡ªå·±çš„-docker-å®¹å™¨" class="headerlink" title="åˆ¶ä½œè‡ªå·±çš„ docker å®¹å™¨"></a>åˆ¶ä½œè‡ªå·±çš„ docker å®¹å™¨</h2><ol><li>æ–°å»ºä¸€ä¸ªç›®å½•<pre class=" language-bash"><code class="language-bash">$ <span class="token function">mkdir</span> hello <span class="token operator">&amp;&amp;</span> <span class="token function">cd</span> hello </code></pre></li><li>åœ¨ç›®å½•ä¸­æ–°å»º .dockerignore æ–‡ä»¶ï¼ˆè¯¥æ–‡ä»¶ç±»ä¼¼äº git é¡¹ç›®ä¸­çš„ .gitignore æ–‡ä»¶ï¼‰</li><li><p>åœ¨ç›®å½•ä¸­æ–°å»º Dockerfile æ–‡ä»¶,å†…å®¹å¦‚ä¸‹æ‰€ç¤º<br><img src="http://static.xiangdangnian.net.cn/blog/2020/08/10/20-29-32-9faae2396ce4759958aee55bfcabc924-f01fa1.png" alt=""></p></li><li><p>è¿è¡Œå‘½ä»¤ï¼Œè¿›è¡Œ image çš„æ„å»º</p><pre class=" language-bash"><code class="language-bash">$ docker build -t nginx:v1 <span class="token keyword">.</span></code></pre><p>çœ‹åˆ°å¦‚ä¸‹å†…å®¹åˆ™è¡¨ç¤º image æ„å»ºæˆåŠŸã€‚<br><img src="http://static.xiangdangnian.net.cn/blog/2020/08/10/20-30-47-a92e94e81727959af077be139e676ed6-044d5a.png" alt=""></p></li><li><p>é€šè¿‡ image æ–‡ä»¶ç”Ÿæˆå®¹å™¨æ–‡ä»¶</p><pre class=" language-bash"><code class="language-bash">$ docker run --name webserver -p 9527:80 nginx:v1</code></pre></li><li>é€šè¿‡æµè§ˆå™¨è®¿é—® localhost:9527,å¦‚æœå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹åˆ™æˆåŠŸ<br><img src="http://static.xiangdangnian.net.cn/blog/2020/08/10/20-35-50-6f66e88683370b594f2ec01744c008cf-0c3367.png" alt=""></li></ol><p>ä¸€ä¸ªç®€å•çš„å®¹å™¨å°±å®Œæˆäº†ã€‚é€šè¿‡è¿™ä¸ªä¾‹å­æˆ‘ä»¬å¯ä»¥å¤§æ¦‚äº†è§£ docker çš„é…ç½®ï¼Œè¿è¡Œï¼Œ åé¢ä¼šæ·±å…¥ docker ç›¸å…³çš„æ¦‚å¿µè¿›è¡Œå­¦ä¹ ï¼Œå¹¶å®šä¸‹ç¬¬ä¸€ä¸ªè®¡åˆ’ â€”â€”â€”â€” é…ç½®ä¸€ä¸ªå±äºè‡ªå·±çš„ LNMP docker æµ‹è¯•ç¯å¢ƒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šè¢«è®¨åŒçš„å‹‡æ°”ã€‹è¯»åæ„Ÿ</title>
      <link href="/2020/06/09/%E8%A2%AB%E8%AE%A8%E5%8E%8C%E7%9A%84%E5%8B%87%E6%B0%94%E8%AF%BB%E5%90%8E%E6%84%9F/"/>
      <url>/2020/06/09/%E8%A2%AB%E8%AE%A8%E5%8E%8C%E7%9A%84%E5%8B%87%E6%B0%94%E8%AF%BB%E5%90%8E%E6%84%9F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è‡ªä»ä»å¤–åœ°å›åˆ°å®¶é‡Œï¼Œæ„Ÿè§‰ç„¦è™‘çš„æƒ…ç»ªæ¯”ä¹‹å‰æ›´æ·±äº†ã€‚å°±è¿™æœ¬è¯»åæ„Ÿæ¥è®°å½•ä¸€ä¸‹è¿‘æœŸçš„æƒ…å†µå§ã€‚</p></blockquote><p>å‘ç°è¿™æœ¬ä¹¦ä¹Ÿæ˜¯ä¸€ä¸ªå¶ç„¶çš„æœºä¼šå§ã€‚å› ä¸ºå·²ç»30å²äº†è¿˜æ²¡æœ‰ç»“å©šï¼Œè€Œä¸”ä¹Ÿä»æ¥æ²¡æœ‰è°ˆè¿‡æ‹çˆ±ï¼Œé‚£ä¹ˆä»å›åˆ°å®¶å¼€å§‹å®¶é‡Œäººå°±ä¸€ç›´åœ¨å¼ ç½—ç›¸äº²çš„äº‹æƒ…ã€‚æœ€è¿‘è®¤è¯†äº†ä¸€ä¸ªå¥³ç”Ÿï¼Œä¹Ÿè§è¿‡å‡ é¢ï¼ŒèŠçš„ä¹Ÿç®—è¿˜è¡Œï¼Œå°±æ˜¯æ¯”è¾ƒå®¢æ°”çš„é—®å€™ä»¥åŠéšä¾¿çš„é—²èŠã€‚å¤§æ¦‚æŒç»­äº†å¾—æœ‰2ä¸ªæœˆå·¦å³å§ã€‚è¿‘æœŸæ„Ÿè§‰åœ¨å¾®ä¿¡ä¸ŠèŠå¾—éå¸¸ä¸é”™ï¼Œæœ¬æƒ³ç€çº¦å‡ºæ¥è¡¨ç™½ä¸€ä¸‹ã€‚ä¹Ÿä¸çŸ¥é“é‚£å¤©æ˜¯ä»€ä¹ˆåŸå› ï¼Œåƒé¥­çš„æ—¶å€™æ¥åˆ°ä¸€å®¶åˆšå¼€ä¹Ÿçš„çƒ§çƒ¤åº—ï¼Œå› ä¸ºåˆšå¼€ä¸šåœ¨åšæ´»åŠ¨ï¼Œå¤–é¢ä¸åœçš„æœ‰äººåœ¨å”±æ­Œï¼Œå£°éŸ³å¾ˆå¤§å¬ä¸æ¸…è¯´è¯çš„é‚£ç§ã€‚ç„¶åè¿™é¡¿é¥­å°±åƒçš„ä¸æ˜¯å¾ˆæ„‰å¿«ï¼ŒæœŸé—´ä¹Ÿæ²¡æ€ä¹ˆèŠã€‚é¥­åå¤§å®¶å°±åè½¦å›å»äº†ã€‚åˆ°å®¶åæˆ‘å°±æ„Ÿè§‰ä¸çŸ¥é“ä¸ºä»€ä¹ˆéƒ½è®¤è¯†ä¹Ÿç®—æŒºä¹…çš„äº†ï¼Œæ€ä¹ˆåœ¨ä¸€èµ·çš„æ—¶å€™è¿˜æ˜¯åƒæ™®é€šäººä¸€æ ·ï¼Œéå¸¸çš„å®¢æ°”ã€ç”Ÿç–ï¼Œå®Œå…¨ä¸åƒå¾®ä¿¡é‡ŒèŠå¤©çš„é‚£ç§æ„Ÿè§‰ï¼Œæ›´åˆ«è¯´æ‹çˆ±çš„æ„Ÿè§‰äº†ã€‚</p><p>åæ¥æˆ‘å°±è¿™åæ€ï¼Œç©¶ç«Ÿä»€ä¹ˆåŸå› é€ æˆäº†ç°åœ¨çš„è¿™ç§å±€é¢ã€‚æˆ‘æ‰¿è®¤è‡ªå·±æ€§æ ¼å†…å‘ï¼Œä¸å–„äºè¡¨è¾¾ã€‚ä½†æ˜¯å¹³å¸¸åœ¨ä¸€äº›æœ‹å‹åŒã€äº‹é¢å‰è¡¨ç°çš„ä¹Ÿè¿˜å¥½ã€‚ç„¶åå°±åœ¨ç½‘ç»œä¸ŠæŸ¥è¿™æ˜¯æ€ä¹ˆå›äº‹ã€‚æœ‰äººæåˆ°äº†ã€Œç¤¾äº¤ææƒ§ç—‡ã€ã€‚</p><p>ä¹‹å‰ä¹ŸçŸ¥é“è¿™ä¹ˆä¸ªè¯è¯­ï¼Œä½†çœŸçš„æ²¡å¾€è‡ªå·±èº«ä¸Šæƒ³ï¼Œå°±æ˜¯è§‰å¾—è‡ªå·±æœ‰ç‚¹å†…å‘ï¼Œä¸çˆ±è¯´è¯ç½¢äº†ã€‚ç„¶è€Œä»”ç»†çœ‹äº†ä¸‹ç¤¾æçš„ç—‡çŠ¶â€”â€”å¯èƒ½æˆ‘çœŸçš„æœ‰äº›è½»å¾®çš„ç¤¾æäº†ã€‚</p><p>ä¸‹é¢è®²ä¸‹é‡ç‚¹â€”â€”ã€Šè¢«è®¨åŒçš„å‹‡æ°”ã€‹è¿™æœ¬ä¹¦ã€‚</p><ul><li><p>æœ¬ä¹¦ä¸»è¦é€šè¿‡å“²äººå’Œä»¥ä¸ºé’å¹´ä¹‹é—´çš„å¯¹è¯çš„æ–¹å¼å¼•å‡ºäº†é˜¿å¾·å‹’å¿ƒç†å­¦çš„ç›¸å…³å†…å®¹ã€‚</p></li><li><p>é¦–å…ˆé¢ è¦†äº†å¼—æ´›ä¼Šå¾·çš„åŸå› è®ºã€‚</p></li><li><p>æ¥ä¸‹æ¥æ˜¯äººç”Ÿçš„çƒ¦æ¼å’Œè‡ªå‘éƒ½æ˜¯æ¥è‡ªæœ‰äººé™…å…³ç³»ã€‚</p></li><li><p>ç¬¬ä¸‰æ•™ä¼šæˆ‘ä»¬å¦‚ä½•æŠŠè‡ªå·±å’Œåˆ«äººçš„äººç”Ÿè¯¾é¢˜åˆ†å¼€ã€‚</p></li><li><p>ç¬¬å››å°±æ˜¯æ ‡é¢˜æ‰€è®²çš„å†…å®¹ï¼Œè¦æœ‰è¢«è®¨åŒçš„å‹‡æ°”ã€‚</p></li><li><p>æœ€åå‘ŠçŸ¥æˆ‘ä»¬è¦æ´»åœ¨å½“ä¸‹ï¼Œå³ä¸è¦çº ç»“è¿‡å»çš„åŸå› ï¼Œä¹Ÿä¸è¦ç•…äº«æœªæ¥çš„ç¾å¥½ï¼Œè¿‡å¥½äººç”Ÿçš„æ¯ä¸€ä¸ªåˆ¹é‚£ã€‚</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
            <tag> è§‚åæ„Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ websocket ç®€å•æ¨¡æ‹Ÿç›´æ’­æ•ˆæœï¼ˆåˆçº§ç‰ˆï¼‰</title>
      <link href="/2020/02/28/%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F%E7%9B%B4%E6%92%AD/"/>
      <url>/2020/02/28/%E7%AE%80%E5%8D%95%E6%A8%A1%E6%8B%9F%E7%9B%B4%E6%92%AD/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸºäº swoole é€šè¿‡ websocket ç®€å•å®ç°ç›´æ’­æ•ˆæœã€‚ï¼ˆä¸»è¦å­¦ä¹ ä¸€ä¸‹ websocket ç›¸å…³çŸ¥è¯†ç‚¹ï¼‰</p></blockquote><p><img src="http://static.xiangdangnian.net.cn/blog/wesocket.jpg" alt="æµç¨‹å›¾"></p><h1 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h1><ol><li>åœ¨ç›´æ’­é¡µä½¿ç”¨è§†é¢‘çš„æ–¹å¼æ¨¡æ‹Ÿæ‘„åƒå¤´</li><li>åˆ©ç”¨ canvas ç»˜åˆ¶è§†é¢‘å†…å®¹</li><li>é€šè¿‡ canvas å°†ç»˜åˆ¶çš„å›¾ç‰‡è½¬åŒ–ä¸º base64 æ ¼å¼</li><li>ä½¿ç”¨ settimeout å®šæ—¶æ‰§è¡Œï¼Œé€šè¿‡ websocket å°† base64 æ ¼å¼å›¾ç‰‡ä¼ é€’åˆ°æœåŠ¡ç«¯</li><li>æœåŠ¡ç«¯æ¥æ”¶åˆ°æ•°æ®ä¹‹åï¼Œé€šè¿‡å¹¿æ’­çš„å½¢å¼è¿›è¡Œæ¨é€</li><li>å®¢æˆ·ç«¯é¡µé¢é€šè¿‡ websocket æ¥æ”¶æœåŠ¡ç«¯å‘æ¥çš„æ•°æ®åœ¨é¡µé¢ä¸Šå¾ªç¯å±•ç¤º</li><li>å®Œæˆ</li></ol><h2 id="ç›´æ’­é¡µ"><a href="#ç›´æ’­é¡µ" class="headerlink" title="ç›´æ’­é¡µ"></a>ç›´æ’­é¡µ</h2><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>xszr.mp4<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>video<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span> <span class="token attr-name">autoplay</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">controls</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>canvas<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1280<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>720<span class="token punctuation">"</span></span> <span class="token attr-name">hidden</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">    ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">"ws://test.test/ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> video <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'video'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>video<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">'image/jpeg'</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span>draw<span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ws<span class="token punctuation">.</span>onopen <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="websocket-æœåŠ¡ç«¯"><a href="#websocket-æœåŠ¡ç«¯" class="headerlink" title="websocket æœåŠ¡ç«¯"></a>websocket æœåŠ¡ç«¯</h2><pre class=" language-php"><code class="language-php"><span class="token variable">$ws</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">swoole_websocket_server</span><span class="token punctuation">(</span><span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span><span class="token number">9527</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç›‘å¬WebSocketæ¶ˆæ¯äº‹ä»¶</span><span class="token variable">$ws</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$ws</span><span class="token punctuation">,</span> <span class="token variable">$frame</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$ws</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">connections</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$ws</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">connections</span> <span class="token keyword">as</span> <span class="token variable">$fd</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token variable">$ws</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">push</span><span class="token punctuation">(</span><span class="token variable">$fd</span><span class="token punctuation">,</span><span class="token variable">$frame</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç›‘å¬WebSocketè¿æ¥å…³é—­äº‹ä»¶</span><span class="token variable">$ws</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$ws</span><span class="token punctuation">,</span> <span class="token variable">$fd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">echo</span> <span class="token string">"client-{$fd} is closed\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$ws</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h2><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>img<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1280<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>720<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">    ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">"ws://test.test/ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ws<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>        img<span class="token punctuation">.</span>src <span class="token operator">=</span> event<span class="token punctuation">.</span>data    <span class="token punctuation">}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><p><img src="http://static.xiangdangnian.net.cn/blog/fdssddsfsdfsdf.gif" alt="æœ€ç»ˆæ•ˆæœ"></p><h3 id="nginx-é…ç½®"><a href="#nginx-é…ç½®" class="headerlink" title="nginx é…ç½®"></a>nginx é…ç½®</h3><pre class=" language-nginx"><code class="language-nginx"><span class="token keyword">upstream</span> test <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true"># å› ä¸ºä½¿ç”¨çš„laradock æ‰€ä»¥æ˜¯workspaceï¼Œå…¶ä»–ç¯å¢ƒæ ¹æ®å…·ä½“æƒ…å†µå¡«å†™å¯¹åº” ip åœ°å€</span>    <span class="token keyword">server</span> workspace<span class="token punctuation">:</span><span class="token number">9527</span> weight<span class="token operator">=</span><span class="token number">5</span> max_fails<span class="token operator">=</span><span class="token number">3</span> fail_timeout<span class="token operator">=</span>30s<span class="token punctuation">;</span>    <span class="token keyword">keepalive</span> <span class="token number">16</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">server</span> <span class="token punctuation">{</span>    <span class="token keyword">listen</span> <span class="token number">80</span><span class="token punctuation">;</span>    <span class="token keyword">server_name</span> test<span class="token punctuation">.</span>test<span class="token punctuation">;</span>    <span class="token keyword">root</span> <span class="token operator">/</span>var<span class="token operator">/</span>www<span class="token operator">/</span>test<span class="token punctuation">;</span>    <span class="token keyword">index</span> <span class="token keyword">index</span><span class="token punctuation">.</span>php <span class="token keyword">index</span><span class="token punctuation">.</span>html <span class="token keyword">index</span><span class="token punctuation">.</span>htm<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true"># å› ä¸º laradock å¼€å¯å…¶ä»–ç«¯å£æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œè½¬å‘</span>    <span class="token keyword">location</span> <span class="token operator">=</span><span class="token operator">/</span>ws <span class="token punctuation">{</span>        <span class="token keyword">proxy_http_version</span> <span class="token number">1.1</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>PORT <span class="token variable">$remote_port</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Host <span class="token variable">$http_host</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Scheme <span class="token variable">$scheme</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> <span class="token keyword">Server</span><span class="token operator">-</span><span class="token keyword">Protocol</span> <span class="token variable">$server_protocol</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> <span class="token keyword">Server</span><span class="token operator">-</span>Name <span class="token variable">$server_name</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> <span class="token keyword">Server</span><span class="token operator">-</span>Addr <span class="token variable">$server_addr</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> <span class="token keyword">Server</span><span class="token operator">-</span>Port <span class="token variable">$server_port</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Connection <span class="token variable">$connection_upgrade</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>test<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> swoole </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šä½†æ˜¯è¿˜æœ‰ä¹¦ç±ã€‹è§‚åæ„Ÿ</title>
      <link href="/2020/02/01/%E4%BD%86%E6%98%AF%E8%BF%98%E6%9C%89%E4%B9%A6%E7%B1%8D%E8%A7%82%E5%90%8E%E6%84%9F/"/>
      <url>/2020/02/01/%E4%BD%86%E6%98%AF%E8%BF%98%E6%9C%89%E4%B9%A6%E7%B1%8D%E8%A7%82%E5%90%8E%E6%84%9F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©åœ¨ B ç«™ä¸Šçœ‹äº†ä¸€éƒ¨äººæ–‡ç±»çš„çºªå½•ç‰‡ã€Šä½†æ˜¯è¿˜æœ‰ä¹¦ç±ã€‹ï¼Œçœ‹è¿‡åæ¿€å‘äº†æˆ‘å†…å¿ƒæ·±å¤„é‚£ä¸€ä¸æ–‡è‰ºé’å¹´çš„éªšåŠ¨ã€‚(ğŸ˜“)æ‰€ä»¥å°±æœ‰äº†ä¸‹é¢çš„å†…å®¹ã€‚</p></blockquote><h2 id="ç¬¬ä¸€é›†ã€Œä¹¦æµ·ç¼–èˆŸè®°ã€"><a href="#ç¬¬ä¸€é›†ã€Œä¹¦æµ·ç¼–èˆŸè®°ã€" class="headerlink" title="ç¬¬ä¸€é›†ã€Œä¹¦æµ·ç¼–èˆŸè®°ã€"></a>ç¬¬ä¸€é›†ã€Œä¹¦æµ·ç¼–èˆŸè®°ã€</h2><p><em>ä¸€ç¾¤éšèº«äºä¹¦èƒŒåçš„äººï¼Œä»–ä»¬ç©¿æ¢­äºå­—é‡Œè¡Œé—´ï¼Œé’»ç ”ç€é€—å·ã€å¥å·çš„å­¦é—®ï¼Œä»–ä»¬ä»¥æ•é”çš„çœ¼å…‰æ¢å¯»æ–‡å­¦çš„çŸ¿è„‰ï¼Œä»–ä»¬ä»¥ç»†å¾®çç¢çš„å·¥ä½œæ­å»ºèµ·è·¨è¶Šè¯­è¨€çš„æ¡¥æ¢ï¼Œæ‘†æ¸¡äºä½œè€…å’Œè¯»è€…ä¹‹é—´ï¼Œç¼–ç»‡ç€èˆªè¡Œäºæµ©ç€šæ–‡æµ·ä¸­çš„æ€æƒ³ä¹‹èˆŸã€‚</em></p><p>ä¸Šé¢çš„æ–‡å­—æ˜¯è¿™ä¸€é›†çš„å¼€ç¯‡è¯­ï¼Œè¯»è¿‡ä¸Šé¢çš„æ–‡å­—ç›¸ä¿¡å¤§å®¶åº”è¯¥å·²ç»çŸ¥é“è¿™ä¸€é›†è®²è¿°çš„æ˜¯ä»€ä¹ˆå†…å®¹äº†å§ã€‚æ²¡é”™ï¼å°±æ˜¯ä¹¦ç±ç¼–è¾‘è€…å’Œä¹¦ç±ç¿»è¯‘è€…ã€‚</p><p>è¿™ä¸€é›†ä¸»è¦è®²è¿°äº†3ä¸ªäººçš„æ•…äº‹ã€‚</p><p>ç¬¬ä¸€ä½å«åšæœ±å²³ï¼Œæ˜¯åæµªæ–‡å­¦çš„ä¸€åä¸»ç¼–ä¹Ÿæ˜¯ä¸€åä½œè€…ã€‚ä¸»è¦æ˜¯å°†ä¸€äº›å°æ¹¾ã€æ–°åŠ å¡ä¹‹ç±»çš„åè¯­ç±»æ–‡å­¦å¼•å…¥å›½å†…ï¼Œè®©å›½å†…çš„æˆ‘ä»¬ä¹Ÿå¯ä»¥è¯»åˆ°è¿™äº›åœ°æ–¹çš„ä½œå“ã€‚ç¬¬äºŒä½å«åšä¿å›½æ—ï¼Œæ˜¯ä¸­åä¹¦å±€å­¦æœ¯è‘—ä½œå‡ºç‰ˆä¸­å¿ƒçš„ä¸»ä»»ã€‚é€šè¿‡ä»–çš„åŠªåŠ›ï¼Œå†æ—¶åä¸‰å¹´çš„æ—¶é—´ç»ˆäºåœ¨2018å¹´1æœˆå‡ºç‰ˆäº†ã€Šéƒ‘å¤©æŒºè¥¿å—è”å¤§æ—¥è®°ã€‹ä¸€ä¹¦ï¼Œè¯¥ä¹¦çš„å‡ºç‰ˆå¯¹ç ”ç©¶è¥¿å—è”å¤§æ ¡å²ã€è¿‘ä»£å­¦æœ¯å²éƒ½æ˜¯æä¸ºé‡è¦çš„å²æ–™ã€‚ç¬¬ä¸‰ä½å«åšèŒƒæ™”æ˜¯åŒ—äº¬å¤§å­¦å¤–å›½è¯­å­¦é™¢è¥¿è‘¡è¯­ç³»çš„ç³»ä¸»ä»»ã€‚ä»–æ˜¯ã€Šç™¾å¹´å­¤ç‹¬ã€‹ä¸­æ–‡ç‰ˆçš„è¯‘è€…ï¼Œä¸ºäº†èƒ½å¤Ÿæ›´å¥½çš„è¡¨è¾¾ä½œè€…çš„æ„æ€ä¸”å¯ä»¥åœ¨10ä¸ªæœˆå†…å®Œæˆç¿»è¯‘ï¼Œä»–ç¿»éäº†é©¬å°”å…‹æ–¯å…¶ä»–çš„ä½œå“ï¼Œä¸€éä¸€éçš„æŸ¥å­—å…¸ã€ç¿»é˜…èµ„æ–™ï¼Œç»ˆäºåœ¨2011å¹´6æœˆèŠ±äº†11æœˆç¿»è¯‘çš„ä½œå“å‡ºç‰ˆäº†ã€‚</p><p>è™½ç„¶ä¸‰ä½å¹³å‡¡çš„æ–‡å­—å·¥ä½œè€…åœ¨å¹³å‡¡çš„å·¥ä½œ å²—ä½ä¸Šåšç€å¹³å‡¡çš„äº‹æƒ…ï¼Œä½†æ˜¯å› ä¸ºä»–ä»¬çš„åŠªåŠ›æˆ‘ä»¬æ‰èƒ½çœ‹åˆ°å…¶ä»–åœ°åŒºåè¯­æ–‡å­¦ä½œå“ï¼Œè®©æˆ‘ä»¬å¾—ä»¥äº†è§£ä»–ä»¬çš„ç”Ÿæ´»ã€æ–‡åŒ–ã€‚ä¹Ÿæ˜¯ä»–ä»¬çš„åŠªåŠ›è®©æˆ‘å¯ä»¥äº†è§£å†å²ï¼Œè·æ‚‰æ›¾ç»å‘ç”Ÿçš„æ•…äº‹ã€‚è¿˜æ˜¯ä»–ä»¬çš„åŠªåŠ›è®©æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶ä»–å¤–å›½æ–‡å­¦ã€‚</p><h2 id="ç¬¬äºŒé›†ã€ŒäºŒæ‰‹ä¹¦çš„å¥‡å¹»æ¼‚æµã€"><a href="#ç¬¬äºŒé›†ã€ŒäºŒæ‰‹ä¹¦çš„å¥‡å¹»æ¼‚æµã€" class="headerlink" title="ç¬¬äºŒé›†ã€ŒäºŒæ‰‹ä¹¦çš„å¥‡å¹»æ¼‚æµã€"></a>ç¬¬äºŒé›†ã€ŒäºŒæ‰‹ä¹¦çš„å¥‡å¹»æ¼‚æµã€</h2><p><em>ä¹¦ç±ä»ä¸€è¯ç”Ÿä¾¿å¼€å§‹äº†ä»–çš„å¥‡å¹»ä¹‹æ—…ã€‚ä»ä¹¦åº—åˆ°è¯»ä¹¦äººæ‰‹ä¸­ï¼Œä»ä¸€ä¸ªä¹¦æˆ¿åˆ°å¦ä¸€ä¸ªä¹¦æˆ¿ï¼Œä»–ä»¬åœ¨æ¼«é•¿çš„å²æœˆä¸­è¾—è½¬æµå¾™ï¼Œä¸æ–­å¢æ·»æ–°çš„ç—•è¿¹ä¸è®°å¿†ï¼Œä¸äººå…±åŒä¹¦å†™ç€ä¸€æ®µæ®µæ•…äº‹ä¸ä¼ å¥‡</em></p>]]></content>
      
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
            <tag> è§‚åæ„Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravelé€šè¿‡å…³è”æ¨¡å‹å®ç°æ— é™æåˆ†ç±»</title>
      <link href="/2020/01/15/laravel%E9%80%9A%E8%BF%87%E5%85%B3%E8%81%94%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0%E6%97%A0%E9%99%90%E6%9E%81%E5%88%86%E7%B1%BB/"/>
      <url>/2020/01/15/laravel%E9%80%9A%E8%BF%87%E5%85%B3%E8%81%94%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0%E6%97%A0%E9%99%90%E6%9E%81%E5%88%86%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="Laravel-é€šè¿‡å…³è”æ¨¡å‹å®ç°æ— é™æåˆ†ç±»"><a href="#Laravel-é€šè¿‡å…³è”æ¨¡å‹å®ç°æ— é™æåˆ†ç±»" class="headerlink" title="Laravel é€šè¿‡å…³è”æ¨¡å‹å®ç°æ— é™æåˆ†ç±»"></a>Laravel é€šè¿‡å…³è”æ¨¡å‹å®ç°æ— é™æåˆ†ç±»</h1><blockquote><p>è¿™ä¸ªå†…å®¹æ˜¯åœ¨ Laravel-China è®ºå›ä¸Šçœ‹åˆ°çš„ï¼Œæ€•ä»¥åä¸å¥½æ‰¾ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚åŸæ–‡åœ°å€ä¸ºï¼š<a href="https://learnku.com/articles/14068/simple-practice-of-laravel-infinite-class-classification" target="_blank" rel="noopener">https://learnku.com/articles/14068/simple-practice-of-laravel-infinite-class-classification</a></p></blockquote><h2 id="æ•°æ®åº“ç»“æ„"><a href="#æ•°æ®åº“ç»“æ„" class="headerlink" title="æ•°æ®åº“ç»“æ„"></a>æ•°æ®åº“ç»“æ„</h2><p>è¿™é‡Œä½¿ç”¨çœå¸‚åŒºç»“æ„</p><pre class=" language-php"><code class="language-php"><span class="token keyword">class</span> <span class="token class-name">CreateAreasTable</span> <span class="token keyword">extends</span> <span class="token class-name">Migration</span><span class="token punctuation">{</span>    <span class="token punctuation">.</span>    <span class="token punctuation">.</span>    <span class="token punctuation">.</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'areas'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">unsignedInteger</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">comment</span><span class="token punctuation">(</span><span class="token string">'åŸå¸‚åç§°'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">unsignedInteger</span><span class="token punctuation">(</span><span class="token string">'pid'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token keyword">default</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">comment</span><span class="token punctuation">(</span><span class="token string">'çˆ¶çº§id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>    <span class="token punctuation">.</span>    <span class="token punctuation">.</span><span class="token punctuation">}</span></code></pre><h2 id="Area-æ¨¡å‹å¢åŠ å…³è”æ–¹æ³•"><a href="#Area-æ¨¡å‹å¢åŠ å…³è”æ–¹æ³•" class="headerlink" title="Area æ¨¡å‹å¢åŠ å…³è”æ–¹æ³•"></a>Area æ¨¡å‹å¢åŠ å…³è”æ–¹æ³•</h2><pre class=" language-php"><code class="language-php"><span class="token keyword">class</span> <span class="token class-name">Area</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span><span class="token punctuation">{</span>    <span class="token punctuation">.</span>    <span class="token punctuation">.</span>    <span class="token punctuation">.</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">childArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hasMany</span><span class="token punctuation">(</span>Area<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token string">'pid'</span><span class="token punctuation">,</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">allChildArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">childArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">with</span><span class="token punctuation">(</span><span class="token string">'allChildArea'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>    <span class="token punctuation">.</span>    <span class="token punctuation">.</span><span class="token punctuation">}</span></code></pre><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><blockquote><p>é€šè¿‡å¦‚ä¸‹ä»£ç å¯ä»¥å¾—åˆ°æ‰€æœ‰åœ°åŒºçš„æ— é™æåˆ†ç±»ç»“æ„ã€‚æ›´æ”¹æ¡ä»¶å¯ä»¥æŸ¥çœ‹æŸä¸ªåœ°åŒºåŠå…¶å­åœ°åŒºçš„æ— é™æåˆ†ç±»ç»“æ„</p></blockquote><pre class=" language-php"><code class="language-php"><span class="token variable">$res</span> <span class="token operator">=</span> Area<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token string">'allChildArea'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'pid'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token variable">$res</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ipad-mini2 é™çº§è®°å½•</title>
      <link href="/2020/01/13/%E9%99%8D%E7%BA%A7%E8%AE%B0%E5%BD%95/"/>
      <url>/2020/01/13/%E9%99%8D%E7%BA%A7%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸»è¦è®°å½•ä¸‹ Ipad mini2 ios12.3.1 é™çº§ä¸º ios10.3.3 çš„è¿‡ç¨‹</p></blockquote><p>æœ€è¿‘å› ä¸ºæƒ³ç€æ‰‹å¥½å¥½è¯»è¯»ä¹¦ï¼Œç¿»å‡ºäº†å‹ç®±åº•çš„ipadã€‚ï¼ˆå› ä¸ºæ›¾ç»æ‰‹æ¬ ï¼ŒæŠŠç³»ç»Ÿå‡çº§æˆäº† ios12.3.1 å¯¼è‡´å·¨å¡æ— æ¯”ï¼Œåªèƒ½å‹ç®±åº•äº†ï¼‰ã€‚ç„¶åç”¨<a href="https://www.dogedoge.com" target="_blank" rel="noopener">ç‹—å­</a>æœç´¢äº†ä¸€ä¸‹ã€‚ç«Ÿç„¶è®©æˆ‘æ‰¾åˆ°äº†<a href="https://www.v2ex.com/t/608874" target="_blank" rel="noopener">V2exä¸Šçš„ä¸€ä¸ªè®¨è®º</a>ï¼Œä»”ç»†ä¸€çœ‹æ„Ÿè§‰æŒºé è°±ï¼Œæ¥ä¸‹æ¥å°±æäº†ã€‚</p><blockquote><p>ä¸‹é¢åŸºæœ¬ä¸Šéƒ½æ˜¯åºŸè¯ï¼Œä¼šç©ç›´æ¥çœ‹ v2 çš„å¸–å­åº”è¯¥å°±å¯ä»¥æå®šäº†ï¼Œä¸Šé¢è´´å‡ºäº† GitHub ä¸Šé¡¹ç›®çš„åœ°å€ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸€é”®æ“ä½œã€‚</p></blockquote><p>æ ¹æ®çš„å¸–å­ç»™å‡ºçš„ github é“¾æ¥æŸ¥çœ‹é¡¹ç›®ï¼Œå‘ç°è¯¥é¡¹ç›®å·²ç»ä¸å†ç»´æŠ¤äº†ï¼Œä½†æ˜¯å¥½åœ¨é¡¹ç›®åˆç»™å‡ºäº†ä¸€ä¸ªæ–°çš„åœ°å€ã€‚èµ¶ç´§è¿›å…¥æ–°çš„é¡¹ç›®çœ‹ä¸€ä¸‹ã€‚</p><p>é¡¹ç›®æç¤ºä¸­æŒ‡æ˜äº†å¯ä»¥é™çº§åˆ°10.3.3 çš„è®¾å¤‡ä¸º iPhone 5s, iPad Air, iPad Mini 2 (Not iPad4,6)ã€‚</p><p>å…¶ä»–è¿˜æœ‰å¯ä»¥é™çº§åˆ°8.4.1 çš„è®¾å¤‡ä¸ºiPhone 5, iPhone 4s, iPad 2, iPad 3, iPad 4, iPad Mini 1, iPod 5ã€‚</p><p>ä»¥åŠå¯ä»¥é™çº§åˆ° 6.1.3 çš„è®¾å¤‡ iPhone 4s, iPad 2 (Not iPad2,4)ã€‚</p><p>éœ€è¦çš„å°ä¼™ä¼´ä»¬è‡ªå–ã€‚æˆ‘åªå®éªŒäº†ipad mini2 å¯ä»¥æˆåŠŸé™çº§ï¼Œå…¶ä»–çš„å¤§å®¶çƒ§é¦™ç¥·å‘Šå§ã€‚^_^</p><p>é¦–å…ˆå°†é¡¹ç›®å…‹éš†åˆ°æœ¬åœ°ï¼Œæ¥ç€è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œå¹¶æ‰§è¡Œ <code>pip3 install -r requirements.txt</code> å®‰è£…é¡¹ç›®éœ€è¦çš„æ‰©å±•ã€‚ï¼ˆç¡®ä¿å½“å‰ç³»ç»Ÿä¸­å·²ç»å®‰è£…äº†python3ï¼Œè‡³å°‘ä¸º3.5ï¼‰</p><p>ä¸‹è½½ ios 10.3.3 çš„é•œåƒæ–‡ä»¶ã€‚å¯ä»¥ä½¿ç”¨<a href="https://www.i4.cn/firmware_iPad_iPad%20mini%202__A1489_10.3.3__.html" target="_blank" rel="noopener">çˆ±æ€åŠ©æ‰‹</a>æä¾›çš„é•œåƒï¼Œä¸‹è½½é€Ÿåº¦é‚£æ˜¯æ æ çš„ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯å°† ipad è¿›å…¥ DFU æ¨¡å¼ã€‚ï¼ˆè¿™é‡Œåæ§½ä¸€ä¸‹ï¼Œå› ä¸ºæˆ‘ä¸æ€ä¹ˆç”¨ ios çš„è®¾å¤‡ï¼Œä¸çŸ¥é“ DFU åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Œæœç´¢äº†åŠå¤©ï¼Œå¾ˆå¤šäººç»™å‡ºçš„æ–¹æ³•æ ¹æœ¬ä¸æ˜¯è¿›å…¥ DFUçš„æ–¹æ³•ï¼Œæœ€åè¿˜æ˜¯åœ¨åˆšæ‰é‚£ä¸ª V2 è®¨è®ºé‡Œé¢çœ‹åˆ°æœ‰æœ‹å‹çš„å›å¤ï¼Œæ‰æ˜ç™½äº†è¯¥æ€ä¹ˆè¿›å…¥ DFU æ¨¡å¼ã€‚ï¼‰</p><p><strong> è¿™é‡Œè¯´ä¸€ä¸‹è¿›å…¥ DFU æ¨¡å¼çš„æ–¹æ³•ï¼Œ </strong></p><ol><li>å°† ipad é“¾æ¥ç”µè„‘</li><li>ç» ipad å…³æœº</li><li>é•¿æŒ‰ç”µæºé”®å’Œ home é”® 10 ç§’ä»¥ä¸Šç„¶ååªæ¾å¼€ç”µæºé”®å¹¶ä¿æŒ home ä¸€ç›´æŒ‰ç€ï¼Œå½“ç”µè„‘ä¸Šæç¤ºå·²ç»è¿›å…¥æ¢å¤æ¨¡å¼åˆ™å¯ä»¥æ¾å¼€ home é”®äº†ã€‚è¿™ä¸ªæ—¶å€™ ipad å±å¹•æ˜¯é»‘çš„ã€‚</li></ol><p><img src="http://static.xiangdangnian.net.cn/blog/sssdfsdfsdjkl23jk23j4lk23j423lklkwfjs.png" alt="DFU æ¨¡å¼"></p><p>ç„¶ååœ¨é¡¹ç›®é‡Œé¢æ‰§è¡Œ <code>./vieux -i .....ipsw</code>ã€‚ åé¢çš„çœç•¥å·è¡¨ç¤ºåˆšæ‰ä¸‹è½½çš„ ios10.3.3 çš„é•œåƒæ–‡ä»¶ã€‚</p><p>æœ€åå°½æ˜¯ç­‰å¾…äº†ã€‚</p><p>æˆ‘çš„ä¸€æ¬¡æˆåŠŸï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¥½åˆ†äº«çš„å•¦ï¼Œå°±å…ˆè®°å½•åˆ°è¿™é‡Œå•¦ã€‚</p><p>å¯¹äº†ï¼Œæœ€åè¯´ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®åº”è¯¥æ˜¯åªèƒ½åœ¨ macOS ä¸‹æ“ä½œï¼Œwindows æ˜¯ä¸æ”¯æŒçš„ã€‚åœ¨ä¸€ä¸ªå°±æ˜¯æœ€å¥½å¯ä»¥ä½¿ç”¨æ¢¯å­ï¼Œè¦ä¸ç„¶é¡¹ç›®ä¸‹è½½çš„ä¸€ä¸‹ä¸œè¥¿å¯èƒ½ä¼šå¾ˆæ…¢ï¼Œæˆ–è€…å®Œå…¨ä¸‹ä¸æ¥ã€‚</p><p>æœ€åæ„Ÿè°¢ V2exï¼Œå•¦å•¦å•¦å•¦åˆå¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨ Ipad å•¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ios </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rediså­¦ä¹ ç¬”è®°-----åŸºæœ¬æ•°æ®ç±»å‹ä¹‹æœ‰åºé›†åˆ</title>
      <link href="/2019/12/26/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B9%8B%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88/"/>
      <url>/2019/12/26/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B9%8B%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ‰åºé›†åˆï¼ˆsort-setsï¼‰"><a href="#æœ‰åºé›†åˆï¼ˆsort-setsï¼‰" class="headerlink" title="æœ‰åºé›†åˆï¼ˆsort setsï¼‰"></a>æœ‰åºé›†åˆï¼ˆsort setsï¼‰</h1><ul><li>ä¸é›†åˆç±»å‹ï¼ŒåŒºåˆ«æ˜¯é›†åˆä¸èƒ½å­—æ®µæ’åºï¼Œè€Œæœ‰åºé›†åˆå¯ä»¥è®¾ç½®é¢å¤–çš„ä¼˜å…ˆçº§(score)å‚æ•°æ¥ä¸ºæˆå‘˜æ’åºã€‚</li><li>ä½¿ç”¨åœºæ™¯ï¼šå½“ä½ éœ€è¦ä¸€ä¸ªæœ‰åºå¹¶ä¸”ä¸é‡å¤çš„é›†åˆåˆ—è¡¨çš„æ—¶å€™ï¼Œä½¿ç”¨æœ‰åºé›†åˆã€‚ </li></ul><h2 id="ZADD"><a href="#ZADD" class="headerlink" title="ZADD"></a>ZADD</h2><ul><li>å°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ä»¥åŠå…¶ score å€¼åŠ å…¥åˆ° key ä¸­ã€‚</li><li>å¦‚æœæŸä¸ªå…ƒç´ å·²ç»åœ¨æœ‰åºé›†åˆä¸­ï¼Œåˆ™æ›´æ–°è¯¥å…ƒç´ çš„ score å€¼ã€‚</li><li>score å€¼å¯ä»¥æ˜¯æ•´æ•°æˆ–åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚</li></ul><pre><code>127.0.0.1:6379&gt; zadd language 100 php 90 java 80 js(integer) 3</code></pre><h2 id="ZCARD"><a href="#ZCARD" class="headerlink" title="ZCARD"></a>ZCARD</h2><ul><li>è¿”å›æœ‰åºé›†åˆ key çš„å€¼å¾—ä¸ªæ•°</li><li>å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› 0</li></ul><pre><code>127.0.0.1:6379&gt; zcard language(integer) 3127.0.0.1:6379&gt; zcard xxxxx(integer) 0</code></pre><h2 id="ZCOUNT"><a href="#ZCOUNT" class="headerlink" title="ZCOUNT"></a>ZCOUNT</h2><ul><li>è¿”å›æœ‰åºé›†åˆ key ä¸­ï¼Œscore çš„å€¼åœ¨ min å’Œ max ç›´æ¥çš„æˆå‘˜ä¸ªæ•°ã€‚ï¼ˆåŒ…å« min å’Œ maxï¼‰</li><li>å¦‚æœåœ¨ç»Ÿè®¡æ—¶ï¼Œä¸éœ€è¦åŒ…å«æŸä¸ª scoreæ—¶ ï¼Œåˆ™æ·»åŠ ä¸€ä¸ª ( å³å¯ã€‚<br><code>`</code><br>127.0.0.1:6379&gt; zcount language 80 100<br>(integer) 3</li></ul><p>127.0.0.1:6379&gt; zcount language 80 (100<br>(integer) 2</p><pre><code>## ZSCORE- è¿”å›æœ‰åºé›†åˆ key ä¸­ï¼Œæˆå‘˜çš„scoreå€¼</code></pre><p>127.0.0.1:6379&gt; zscore language php<br>â€œ100â€</p><pre><code>## ZRANGE- æ ¼å¼ï¼šzrange key start stop [withscores]- æ ¹æ®ç´¢å¼•è¿”å›å…ƒç´ - withscores å‚æ•°å¯ä»¥è¿åŒå…ƒç´ çš„ score ä¸€èµ·è¿”å›ã€‚- start ä¸º 0ï¼Œstop ä¸º -1ï¼Œå³å¯è¿”å›æ•´ä¸ªæœ‰åºé›†åˆã€‚</code></pre><p>127.0.0.1:6379&gt; zrange language 0 2<br>1) â€œjsâ€<br>2) â€œjavaâ€<br>3) â€œphpâ€</p><p>127.0.0.1:6379&gt; zrange language 0 2 withscores<br>1) â€œjsâ€<br>2) â€œ80â€<br>3) â€œjavaâ€<br>4) â€œ90â€<br>5) â€œphpâ€<br>6) â€œ100â€</p><pre><code>## ZREVRANGE- åŒ zrange åŸºæœ¬ä¸€è‡´ï¼ŒåŒºåˆ«æ˜¯ zrevrange æ˜¯åè€…æ¥çš„ã€‚</code></pre><p>127.0.0.1:6379&gt; zrevrange language 0 2<br>1) â€œphpâ€<br>2) â€œjavaâ€<br>3) â€œjsâ€</p><p>127.0.0.1:6379&gt; zrevrange language 0 2 withscores<br>1) â€œphpâ€<br>2) â€œ100â€<br>3) â€œjavaâ€<br>4) â€œ90â€<br>5) â€œjsâ€<br>6) â€œ80â€</p><pre><code>## ZRANGEBYSCORE- è¿”å›æœ‰åºé›†åˆ key ä¸­ï¼Œscore çš„å€¼åœ¨ min å’Œ max ç›´æ¥çš„æˆå‘˜ã€‚ï¼ˆåŒ…å« min å’Œ maxï¼‰- å¦‚æœä¸éœ€è¦åŒ…å«æŸä¸ª scoreæ—¶ ï¼Œåˆ™æ·»åŠ ä¸€ä¸ª ( å³å¯ã€‚</code></pre><p>127.0.0.1:6379&gt; zrangebyscore language 80 100<br>1) â€œjsâ€<br>2) â€œjavaâ€<br>3) â€œphpâ€</p><p>127.0.0.1:6379&gt; zrangebyscore language 80 100 withscores<br>1) â€œjsâ€<br>2) â€œ80â€<br>3) â€œjavaâ€<br>4) â€œ90â€<br>5) â€œphpâ€<br>6) â€œ100â€</p><p>127.0.0.1:6379&gt; zrangebyscore language 80 (100<br>1) â€œjsâ€<br>2) â€œjavaâ€</p><pre><code>## ZRANK- è¿”å›æœ‰åºé›†åˆ key ä¸­æˆå‘˜ member åœ¨é›†åˆä¸­çš„æ’ååºå·ã€‚ï¼ˆæ’åæŒ‰ score å€¼ä»å°åˆ°å¤§çš„é¡ºåºï¼‰ã€‚- æ’ååºå·ä» 0 å¼€å§‹ã€‚(å³ åºå·ä¸º 0 çš„ score å€¼æœ€å°)</code></pre><p>127.0.0.1:6379&gt; zrank language php<br>(integer) 2</p><p>127.0.0.1:6379&gt; zrank language js<br>(integer) 0</p><p>127.0.0.1:6379&gt; zrank language java<br>(integer) 1</p><pre><code>## ZREVRANK - åŒä¸Šé¢çš„ zrankã€‚åŒºåˆ«æ˜¯ zrevrank çš„æ’åºæ˜¯ä»å¤§åˆ°å°</code></pre><p>127.0.0.1:6379&gt; zrevrank language php<br>(integer) 0</p><p>127.0.0.1:6379&gt; zrevrank language js<br>(integer) 2</p><p>127.0.0.1:6379&gt; zrevrank language java<br>(integer) 1</p><pre><code>## ZINCRBY- æ ¼å¼ï¼šzincrby key increment member- å‘æœ‰åºé›†åˆ key ä¸­çš„æˆå‘˜ member çš„ score å€¼è¿›è¡Œå¢åŠ ã€‚- å¦‚æœ key ä¸­ä¸å­˜åœ¨ memberï¼Œåˆ™åœ¨ key ä¸­åˆ›å»ºä¸€ä¸ª memberï¼Œå¹¶ä¸”è¯¥ member çš„ score ä¸º è®¾ç½®çš„å€¼ã€‚</code></pre><p>127.0.0.1:6379&gt; zincrby language 100 php<br>â€œ200â€</p><p>127.0.0.1:6379&gt; zincrby language 100 python<br>â€œ100â€</p><pre><code>## ZREM- ä»é›†åˆä¸­åˆ é™¤æŒ‡å®š memberã€‚</code></pre><p> 127.0.0.1:6379&gt; zrem language python<br>(integer) 1</p><p>127.0.0.1:6379&gt; zrange language 0 -1 withscores<br>1) â€œjsâ€<br>2) â€œ80â€<br>3) â€œjavaâ€<br>4) â€œ90â€<br>5) â€œphpâ€<br>6) â€œ200â€<br> <code>`</code></p>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rediså­¦ä¹ ç¬”è®°-----åŸºæœ¬æ•°æ®ç±»å‹ä¹‹å“ˆå¸Œï¼ˆHASHï¼‰</title>
      <link href="/2019/12/12/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B9%8B%E5%93%88%E5%B8%8C%EF%BC%88HASH%EF%BC%89/"/>
      <url>/2019/12/12/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B9%8B%E5%93%88%E5%B8%8C%EF%BC%88HASH%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="å“ˆå¸Œï¼ˆHASHï¼‰"><a href="#å“ˆå¸Œï¼ˆHASHï¼‰" class="headerlink" title="å“ˆå¸Œï¼ˆHASHï¼‰"></a>å“ˆå¸Œï¼ˆHASHï¼‰</h1><blockquote><p>å“ˆå¸Œå°±åƒæ˜¯ä¸€ä¸ªå¾®ç¼©ç‰ˆçš„ redisã€‚ç”±é”®å€¼å¯¹ç»„æˆã€‚ä¸€èˆ¬è®²æ•°æ®åº“ä¸­çš„è®°å½•å–å‡ºç›´æ¥æ”¾å…¥ redis ä¸­ä½¿ç”¨ã€‚</p></blockquote><h2 id="HSETã€HMSET"><a href="#HSETã€HMSET" class="headerlink" title="HSETã€HMSET"></a>HSETã€HMSET</h2><ul><li>è®¾ç½®å•ä¸ªkey</li><li>ä¸€æ¬¡è®¾ç½®å¤šä¸ªkey</li></ul><blockquote><p>ç»è¿‡æµ‹è¯•å½“å‰ç‰ˆæœ¬5.0.4ï¼Œhset ä¹Ÿå¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ª key</p></blockquote><h3 id="hset-è®¾ç½®å¤šä¸ª-key"><a href="#hset-è®¾ç½®å¤šä¸ª-key" class="headerlink" title="hset è®¾ç½®å¤šä¸ª key"></a>hset è®¾ç½®å¤šä¸ª key</h3><pre><code>&gt; hset user:1 name jack email jack@qq.com(integer) 2&gt; hget user:1 name&quot;jack&quot;&gt; hget user:1 email&quot;jack@qq.com&quot;</code></pre><h3 id="hset-è®¾ç½®å•ä¸ª-key"><a href="#hset-è®¾ç½®å•ä¸ª-key" class="headerlink" title="hset è®¾ç½®å•ä¸ª key"></a>hset è®¾ç½®å•ä¸ª key</h3><pre><code>&gt; hset user:2 name tom email tom@qq.com(integer) 2&gt; hget user:2 name&quot;tom&quot;&gt; hget user:2 email&quot;tom@qq.com&quot;</code></pre><h2 id="HGETã€HMGET"><a href="#HGETã€HMGET" class="headerlink" title="HGETã€HMGET"></a>HGETã€HMGET</h2><ul><li>hget è·å–å•ä¸ª key çš„å€¼</li><li>hmget ä¸€æ¬¡è·å–å¤šä¸ª key çš„å€¼</li></ul><pre><code>&gt; hmget user:2 name email1) &quot;tom&quot;2) &quot;tom@qq.com&quot;</code></pre><h2 id="HEDL"><a href="#HEDL" class="headerlink" title="HEDL"></a>HEDL</h2><ul><li>åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šçš„key</li></ul><pre><code>&gt; hdel user:2 name(integer) 1&gt; hget user:2 name(nil)&gt; hget user:2 email&quot;tom@qq.com&quot;</code></pre><h2 id="HSETNX"><a href="#HSETNX" class="headerlink" title="HSETNX"></a>HSETNX</h2><ul><li>è®¾ç½®æŒ‡å®škeyçš„å€¼ï¼Œå¦‚æœå¯ä»¥å·²ç»å­˜åœ¨ï¼Œåˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œ</li></ul><pre><code>&gt; hsetnx user:2 email 2@qq.com(integer) 0&gt; hsetnx user:2 name tome(integer) 1&gt; hmget user:2 name email1) &quot;tome&quot;2) &quot;tom@qq.com&quot;</code></pre><h2 id="HVALS"><a href="#HVALS" class="headerlink" title="HVALS"></a>HVALS</h2><p>-è¿”å›æ‰€æœ‰æ ¼å€¼</p><pre><code>&gt; hvals user:21) &quot;tom@qq.com&quot;2) &quot;tome&quot;</code></pre><h2 id="HKEYS"><a href="#HKEYS" class="headerlink" title="HKEYS"></a>HKEYS</h2><ul><li>è¿”å›æ‰€æœ‰çš„é”®</li></ul><pre><code>&gt; hkeys user:21) &quot;email&quot;2) &quot;name&quot;</code></pre><h2 id="HGETALL"><a href="#HGETALL" class="headerlink" title="HGETALL"></a>HGETALL</h2><ul><li>è¿”å›æ‰€æœ‰çš„é”®å’Œå€¼</li><li>è¿”å›å€¼ä¸­ï¼Œæ¯ä¸ªå­—æ®µåçš„ä¸‹ä¸€ä¸ªå°±æ˜¯ä»–çš„å€¼</li></ul><pre><code>&gt; hgetall user:21) &quot;email&quot;2) &quot;tom@qq.com&quot;3) &quot;name&quot;4) &quot;tome&quot;</code></pre><h2 id="HEXISTS"><a href="#HEXISTS" class="headerlink" title="HEXISTS"></a>HEXISTS</h2><ul><li>æ£€æŸ¥æŒ‡å®šé”®æ˜¯å¦å­˜åœ¨</li></ul><pre><code>&gt; hexists user:2 class(integer) 0&gt; hexists user:2 email(integer) 1</code></pre><h2 id="HINCRBY"><a href="#HINCRBY" class="headerlink" title="HINCRBY"></a>HINCRBY</h2><ul><li>å¯¹å“ˆå¸Œä¸­æŒ‡å®šçš„é”®è¿›è¡Œè‡ªå¢æ“ä½œï¼Œå¦‚æœå¯¹åº”çš„é”®ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºã€‚å¦‚æœå­˜åœ¨ï¼Œç›´æ¥æ–°å¢</li><li>æ‰€æ“ä½œçš„é”®çš„å€¼å¿…é¡»ä¸ºæ•´å‹</li></ul><pre><code>&gt; hincrby user:2 old 1(integer) 1&gt; hgetall user:21) &quot;email&quot;2) &quot;tom@qq.com&quot;3) &quot;name&quot;4) &quot;tome&quot;5) &quot;sex&quot;6) &quot;man&quot;7) &quot;old&quot;8) &quot;1&quot;&gt; hincrby user:2 old 2(integer) 3&gt; hgetall user:21) &quot;email&quot;2) &quot;tom@qq.com&quot;3) &quot;name&quot;4) &quot;tome&quot;5) &quot;sex&quot;6) &quot;man&quot;7) &quot;old&quot;8) &quot;3&quot;&gt; hincrby user:2 name 1(error) ERR hash value is not an integer</code></pre><h2 id="HINCRBYFLOAT"><a href="#HINCRBYFLOAT" class="headerlink" title="HINCRBYFLOAT"></a>HINCRBYFLOAT</h2><ul><li>åŒä¸Šé¢çš„ hincrbyï¼Œåªä¸è¿‡æ”¯æŒçš„å€¼æ˜¯ float ç±»å‹</li></ul><h2 id="HLEN"><a href="#HLEN" class="headerlink" title="HLEN"></a>HLEN</h2><ul><li>è¿”å›æŒ‡å®šå“ˆå¸Œæ‰€åŒ…å«çš„å­—æ®µæ•°é‡ï¼ˆkey çš„æ•°é‡ï¼‰</li></ul><pre><code>&gt; hlen user:2(integer) 4&gt; hgetall user:21) &quot;email&quot;2) &quot;tom@qq.com&quot;3) &quot;name&quot;4) &quot;tome&quot;5) &quot;sex&quot;6) &quot;man&quot;7) &quot;old&quot;8) &quot;3&quot;</code></pre><h2 id="HSTRLEN"><a href="#HSTRLEN" class="headerlink" title="HSTRLEN"></a>HSTRLEN</h2><ul><li>è¿”å›æŒ‡å®š key çš„ value çš„å­—ç¬¦ä¸²é•¿åº¦</li><li>å¦‚æœ value æˆ– å“ˆå¸Œä¸å­˜åœ¨ï¼Œåˆ™è¿”å›0</li></ul><pre><code>&gt; hstrlen user:2 name(integer) 4&gt; hget user:2 name&quot;tome&quot;</code></pre>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rediså­¦ä¹ ç¬”è®°-----åŸºæœ¬æ•°æ®ç±»å‹ä¹‹é›†åˆ</title>
      <link href="/2019/12/10/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B9%8B%E9%9B%86%E5%90%88/"/>
      <url>/2019/12/10/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B9%8B%E9%9B%86%E5%90%88/</url>
      
        <content type="html"><![CDATA[<h1 id="é›†åˆï¼ˆSetï¼‰"><a href="#é›†åˆï¼ˆSetï¼‰" class="headerlink" title="é›†åˆï¼ˆSetï¼‰"></a>é›†åˆï¼ˆSetï¼‰</h1><blockquote><p>ä¸ list ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ set ä¸­çš„å€¼æ˜¯ä¸é‡å¤çš„ã€‚</p></blockquote><h2 id="SADD"><a href="#SADD" class="headerlink" title="SADD"></a>SADD</h2><ul><li>å°†ä¸€ä¸ªæˆ–å¤šä¸ªmemberå…ƒç´ åŠ å…¥åˆ°é›†åˆkeyå½“ä¸­ï¼Œå·²ç»å­˜åœ¨äºé›†åˆçš„memberå…ƒç´ å°†è¢«å¿½ç•¥ã€‚</li><li>å‡å¦‚keyä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªåªåŒ…å«memberå…ƒç´ ä½œæˆå‘˜çš„é›†åˆã€‚</li><li>å½“keyä¸æ˜¯é›†åˆç±»å‹æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</li></ul><pre><code>&gt; sadd k1 v1 v2 v3(integer) 3</code></pre><h2 id="SMEMBERS"><a href="#SMEMBERS" class="headerlink" title="SMEMBERS"></a>SMEMBERS</h2><ul><li>è¿”å›é›†åˆkeyä¸­çš„æ‰€æœ‰æˆå‘˜ã€‚</li></ul><pre><code>&gt; smembers k11) &quot;v2&quot;2) &quot;v3&quot;3) &quot;v1&quot;</code></pre><h2 id="SREM"><a href="#SREM" class="headerlink" title="SREM"></a>SREM</h2><ul><li>ç§»é™¤é›†åˆkeyä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªmemberå…ƒç´ ï¼Œä¸å­˜åœ¨çš„memberå…ƒç´ ä¼šè¢«å¿½ç•¥ã€‚</li><li>å½“keyä¸æ˜¯é›†åˆç±»å‹ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</li></ul><pre><code>&gt; srem k1 v2 v1(integer) 2&gt; smembers k11) &quot;v3&quot;</code></pre><h2 id="SISMEMBER"><a href="#SISMEMBER" class="headerlink" title="SISMEMBER"></a>SISMEMBER</h2><ul><li>åˆ¤æ–­ member å…ƒç´ æ˜¯å¦æ˜¯é›†åˆ key çš„æˆå‘˜ã€‚</li><li>è¿”å› 1ï¼Œåˆ™ member å…ƒç´ åœ¨é›†åˆä¸­ã€‚è¿”å› 0ï¼Œåˆ™ä¸åœ¨é›†åˆä¸­ã€‚</li></ul><pre><code>&gt; sismember k1 v3(integer) 1&gt; sismember k1 v2(integer) 0</code></pre><h2 id="SCARD"><a href="#SCARD" class="headerlink" title="SCARD"></a>SCARD</h2><ul><li>è¿”å›é›†åˆkeyçš„åŸºæ•°(é›†åˆä¸­å…ƒç´ çš„æ•°é‡)ã€‚</li></ul><pre><code>&gt; scard k1(integer) 1&gt; sadd k1 v4 v5(integer) 2&gt; scard k1(integer) 3</code></pre><h2 id="SMOVE"><a href="#SMOVE" class="headerlink" title="SMOVE"></a>SMOVE</h2><ul><li>å°† member å…ƒç´ ä» source é›†åˆç§»åŠ¨åˆ° destination é›†åˆã€‚</li><li>å¦‚æœ source é›†åˆä¸å­˜åœ¨æˆ–ä¸åŒ…å«æŒ‡å®šçš„ member å…ƒç´ ï¼Œåˆ™å‘½ä»¤ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œä»…è¿”å›0ã€‚</li><li>å½“ destination é›†åˆå·²ç»åŒ…å« member å…ƒç´ æ—¶ï¼Œåˆ™å‘½ä»¤åªæ˜¯ç®€å•åœ°å°† source é›†åˆä¸­çš„ member å…ƒç´ åˆ é™¤ã€‚</li><li>å½“sourceæˆ–destinationä¸æ˜¯é›†åˆç±»å‹æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</li></ul><pre><code>&gt; smembers k11) &quot;v4&quot;2) &quot;v5&quot;3) &quot;v3&quot;&gt; smembers k2(empty list or set)&gt; smove k1 k2 v4(integer) 1&gt; smembers k11) &quot;v5&quot;2) &quot;v3&quot;&gt; smembers k21) &quot;v4&quot;</code></pre><h2 id="SPOP"><a href="#SPOP" class="headerlink" title="SPOP"></a>SPOP</h2><ul><li>ç§»é™¤å¹¶è¿”å›é›†åˆä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ ã€‚</li><li>è¢«ç§»é™¤çš„éšæœºå…ƒç´ ã€‚</li><li>å½“keyä¸å­˜åœ¨æˆ–keyæ˜¯ç©ºé›†æ—¶ï¼Œè¿”å›nilã€‚</li></ul><pre><code>&gt; smembers k11) &quot;v5&quot;2) &quot;v3&quot;&gt; spop k1&quot;v3&quot;&gt; smembers k11) &quot;v5&quot;&gt; spop k1&quot;v5&quot;&gt; smembers k1(empty list or set)&gt; spop k1(nil)</code></pre><h2 id="SRANDMEMBER"><a href="#SRANDMEMBER" class="headerlink" title="SRANDMEMBER"></a>SRANDMEMBER</h2><ul><li>è¿”å›é›†åˆä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ ã€‚(ä¸åˆ é™¤)</li><li>è¿”å›å€¼ä¸ºè¢«é€‰ä¸­çš„éšæœºå…ƒç´ ã€‚ å½“ key ä¸å­˜åœ¨æˆ– key æ˜¯ç©ºé›†æ—¶ï¼Œè¿”å›nilã€‚</li></ul><pre><code>&gt; sadd k1 v1 v2 v3(integer) 3&gt; smembers k11) &quot;v2&quot;2) &quot;v3&quot;3) &quot;v1&quot;&gt; srandmember k1&quot;v3&quot;&gt; smembers k11) &quot;v2&quot;2) &quot;v3&quot;3) &quot;v1&quot;</code></pre><h2 id="SINTER"><a href="#SINTER" class="headerlink" title="SINTER"></a>SINTER</h2><ul><li>è¿”å›ç»™å®šçš„é›†åˆçš„äº¤é›†ã€‚</li><li>å½“ç»™å®šé›†åˆå½“ä¸­æœ‰ä¸€ä¸ªç©ºé›†æ—¶ï¼Œç»“æœä¹Ÿä¸ºç©ºé›†(æ ¹æ®é›†åˆè¿ç®—å®šå¾‹)ã€‚</li></ul><pre><code>&gt; smembers k11) &quot;v2&quot;2) &quot;v3&quot;3) &quot;v1&quot;&gt; smembers k21) &quot;v4&quot;2) &quot;v1&quot;3) &quot;v2&quot;4) &quot;v5&quot;5) &quot;v6&quot;&gt; sinter k1 k21) &quot;v2&quot;2) &quot;v1&quot;</code></pre><h2 id="SINTERSTORE"><a href="#SINTERSTORE" class="headerlink" title="SINTERSTORE"></a>SINTERSTORE</h2><ul><li>åŸºæœ¬ç­‰åŒäº sinter å‘½ä»¤ï¼Œä½†å®ƒå°†ç»“æœä¿å­˜åœ¨ä¸€ä¸ªæ–°çš„é›†åˆé‡Œã€‚</li><li>å¦‚æœè¦ä¿å­˜çš„é›†åˆå·²ç»å­˜åœ¨ï¼Œåˆ™å°†å…¶è¦†ç›–ã€‚</li><li>è¿”å›ç»“æœé›†åˆä¸­æˆå‘˜çš„æ•°é‡ã€‚</li></ul><pre><code>&gt; smembers k11) &quot;v2&quot;2) &quot;v3&quot;3) &quot;v1&quot;&gt; smembers k21) &quot;v4&quot;2) &quot;v1&quot;3) &quot;v2&quot;4) &quot;v5&quot;5) &quot;v6&quot;&gt; sinterstore k3 k1 k2(integer) 2&gt; smembers k31) &quot;v2&quot;2) &quot;v1&quot;</code></pre><h2 id="SUNION"><a href="#SUNION" class="headerlink" title="SUNION"></a>SUNION</h2><ul><li>è¿”å›ç»™å®šçš„æ‰€æœ‰é›†åˆçš„å¹¶é›†ã€‚</li></ul><pre><code>&gt; smembers k11) &quot;v2&quot;2) &quot;v3&quot;3) &quot;v1&quot;&gt; smembers k21) &quot;v4&quot;2) &quot;v1&quot;3) &quot;v2&quot;4) &quot;v5&quot;5) &quot;v6&quot;&gt; sunion k1 k21) &quot;v4&quot;2) &quot;v3&quot;3) &quot;v1&quot;4) &quot;v2&quot;5) &quot;v5&quot;6) &quot;v6&quot;</code></pre><h2 id="SUNIONSTORE"><a href="#SUNIONSTORE" class="headerlink" title="SUNIONSTORE"></a>SUNIONSTORE</h2><ul><li>åŸºæœ¬ç­‰åŒäº sunion å‘½ä»¤ï¼Œä½†å®ƒå°†ç»“æœä¿å­˜åœ¨ä¸€ä¸ªæ–°çš„é›†åˆé‡Œã€‚</li><li>å¦‚æœè¦ä¿å­˜çš„é›†åˆå·²ç»å­˜åœ¨ï¼Œåˆ™å°†å…¶è¦†ç›–ã€‚</li><li>è¿”å›ç»“æœé›†åˆä¸­æˆå‘˜çš„æ•°é‡ã€‚</li></ul><pre><code>&gt; smembers k11) &quot;v2&quot;2) &quot;v3&quot;3) &quot;v1&quot;&gt; smembers k21) &quot;v4&quot;2) &quot;v1&quot;3) &quot;v2&quot;4) &quot;v5&quot;5) &quot;v6&quot;&gt; sunionstore k4 k1 k2(integer) 6&gt; smembers k41) &quot;v4&quot;2) &quot;v3&quot;3) &quot;v1&quot;4) &quot;v2&quot;5) &quot;v5&quot;6) &quot;v6&quot;</code></pre><h2 id="SDIFF"><a href="#SDIFF" class="headerlink" title="SDIFF"></a>SDIFF</h2><ul><li>è¿”å›ç»™å®šçš„æ‰€æœ‰é›†åˆçš„å·®é›†ã€‚</li></ul><pre><code>&gt; smembers tom1) &quot;orange&quot;2) &quot;banner&quot;3) &quot;apple&quot;&gt; smembers jack1) &quot;pants&quot;2) &quot;t-shirt&quot;3) &quot;apple&quot;&gt; sdiff tom jack1) &quot;orange&quot;2) &quot;banner&quot;</code></pre><p>SDIFFSTORE</p><ul><li>åŸºæœ¬ç­‰åŒäº sdiff å‘½ä»¤ï¼Œä½†å®ƒå°†ç»“æœä¿å­˜åœ¨ä¸€ä¸ªæ–°çš„é›†åˆé‡Œã€‚</li><li>å¦‚æœè¦ä¿å­˜çš„é›†åˆå·²ç»å­˜åœ¨ï¼Œåˆ™å°†å…¶è¦†ç›–ã€‚</li><li>è¿”å›ç»“æœé›†åˆä¸­æˆå‘˜çš„æ•°é‡ã€‚</li></ul><pre><code>&gt; smembers tom1) &quot;orange&quot;2) &quot;banner&quot;3) &quot;apple&quot;&gt; smembers jack1) &quot;pants&quot;2) &quot;t-shirt&quot;3) &quot;apple&quot;&gt; sdiffstore new tom jack(integer) 2&gt; smembers new1) &quot;orange&quot;2) &quot;banner&quot;</code></pre>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rediså­¦ä¹ ç¬”è®°-----åŸºæœ¬æ•°æ®ç±»å‹ä¹‹åˆ—è¡¨</title>
      <link href="/2019/12/01/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B9%8B%E5%88%97%E8%A1%A8/"/>
      <url>/2019/12/01/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B9%8B%E5%88%97%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="List-åˆ—è¡¨"><a href="#List-åˆ—è¡¨" class="headerlink" title="List åˆ—è¡¨"></a>List åˆ—è¡¨</h1><h2 id="LPUSHã€RPUSHã€LRANGE"><a href="#LPUSHã€RPUSHã€LRANGE" class="headerlink" title="LPUSHã€RPUSHã€LRANGE"></a>LPUSHã€RPUSHã€LRANGE</h2><ul><li>lpush å¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨çš„å¤´éƒ¨</li><li>rpush å¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨çš„å¤´éƒ¨</li><li>lrange ä»åˆ—è¡¨çš„å¤´éƒ¨æŸ¥çœ‹åˆ—è¡¨ï¼Œå…ƒç´ ä¸‹æ ‡ä» 0 å¼€å§‹ï¼Œ-1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œ-2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨</li></ul><pre><code>&gt; rpush mylist A    //å°† A æ’å…¥åˆ° mylist åˆ—è¡¨çš„å°¾éƒ¨(integer) 1&gt; rpush mylist B    //å°† B æ’å…¥åˆ° mylist åˆ—è¡¨çš„å°¾éƒ¨(integer) 2&gt; lpush mylist first    //å°† first æ’å…¥åˆ° mylist åˆ—è¡¨çš„å¤´éƒ¨(integer) 3&gt; rpush mylist C D E    //å°† Cã€Dã€E æ’å…¥åˆ°åˆ—è¡¨ mylist çš„å°¾éƒ¨(integer) 6&gt; lrange mylist 0 -1    //ä»åˆ—è¡¨çš„å¤´éƒ¨æŸ¥çœ‹åˆ—è¡¨çš„å…¨éƒ¨å†…å®¹1) &quot;first&quot;2) &quot;A&quot;3) &quot;B&quot;4) &quot;C&quot;5) &quot;D&quot;6) &quot;E&quot;&gt; lrange mylist 0 2 //ä»åˆ—è¡¨çš„å¤´éƒ¨æŸ¥çœ‹ mylist åˆ—è¡¨ï¼Œä» 0 å¼€å§‹ï¼Œåˆ° 2 ç»“æŸï¼ˆå…ƒç´ ä¸‹æ ‡ä» 0 å¼€å§‹ï¼Œ-1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œ-2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ï¼‰1) &quot;first&quot;2) &quot;A&quot;3) &quot;B&quot;</code></pre><h2 id="LPOPã€RPOP"><a href="#LPOPã€RPOP" class="headerlink" title="LPOPã€RPOP"></a>LPOPã€RPOP</h2><ul><li>lpop ç§»é™¤å¹¶è¿”å›å¤´éƒ¨å…ƒç´ </li><li>rpop ç§»é™¤å¹¶è¿”å›å°¾éƒ¨å…ƒç´ </li></ul><pre><code>&gt; lrange mylist 0 -11) &quot;first&quot;2) &quot;A&quot;3) &quot;B&quot;4) &quot;C&quot;5) &quot;D&quot;6) &quot;E&quot;&gt; lpop mylist       //ç§»é™¤å¤´éƒ¨å…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ &quot;first&quot;&gt; lrange mylist 0 -11) &quot;A&quot;2) &quot;B&quot;3) &quot;C&quot;4) &quot;D&quot;5) &quot;E&quot;&gt; rpop mylist   //ç§»é™¤å°¾éƒ¨å…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ &quot;E&quot;&gt; lrange mylist 0 -11) &quot;A&quot;2) &quot;B&quot;3) &quot;C&quot;4) &quot;D&quot;&gt; rpop abc  //å½“ abc åˆ—è¡¨ä¸å­˜åœ¨æ—¶ï¼Œè¿”å› nil(nil)</code></pre><h2 id="LINDEX"><a href="#LINDEX" class="headerlink" title="LINDEX"></a>LINDEX</h2><ul><li>è¿”å›åˆ—è¡¨æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ ï¼ˆä¸‹æ ‡ä»0å¼€å§‹ï¼Œ-1 ä¸ºæœ€åä¸€ä¸ªå…ƒç´ ï¼‰</li></ul><pre><code>&gt; lrange mylist 0 -11) &quot;A&quot;2) &quot;B&quot;3) &quot;C&quot;4) &quot;D&quot;&gt; lindex mylist -1&quot;D&quot;&gt; lindex mylist 2&quot;C&quot;</code></pre><h2 id="LTRIM"><a href="#LTRIM" class="headerlink" title="LTRIM"></a>LTRIM</h2><ul><li>è®©åˆ—è¡¨åªä¿ç•™æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼Œä¸åœ¨æŒ‡å®šåŒºé—´ä¹‹å†…çš„å…ƒç´ éƒ½å°†è¢«åˆ é™¤ã€‚ä¸‹æ ‡ä¸ä¹‹å‰ä»‹ç»çš„å†™æ³•éƒ½ä¸€è‡´ï¼Œè¿™é‡Œä¸èµ˜è¿°</li></ul><pre><code>&gt; lrange mylist 0 -11) &quot;A&quot;2) &quot;B&quot;3) &quot;C&quot;4) &quot;D&quot;&gt; ltrim mylist 0 1OK&gt; lrange mylist 0 -11) &quot;A&quot;2) &quot;B&quot;</code></pre>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1ã€Redis å­¦ä¹ ç¬”è®°â€”â€”â€”â€”åŸºæœ¬æ•°æ®ç±»å‹ä¹‹å­—ç¬¦ä¸²</title>
      <link href="/2019/11/27/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B9%8B%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>/2019/11/27/redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B9%8B%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<h2 id="å­—ç¬¦ä¸²ï¼ˆstringï¼‰"><a href="#å­—ç¬¦ä¸²ï¼ˆstringï¼‰" class="headerlink" title="å­—ç¬¦ä¸²ï¼ˆstringï¼‰"></a>å­—ç¬¦ä¸²ï¼ˆstringï¼‰</h2><h3 id="SETã€GET-åŸºæœ¬æ“ä½œ"><a href="#SETã€GET-åŸºæœ¬æ“ä½œ" class="headerlink" title="SETã€GET |åŸºæœ¬æ“ä½œ"></a>SETã€GET |åŸºæœ¬æ“ä½œ</h3><ul><li>ä½¿ç”¨ set å…³é”®å­—è®¾ç½®</li><li>ä½¿ç”¨ get å…³é”®å­—è·å–å­—ç¬¦ä¸²</li><li>å€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬äºŒè¿›åˆ¶ï¼Œä¾‹å¦‚å›¾ç‰‡ï¼‰ï¼Œå€¼ä¸èƒ½è¶…è¿‡512 MB</li></ul><pre><code>&gt; set key valueOK&gt; get key&quot;value&quot;</code></pre><h3 id="APPEND-è¿½åŠ å€¼"><a href="#APPEND-è¿½åŠ å€¼" class="headerlink" title="APPEND |è¿½åŠ å€¼"></a>APPEND |è¿½åŠ å€¼</h3><ul><li>append å‘½ä»¤ï¼Œå¦‚æœ key å­˜åœ¨ï¼Œåˆ™åœ¨ value åè¿½åŠ å€¼ï¼Œä¸å­˜åœ¨ï¼Œåˆ™å…ˆåˆ›å»ºä¸€ä¸ª value ä¸ºç©ºå­—ç¬¦ä¸²çš„ keyï¼Œç„¶ååœ¨è¿½åŠ ã€‚</li></ul><pre><code>&gt; append haha 123(integer) 3&gt; get haha&quot;123&quot;&gt; append haha 456(integer) 6&gt; get haha&quot;123456&quot;</code></pre><h3 id="MSET-ä¸€æ¬¡å­˜å‚¨æˆ–è·å–å¤šä¸ª-key"><a href="#MSET-ä¸€æ¬¡å­˜å‚¨æˆ–è·å–å¤šä¸ª-key" class="headerlink" title="MSET |ä¸€æ¬¡å­˜å‚¨æˆ–è·å–å¤šä¸ª key"></a>MSET |ä¸€æ¬¡å­˜å‚¨æˆ–è·å–å¤šä¸ª key</h3><pre><code>&gt; mset a 10 b 20 c 30OK&gt; mget a b c1) &quot;10&quot;2) &quot;20&quot;3) &quot;30&quot;</code></pre><h3 id="GETSET-è·å–åŸå€¼å¹¶èµ‹äºˆæ–°å€¼"><a href="#GETSET-è·å–åŸå€¼å¹¶èµ‹äºˆæ–°å€¼" class="headerlink" title="GETSET |è·å–åŸå€¼å¹¶èµ‹äºˆæ–°å€¼"></a>GETSET |è·å–åŸå€¼å¹¶èµ‹äºˆæ–°å€¼</h3><ul><li>è·å– key åŸæœ‰çš„å€¼ï¼Œå¹¶èµ‹äºˆæ–°å€¼</li></ul><pre><code>&gt; set num 100OK&gt; getset num 50&quot;100&quot;&gt; get num&quot;50&quot;</code></pre><h3 id="EXISTSã€DEL-åˆ é™¤é”®ã€æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨"><a href="#EXISTSã€DEL-åˆ é™¤é”®ã€æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨" class="headerlink" title="EXISTSã€DEL |åˆ é™¤é”®ã€æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨"></a>EXISTSã€DEL |åˆ é™¤é”®ã€æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨</h3><ul><li>åˆ é™¤æˆåŠŸè¿”å› 1ï¼Œå¤±è´¥è¿”å› 0</li><li>å­˜åœ¨è¿”å› 1ï¼Œä¸å­˜åœ¨è¿”å› 0</li></ul><pre><code>&gt; set abc 123OK&gt; exists def(integer) 0&gt; exists abc(integer) 1&gt; del def(integer) 0&gt; del abc(integer) 1</code></pre><h3 id="TYPE-æŸ¥çœ‹æ•°æ®ç±»å‹æ“ä½œå‘½ä»¤"><a href="#TYPE-æŸ¥çœ‹æ•°æ®ç±»å‹æ“ä½œå‘½ä»¤" class="headerlink" title="TYPE |æŸ¥çœ‹æ•°æ®ç±»å‹æ“ä½œå‘½ä»¤"></a>TYPE |æŸ¥çœ‹æ•°æ®ç±»å‹æ“ä½œå‘½ä»¤</h3><ul><li>æŸ¥è¯¢çš„é”®å­˜åœ¨è¿”å›ç›¸åº”çš„æ•°æ®ç±»å‹ï¼Œä¸å­˜åœ¨è¿”å› none</li></ul><pre><code>&gt; set hello wordOK&gt; type hellostring&gt; type wordnone</code></pre><h3 id="SETEXã€TTLã€PSETEXã€PTTL-è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆ1-ç§’-1000-æ¯«ç§’ï¼‰"><a href="#SETEXã€TTLã€PSETEXã€PTTL-è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆ1-ç§’-1000-æ¯«ç§’ï¼‰" class="headerlink" title="SETEXã€TTLã€PSETEXã€PTTL |è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆ1 ç§’ = 1000 æ¯«ç§’ï¼‰"></a>SETEXã€TTLã€PSETEXã€PTTL |è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆ1 ç§’ = 1000 æ¯«ç§’ï¼‰</h3><ul><li>ä½¿ç”¨ setex è®¾ç½®ä»¥ç§’ä¸ºå•ä½çš„è¿‡æœŸæ—¶é—´</li><li>ä½¿ç”¨ psetex è®¾ç½®ä»¥æ¯«ç§’ä¸ºå•ä½çš„è¿‡æœŸæ—¶é—´</li><li>ä½¿ç”¨ ttl è·å–ä»¥ç§’ä¸ºå•ä½çš„å‰©ä½™æ—¶é—´</li><li>ä½¿ç”¨ pttl è·å–ä»¥æ¯«ç§’ä¸ºå•ä½çš„å‰©ä½™æ—¶é—´<blockquote><p><strong>ä½¿ç”¨ ttl å’Œ pttl æŸ¥è¯¢é”®çš„è¿‡æœŸæ—¶é—´ï¼Œé”®ä¸å­˜åœ¨è¿”å› -2ï¼Œæ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´è¿”å› -1ï¼Œå…¶ä»–æƒ…å†µè¿”å›ä»¥ç§’ä¸ºå•ä½çš„å‰©ä½™æ—¶é—´</strong></p></blockquote></li></ul><pre><code>// ç§’ä¸ºå•ä½&gt; setex hello 10 11111OK&gt; ttl hello(integer) 6&gt; ttl hello(integer) 4&gt; ttl hello(integer) 3&gt; get hello(nil)</code></pre><pre><code>//æ¯«ç§’ä¸ºå•ä½&gt; psetex test 10000 1111OK&gt; pttl test(integer) 8455&gt; pttl test(integer) 7430&gt; pttl test(integer) 6733&gt; get test(nil)</code></pre><h3 id="INCRã€INCRBYã€DECRã€DECRBY-åŸå­é€’å¢é€’å‡"><a href="#INCRã€INCRBYã€DECRã€DECRBY-åŸå­é€’å¢é€’å‡" class="headerlink" title="INCRã€INCRBYã€DECRã€DECRBY |åŸå­é€’å¢é€’å‡"></a>INCRã€INCRBYã€DECRã€DECRBY |åŸå­é€’å¢é€’å‡</h3><ul><li>set ä¸€ä¸ªå€¼ä¸ºæ•´å‹çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ incr æ“ä½œå‘½ä»¤è‡ªå¢</li><li>å¯ä»¥ä½¿ç”¨ incrby æ“ä½œå‘½ä»¤æŒ‡å®šæ­¥é•¿è‡ªå¢</li><li>incr æ˜¯åŸå­æ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´å®¢æˆ·ç«¯ 1 å’Œå®¢æˆ·ç«¯ 2 åŒæ—¶è¯»å‡º10ï¼Œä»–ä»¬ä¿©éƒ½å¯¹å…¶åŠ  1 æ“ä½œï¼Œæœ€ç»ˆçš„å€¼ä¸€å®šæ˜¯12ã€‚</li><li>ç›¸åº”çš„æœ‰ decr å’Œ decrby æ“ä½œå‘½ä»¤è¿›è¡Œé€’å‡æ“ä½œ</li></ul><pre><code>&gt; set count 100OK&gt; incr count(integer) 101&gt; incr count(integer) 102&gt; incrby count 100(integer) 202</code></pre><h3 id="SETNX-ä¸å­˜åœ¨åˆ™è®¾ç½®ï¼Œå­˜åœ¨åˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œ"><a href="#SETNX-ä¸å­˜åœ¨åˆ™è®¾ç½®ï¼Œå­˜åœ¨åˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œ" class="headerlink" title="SETNX |ä¸å­˜åœ¨åˆ™è®¾ç½®ï¼Œå­˜åœ¨åˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œ"></a>SETNX |ä¸å­˜åœ¨åˆ™è®¾ç½®ï¼Œå­˜åœ¨åˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œ</h3><ul><li>set å‘½ä»¤åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå¦‚æœ key å·²ç»å­˜åœ¨ï¼Œåˆ™æ–°å€¼ä¼šè¦†ç›–æ—§å€¼ã€‚</li><li>setnx å‘½ä»¤ï¼Œå¦‚æœ key å­˜åœ¨ï¼Œåˆ™ä¸åšä»»ä½•æ“ä½œï¼Œå¦åˆ™ç­‰åŒäº setã€‚</li></ul><pre><code>&gt; set test 123OK&gt; set test 456OK&gt; get test&quot;456&quot;&gt; setnx test aaa(integer) 0&gt; get test&quot;456&quot;</code></pre><h3 id="STRLEN-è®¡ç®—-value-çš„é•¿åº¦"><a href="#STRLEN-è®¡ç®—-value-çš„é•¿åº¦" class="headerlink" title="STRLEN | è®¡ç®— value çš„é•¿åº¦"></a>STRLEN | è®¡ç®— value çš„é•¿åº¦</h3><pre><code>&gt; set xixi abc123OK&gt; strlen xixi(integer) 6</code></pre>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„ä¸‰åå²</title>
      <link href="/2019/09/27/%E6%88%91%E7%9A%84%E4%B8%89%E5%8D%81%E5%B2%81/"/>
      <url>/2019/09/27/%E6%88%91%E7%9A%84%E4%B8%89%E5%8D%81%E5%B2%81/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ²¡æœ‰æƒ³åˆ°æ—¶é—´è¿‡çš„è¿™ä¹ˆå¿«ï¼Œå°±è¿™ä¹ˆæ¥åˆ°äº†ä¸‰åå²çš„ç”Ÿæ—¥ï¼Œæ€»è§‰å¾—éœ€è¦è®°å½•ç‚¹ä»€ä¹ˆã€‚</p></blockquote><p>æ²¡æœ‰æƒ³ä¸‰åå²æ¥çš„è¿™ä¹ˆå¿«ï¼Œè‡ªå·±è¿˜æ²¡æœ‰å®Œå…¨åšå¥½å‡†å¤‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨LaraDocké…ç½®laravel-echo-severé‡åˆ°çš„å‘</title>
      <link href="/2019/08/15/%E4%BD%BF%E7%94%A8LaraDock%E9%85%8D%E7%BD%AElaravel-echo-sever%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/"/>
      <url>/2019/08/15/%E4%BD%BF%E7%94%A8LaraDock%E9%85%8D%E7%BD%AElaravel-echo-sever%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰æƒ…æè¦ï¼šé¡¹ç›®éœ€è¦ä½¿ç”¨ webSocket è¿›è¡Œé€šä¿¡ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯ <a href="https://laradock.io/" target="_blank" rel="noopener">LaraDock</a> ä½œä¸ºç¯å¢ƒã€‚æ‰€ä»¥ä½¿ç”¨ laravel-echo-serverã€laravel-horizonã€php-worker å®¹å™¨è¿›è¡Œç¯å¢ƒçš„éƒ¨ç½²ã€‚å› ä¸ºå¯¹ Docker å¹¶ä¸æ‡‚ï¼Œä»…ä»…åªæ˜¯ä½¿ç”¨ LaraDockï¼Œæ‰€ä»¥è¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œç‰¹æ­¤è®°å½•ä¸‹æ¥ã€‚</p></blockquote><h2 id="å‘äºŒ-å‚è€ƒèµ„æ–™"><a href="#å‘äºŒ-å‚è€ƒèµ„æ–™" class="headerlink" title="å‘äºŒ å‚è€ƒèµ„æ–™"></a>å‘äºŒ <a href="https://github.com/laradock/laradock/issues/1340#issuecomment-390484505" target="_blank" rel="noopener">å‚è€ƒèµ„æ–™</a></h2><blockquote><p>LaraDock çš„ Nginx ä½¿ç”¨å¤šç«™ç‚¹é…ç½®çš„æ—¶å€™ï¼Œlaravel-echo-server æ— æ³•é“¾æ¥åˆ° web è¿›è¡Œè®¤è¯ã€‚</p></blockquote><p>é€šè¿‡åœ¨ nginx å®¹å™¨é…ç½®ä¸­æ·»åŠ åˆ«å <strong> laradock/docker-compose.yml </strong></p><pre class=" language-yml"><code class="language-yml">### NGINX Server #########################################    nginx:      build:        context: ./nginx        args:          - PHP_UPSTREAM_CONTAINER=${NGINX_PHP_UPSTREAM_CONTAINER}          - PHP_UPSTREAM_PORT=${NGINX_PHP_UPSTREAM_PORT}      volumes:        - ${APP_CODE_PATH_HOST}:${APP_CODE_PATH_CONTAINER}        - ${NGINX_HOST_LOG_PATH}:/var/log/nginx        - ${NGINX_SITES_PATH}:/etc/nginx/sites-available      ports:        - "${NGINX_HOST_HTTP_PORT}:80"        - "${NGINX_HOST_HTTPS_PORT}:443"      depends_on:        - php-fpm      networks:        # before ----        # - frontend        # - backend        # end before ----        frontend:        backend:            aliases:              - my-site.com    ##åˆ«ååœ°å€ï¼Œåœ¨laravel-echo-server.json ä¸­å¡«å†™è¯¥åœ°å€å°±å¯ä»¥äº†</code></pre><p>æ›´æ”¹å®Œé…ç½®ä¹‹åéœ€è¦é‡æ–°æ„å»º nginx å’Œ laravel-echo-server å®¹å™¨ã€‚<br>å¹¶é‡æ–°å¼€å¯ã€‚</p><h2 id="å‘äºŒ"><a href="#å‘äºŒ" class="headerlink" title="å‘äºŒ"></a>å‘äºŒ</h2><blockquote><p>larave-echo-server çš„ ssl è¯ä¹¦</p></blockquote><ol><li>ç›´æ¥é…ç½® ssl è¯ä¹¦ã€‚ï¼ˆä¸æ˜ç™½è¯ä¹¦éœ€è¦å‘åœ¨ç›®å½•çš„ä»€ä¹ˆä½ç½®ï¼Œæ‰€ä»¥ google äº†å¾ˆå¤šå†…å®¹ä¹‹åé€‰æ‹©äº†ä¸‹é¢çš„æ–¹æ³•ã€‚ä»¥åå¦‚æœæœ‰æœºä¼šè¡¥å……ç¬¬ä¸€ç‚¹ï¼‰</li><li>é…ç½® nginx åå‘ä»£ç†ã€‚ <a href="https://github.com/tlaverdure/laravel-echo-server" target="_blank" rel="noopener">laravel-echo-server</a></li></ol><pre class=" language-nginx"><code class="language-nginx"><span class="token comment" spellcheck="true">#ä»¥ä¸‹å†…å®¹éœ€è¦åœ¨ä½ çš„ nginx ç«™ç‚¹é…ç½®æ–‡ä»¶çš„ server{} å—ä¹‹å†…</span><span class="token keyword">location</span> <span class="token operator">/</span>socket<span class="token punctuation">.</span>io <span class="token punctuation">{</span>        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>laravel<span class="token operator">-</span>echo<span class="token operator">-</span><span class="token keyword">server</span><span class="token punctuation">:</span><span class="token number">6001</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">#å¡«å†™é https çš„åœ°å€è¿›è¡Œåå‘ä»£ç†ï¼Œå¦‚æœ Echo å’Œ Nginx åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨å¯ä»¥å¡«å†™ localhost</span>        <span class="token keyword">proxy_http_version</span> <span class="token number">1.1</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Connection <span class="token string">"Upgrade"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><ol start="3"><li>é…ç½® laravel-echo-server é…ç½®æ–‡ä»¶ laravel-echo-server.json ä¸ºå¦‚ä¸‹å†…å®¹</li></ol><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>        <span class="token property">"authHost"</span><span class="token operator">:</span> <span class="token string">"https://laravel-echo-server"</span><span class="token punctuation">,</span> //æ³¨æ„ï¼šæ”¹åœ°å€æŒ‡å‘ web ç«™ç‚¹ï¼Œå³ echo-server æƒ³webç«¯è®¤è¯çš„åœ°å€        <span class="token property">"authEndpoint"</span><span class="token operator">:</span> <span class="token string">"/broadcasting/auth"</span><span class="token punctuation">,</span>        <span class="token property">"clients"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"database"</span><span class="token operator">:</span> <span class="token string">"redis"</span><span class="token punctuation">,</span>        <span class="token property">"databaseConfig"</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token property">"redis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>                        <span class="token property">"port"</span><span class="token operator">:</span> <span class="token string">"6379"</span><span class="token punctuation">,</span>                        <span class="token property">"host"</span><span class="token operator">:</span> <span class="token string">"redis"</span>                <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"devMode"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token property">"host"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"port"</span><span class="token operator">:</span> <span class="token string">"6001"</span><span class="token punctuation">,</span>        <span class="token property">"protocol"</span><span class="token operator">:</span> <span class="token string">"http"</span><span class="token punctuation">,</span>        <span class="token property">"socketio"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"sslCertPath"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"sslKeyPath"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">}</span></code></pre><h2 id="æ“ä½œæŠ€å·§"><a href="#æ“ä½œæŠ€å·§" class="headerlink" title="æ“ä½œæŠ€å·§"></a>æ“ä½œæŠ€å·§</h2><ol><li>ä¸ä½¿ç”¨ -d å‚æ•°å¯ä»¥æ›´å¥½çš„è¿›è¡Œè°ƒè¯•<pre class=" language-shell"><code class="language-shell">docker-compose up laravel-echo-server</code></pre></li><li>ä½¿ç”¨ logs å‚æ•°å¯ä»¥æŸ¥çœ‹è¯¦æƒ…çš„æ—¥å¿—è¾“å‡º<pre class=" language-shell"><code class="language-shell">docker-compose logs laravel-echo-server</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ç¯å¢ƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LaraDock </tag>
            
            <tag> å¼€å‘ç¯å¢ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravelå­¦ä¹ ç¬”è®°</title>
      <link href="/2019/06/18/Laravel%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/06/18/Laravel%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¬¬ä¸€æ­¥ï¼šäº†è§£å‡ ä¸ªå¸¸ç”¨åç§°"><a href="#ç¬¬ä¸€æ­¥ï¼šäº†è§£å‡ ä¸ªå¸¸ç”¨åç§°" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šäº†è§£å‡ ä¸ªå¸¸ç”¨åç§°"></a>ç¬¬ä¸€æ­¥ï¼šäº†è§£å‡ ä¸ªå¸¸ç”¨åç§°</h2><blockquote><p>ä»£ç åŸºäº Laravel-5.8 éƒ¨åˆ†å†…å®¹ç»™å…¶ä»–ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œä½†æ•´ä½“é€»è¾‘æ˜¯æ²¡æœ‰å¤ªå¤§å·®åˆ«çš„ã€‚</p></blockquote><blockquote><p>Service Containerã€Service Providerã€Facadesã€Contractsã€‚å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨ Laravel æ¡†æ¶çš„æ—¶å€™è¢«è¿™å‡ ä¸ªè¯ç›´æ¥æè’™åœˆäº†ï¼Œå®Œå…¨ä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€ï¼Œå°¤å…¶æ˜¯åœ¨çœ‹å®Œæ–‡æ¡£ä¹‹åï¼ŒçœŸçš„æƒ³è¯´ WTF ã€‚ä¸è¿‡ä¸çŸ¥é“ä¹Ÿä¸ä¼šå¤ªå½±å“ä½¿ç”¨ã€‚ï¼ˆğŸ˜…æœ‰ä¸ªæœ‹å‹è¯´è¿‡ï¼Œä¸ç®¡ç”¨ç€åœ¨ NB çš„æ¡†æ¶ï¼Œä¾ç„¶å¯ä»¥å†™å‡ºå±ä¸€æ ·çš„ä»£ç ï¼‰</p></blockquote><h3 id="Service-Container"><a href="#Service-Container" class="headerlink" title="Service Container"></a>Service Container</h3><p>ä¸­æ–‡è§£é‡Šï¼šæœåŠ¡å®¹å™¨ ï¼ˆğŸ˜‚ æ˜¯ä¸æ˜¯çœ‹å®Œè¿™ä¸ªç¿»è¯‘æ›´ä¸çŸ¥é“æ˜¯å•¥äº†ï¼‰</p><p>æˆ‘çš„ç†è§£ï¼šä¸€ä¸ªè£…ç€å„ç§å„æ ·çš„æœåŠ¡å®ä¾‹çš„å®¹å™¨ã€‚è¿™äº›æœåŠ¡å°±æ˜¯ Laravel ä¸­çš„å„ç§æ¨¡å—ï¼Œå¦‚ Redisã€Route ç­‰ç­‰ã€‚</p><p>å®ç°ä¸€ä¸ªç®€å•çš„å®¹å™¨ï¼š</p><pre class=" language-php"><code class="language-php"><span class="token keyword">class</span> <span class="token class-name">Container</span><span class="token punctuation">{</span>  <span class="token keyword">protected</span> <span class="token variable">$binds</span><span class="token punctuation">;</span>  <span class="token keyword">protected</span> <span class="token variable">$instances</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">bind</span><span class="token punctuation">(</span><span class="token variable">$abstract</span><span class="token punctuation">,</span> <span class="token variable">$concrete</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//Todo: å‘ container æ·»åŠ ä¸€ç§å¯¹è±¡çš„çš„ç”Ÿäº§æ–¹å¼</span>    <span class="token comment" spellcheck="true">//$abstract: ç¬¬ä¸€ä¸ªå‚æ•° $abstract, ä¸€èˆ¬ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²(æœ‰æ—¶å€™ä¹Ÿä¼šæ˜¯ä¸€ä¸ªæ¥å£), å½“ä½ éœ€è¦ make è¿™ä¸ªç±»çš„å¯¹è±¡çš„æ—¶å€™, ä¼ å…¥è¿™ä¸ªå­—ç¬¦ä¸²(æˆ–è€…æ¥å£), è¿™æ ·make å°±çŸ¥é“åˆ¶é€ ä»€ä¹ˆæ ·çš„å¯¹è±¡äº†</span>    <span class="token comment" spellcheck="true">//$concrete: ç¬¬äºŒä¸ªå‚æ•° $concrete, ä¸€èˆ¬ä¸ºä¸€ä¸ª Closure æˆ–è€… ä¸€ä¸ªå•ä¾‹å¯¹è±¡, ç”¨äºè¯´æ˜åˆ¶é€ è¿™ä¸ªå¯¹è±¡çš„æ–¹å¼</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$concrete</span> <span class="token keyword">instanceof</span> <span class="token class-name">Closure</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">binds</span><span class="token punctuation">[</span><span class="token variable">$abstract</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$concrete</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">instances</span><span class="token punctuation">[</span><span class="token variable">$abstract</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$concrete</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$abstract</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//Todo: ç”Ÿäº§ä¸€ç§å¯¹è±¡</span>    <span class="token comment" spellcheck="true">//$abstract: åœ¨bindæ–¹æ³•ä¸­å·²ç»ä»‹ç»è¿‡</span>    <span class="token comment" spellcheck="true">//$parameters: ç”Ÿäº§è¿™ç§å¯¹è±¡æ‰€éœ€è¦çš„å‚æ•°</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">instances</span><span class="token punctuation">[</span><span class="token variable">$abstract</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">instances</span><span class="token punctuation">[</span><span class="token variable">$abstract</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">array_unshift</span><span class="token punctuation">(</span><span class="token variable">$parameters</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">call_user_func_array</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">binds</span><span class="token punctuation">[</span><span class="token variable">$abstract</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="ä¸ºä»€ä¹ˆç†è§£-IOC-Container-å¯¹äºç†è§£-Laravel-æ¶æ„æ˜¯å¦‚æ­¤çš„é‡è¦ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆç†è§£-IOC-Container-å¯¹äºç†è§£-Laravel-æ¶æ„æ˜¯å¦‚æ­¤çš„é‡è¦ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆç†è§£ IOC Container å¯¹äºç†è§£ Laravel æ¶æ„æ˜¯å¦‚æ­¤çš„é‡è¦ï¼Ÿ"></a>ä¸ºä»€ä¹ˆç†è§£ IOC Container å¯¹äºç†è§£ Laravel æ¶æ„æ˜¯å¦‚æ­¤çš„é‡è¦ï¼Ÿ</h4><blockquote><p>å› ä¸ºåœ¨ Laravel ä¸­ï¼Œä½ æ‰€èƒ½ä½¿ç”¨åˆ°çš„ Laravel çš„ç‰¹æ€§å’ŒåŠŸèƒ½å‡ ä¹å…¨éƒ¨æ˜¯ç”± IOC Container å®ç°çš„ã€‚</p></blockquote><pre class=" language-php"><code class="language-php">Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token string">'HomeController@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢çš„ Cacheã€Route éƒ½æ˜¯é€šè¿‡æŠŠå„è‡ªç±»çš„å®ç° bind åˆ° Container ä¸­ï¼Œç„¶å Container make å‡ºçš„ä¸€ä¸ªå®ä¾‹ã€‚<br>é‚£ä¹ˆå®ƒä»¬æ˜¯åœ¨å“ªé‡Œè¿›è¡Œçš„ bind å‘¢ï¼Ÿæ²¡é”™å°±æ˜¯ Service Provider ä¸­ã€‚</p><h3 id="Service-Provider"><a href="#Service-Provider" class="headerlink" title="Service Provider"></a>Service Provider</h3><p>åœ¨ Laravel ä¸­æœ‰ä¸¤ç§æ–¹å¼æ¥ä½¿ç”¨ IOC Containerï¼š</p><ol><li>é€šè¿‡ Service Provider</li><li>ä¸é€šè¿‡ Service Provider<blockquote><p>ä¸€èˆ¬æƒ…å†µéƒ½æ˜¯ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ã€‚</p></blockquote></li></ol><h4 id="ä¸é€šè¿‡-Service-Provider-æ¥ä½¿ç”¨-IOC-Container"><a href="#ä¸é€šè¿‡-Service-Provider-æ¥ä½¿ç”¨-IOC-Container" class="headerlink" title="ä¸é€šè¿‡ Service Provider æ¥ä½¿ç”¨ IOC Container"></a>ä¸é€šè¿‡ Service Provider æ¥ä½¿ç”¨ IOC Container</h4><p>å®ä¾‹ï¼š</p><pre class=" language-php"><code class="language-php"><span class="token comment" spellcheck="true">//web.php</span><span class="token comment" spellcheck="true">//åˆ›å»ºä¸€ä¸ªç±»</span><span class="token keyword">class</span> <span class="token class-name">Apple</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span><span class="token punctuation">}</span>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//ä½¿ç”¨ app() è¾…åŠ©æ–¹æ³•å°† Apple ç±» bind åˆ° IOC Container ä¸­  </span>  App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//ä½¿ç”¨ App() è¾…åŠ©æ–¹æ³•å°† Apple å®ä¾‹ make å‡ºæ¥</span>  <span class="token variable">$apple</span> <span class="token operator">=</span> App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//ä½¿ç”¨ Apple ç±»ä¸­çš„å±æ€§</span>  <span class="token keyword">return</span> <span class="token variable">$apple</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">id</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="é€šè¿‡-Service-Provider-æ¥ä½¿ç”¨-IOC-Container"><a href="#é€šè¿‡-Service-Provider-æ¥ä½¿ç”¨-IOC-Container" class="headerlink" title="é€šè¿‡ Service Provider æ¥ä½¿ç”¨ IOC Container"></a>é€šè¿‡ Service Provider æ¥ä½¿ç”¨ IOC Container</h4><blockquote><p>åŸå› ï¼šæˆ‘ä»¬çŸ¥é“ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬çš„ç±»ã€æ¨¡å—ä¼šæœ‰éœ€è¦å…¶ä»–ç±»å’Œç»„ä»¶çš„æƒ…å†µï¼Œä¸ºäº†ä¿è¯åˆå§‹åŒ–é˜¶æ®µä¸ä¼šå‡ºç°æ‰€éœ€è¦çš„æ¨¡å—å’Œç»„ä»¶æ²¡æœ‰æ³¨å†Œçš„æƒ…å†µï¼Œlaravel å°†æ³¨å†Œå’Œåˆå§‹åŒ–è¡Œä¸ºè¿›è¡Œæ‹†åˆ†ï¼Œæ³¨å†Œçš„æ—¶å€™å°±åªèƒ½æ³¨å†Œï¼Œåˆå§‹åŒ–çš„æ—¶å€™å°±æ˜¯åˆå§‹åŒ–ã€‚æ‹†åˆ†åçš„äº§ç‰©å°±æ˜¯ç°åœ¨çš„ æœåŠ¡æä¾›è€…ã€‚<br>å¯ä»¥æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œä½ è¦ç»‘å®š 3 ä¸ªç±» A B C åˆ° IOC Container ä¸­ã€‚ Aï¼ŒBï¼ŒC éƒ½æ˜¯éå¸¸å¤æ‚çš„ç±»ã€‚åœ¨ bind A æ—¶ï¼Œå¼•ç”¨äº†ä¸€ä¸ªç±» B çš„å®ä¾‹ï¼Œé‚£ä¹ˆæƒ³è¦è·å¾—ç±» B çš„å®ä¾‹ï¼Œå°±éœ€è¦ B å·²ç»è¢« bindï¼Œåªæœ‰è¿™æ ·ï¼Œæˆ‘ä»¬çš„ IOC Container æ‰æœ‰èƒ½åŠ› make å‡ºä¸€ä¸ª B çš„å®ä¾‹ã€‚ è€Œåœ¨ bind B æ—¶ï¼Œæ°å¥½åˆéœ€è¦ C çš„å®ä¾‹.<br>å¦‚æœæ˜¯è¿™æ ·çš„é€»è¾‘ï¼Œé‚£ä¹ˆåœ¨ bind A B C æ—¶ï¼Œå°±å¿…é¡»æ‰‹åŠ¨çš„ä¸¥æ ¼å®‰æ’ bind çš„æ¬¡åºï¼Œè€Œä¸”è¿™åªæ˜¯ 3 ä¸ªç±»çš„æƒ…å†µï¼Œå¦‚æœæœ‰å‡ åä¸ªç±»çš„è¯ï¼Œäººå·¥å·²ç»æ— æ³•å®Œæˆäº†.<br>è€Œè¿™æ—¶å°±éœ€è¦ Service Provider çš„ä½œç”¨äº†ã€‚</p><blockquote><p>å¼•ç”¨è‡ªâ€”â€”<a href="https://learnku.com/laravel/t/3361/starting-with-the-1-line-of-code-with-a-systematic-understanding-of-the-core-concepts-of-service-container#e9b441" target="_blank" rel="noopener">ä» 1 è¡Œä»£ç å¼€å§‹ï¼Œå¸¦ä½ ç³»ç»Ÿæ€§åœ°ç†è§£ Service Container æ ¸å¿ƒæ¦‚å¿µ</a></p></blockquote></blockquote><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token comment" spellcheck="true">// 1. åˆ›å»ºä¸€ä¸ª Apple ç±» app/Test/Apple.php</span><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Test</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Apple</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token string">'agg'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//2. ä½¿ç”¨ php artisan make:provider AppleProvider ç”Ÿæˆ provider</span><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>ServiceProvider</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Test<span class="token punctuation">\</span>Apple</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">AppleProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * Register services.     *     * @return void     */</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">app</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$app</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * Bootstrap services.     *     * @return void     */</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 3. åœ¨ config/app.php ä¸­æ³¨å†Œ APPServiceProvider</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token string">'providers'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    App\<span class="token package">Providers<span class="token punctuation">\</span>AppleProvider</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment" spellcheck="true">// 4. æœ€ç»ˆåœ¨ route/web.php ä¸­ä½¿ç”¨</span>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*è¾“å‡ºç»“æœï¼Œå› ä¸ºä½¿ç”¨äº†å•ä¾‹çš„æ¨¡å¼è¿›è¡Œç»‘å®šæ‰€ä»¥è¾“å‡ºçš„ä¸¤ä¸ªå®ä¾‹çš„ç¼–å·æ˜¯ä¸€è‡´çš„object(App\Test\Apple)#206 (1) { ["id"]=> string(3) "agg" } object(App\Test\Apple)#206 (1) { ["id"]=> string(3) "agg" }*/</span></code></pre><h3 id="Facades"><a href="#Facades" class="headerlink" title="Facades"></a>Facades</h3><pre class=" language-php"><code class="language-php">Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token string">'HomeController@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>æƒ³å¿…å¤§å®¶åœ¨ç¬¬ä¸€ä½¿ç”¨ Laravel çš„æ—¶å€™ä¸€å®šä¼šæ³¨æ„åˆ°è¿™è¡Œä»£ç ã€‚åœ¨ä½¿ç”¨ phpStorm ä¹‹ç±»çš„ IDE å·¥å…·æ˜¯æ— æ³•è·³è½¬åˆ°å¯¹åº”çš„ç±»æ–‡ä»¶ã€‚é‚£ä¹ˆè¿™æ˜¯ä¸ºå•¥å‘¢ï¼Ÿ</p></blockquote><p>ä½ æ˜¯æ— æ³•æ‰¾åˆ°å¯¹ Route ç±»çš„å£°æ˜çš„ï¼Œæ˜¯å› ä¸ºä½¿ç”¨äº†åˆ«åã€‚åˆ«åæ˜¯ PHP çš„ä¸€ä¸ªç‰¹æ€§ï¼ˆ <a href="https://www.php.net/manual/zh/function.class-alias.php" target="_blank" rel="noopener">class_alias</a> æ–¹æ³• ï¼‰ã€‚</p><p>åˆ«ååœ¨å“ªé‡Œè®¾ç½®å‘¢â€”â€”app/config/app.php</p><pre class=" language-php"><code class="language-php"><span class="token string">'aliases'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token string">'Route'</span> <span class="token operator">=</span><span class="token operator">></span> Illuminate\<span class="token package">Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Route</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre><p>æŸ¥çœ‹ <em>vendor/laravel/framework/src/Illuminate/Support/Facades/Route.php</em> æ–‡ä»¶â€¦.å“ï¼Ÿæ€ä¹ˆåªæœ‰è¿™ä¹ˆç‚¹ä¸œè¥¿ï¼Œget å‘¢ï¼Ÿ</p><pre class=" language-php"><code class="language-php"><span class="token keyword">namespace</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*   é€šè¿‡è¿™è¡Œæ³¨é‡Šå¯ä»¥æ‰¾åˆ°çœŸå®çš„ Route ç±»åœ¨ä»€ä¹ˆåœ°æ–¹ * @see \Illuminate\Routing\Router */</span><span class="token keyword">class</span> <span class="token class-name">Route</span> <span class="token keyword">extends</span> <span class="token class-name">Facade</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * Get the registered name of the component.     *     * @return string     */</span>    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">getFacadeAccessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">'router'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>é¦–å…ˆè¦çŸ¥é“ Facade çš„ä½œç”¨ï¼šä½¿ç”¨ä¸€ä¸ªç®€å•çš„è¯­æ³•ï¼Œè®©ä½ ä» Laravel çš„ IOC Container ä¸­æ–¹ä¾¿çš„ make å‡ºä½ æƒ³è¦çš„å¯¹è±¡ã€‚</p></blockquote><h4 id="Facade-å®ç°åŸç†ï¼ˆmakeï¼‰"><a href="#Facade-å®ç°åŸç†ï¼ˆmakeï¼‰" class="headerlink" title="Facade å®ç°åŸç†ï¼ˆmakeï¼‰"></a>Facade å®ç°åŸç†ï¼ˆmakeï¼‰</h4><ol><li>é¦–å…ˆ Route ç»§æ‰¿è‡ª <code>Illuminate\Support\Facades</code>ã€‚</li><li><code>Illuminate\Support\Facades</code> é‡Œä¹Ÿæ²¡æœ‰ get é™æ€æ–¹æ³•ã€‚</li><li>ä½¿ç”¨äº† <a href="https://www.php.net/manual/zh/language.oop5.overloading.php#object.callstatic" target="_blank" rel="noopener">__callStatic()</a> é­”æœ¯æ–¹æ³•ã€‚</li><li>åœ¨ Route ä¸­è°ƒç”¨é™æ€çš„ get æ–¹æ³•ï¼Œå®é™…ä¸Š Illuminate\Support\Facades ä¸­çš„ <code>__callStatic</code> é­”æœ¯æ–¹æ³•è¢«è°ƒç”¨ã€‚</li><li>åœ¨ <a href="https://www.php.net/manual/zh/language.oop5.overloading.php#object.callstatic" target="_blank" rel="noopener">__callStatic()</a> æ–¹æ³•ä¸­è°ƒç”¨äº†é™æ€çš„ getFaRoot æ–¹æ³•ã€‚</li><li>åœ¨ <code>getFacadeRoot</code> æ–¹æ³•ä¸­è°ƒç”¨äº†é™æ€çš„ <code>resolveFacadeInstance</code> æ–¹æ³•ã€‚</li><li><code>resolveFacadeInstance</code> æ–¹æ³•éœ€è¦ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°é€šè¿‡é™æ€ <code>getFacadeAccessor</code> æ–¹æ³•è·å¾—ã€‚</li><li><code>getFacadeAccessor</code> è¯¥æ–¹æ³•åœ¨ Route ç±»ä¸­å®ç°äº† <code>getFacadeAccessor</code>å¹¶è¿”å› routeã€‚</li><li><code>resolveFacadeInstance</code> æ–¹æ³•æ¥æ”¶ route å­—ç¬¦ä¸²å‚æ•°ã€‚é¦–å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºå¯¹è±¡ï¼Œå½“ç„¶ä¸æ˜¯å•¦ï¼Œ$name æ˜¯å­—ç¬¦ä¸²ã€‚ ç„¶ååˆ¤æ–­è¯¥ <code>resolvedInstance</code> æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ route ç›¸å…³ä¿¡æ¯ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç¨‹åºæ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œå½“ç„¶ä¹Ÿæ˜¯æ²¡æœ‰çš„ã€‚ æœ€åè¿”å› <code>static::$app[&#39;route&#39;]</code>,åŒæ—¶æŠŠç»“æœä¿å­˜åˆ° <code>resolvedInstance</code> æ•°ç»„ä¸­ã€‚</li><li>$app å…¶å®å°±æ˜¯å‰é¢è¯´çš„ Application ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸ªç±»æ˜¯ä¸€ä¸ª IOC Containerï¼Œå®ä¾‹åŒ–è¿‡ç¨‹åœ¨ Laravel æœ€å¼€å§‹çš„æ—¶å€™ã€‚Facade åˆå§‹åŒ–çš„æ—¶å€™ä¹Ÿè®©è‡ªå·±æœ‰äº†ä¸€ä¸ª $app,è¿™ä¸ªå°±æ˜¯ Application ç±»çš„å®ä¾‹åŒ–å¯¹è±¡ã€‚</li><li>å…¶å®æ­¤æ—¶ $app ä¸­å¹¶æ²¡æœ‰ â€˜routeâ€™ å±æ€§ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå¯ä»¥è°ƒç”¨å‘¢ï¼Ÿå› ä¸º Application ç»§æ‰¿äº† Container, è€Œ Container åˆç»§æ‰¿äº† ArrayAccess ç±»,å¹¶å®ç°äº† offsetGet æ–¹æ³•ã€‚ è¯¥æ–¹æ³•çš„å†…å®¹ä¸º <code>return $this-&gt;make($key);</code> è¿™é‡Œå°±å¾ˆæ˜æ˜¾äº†ï¼Œç›´æ¥make å‡ºäº†ä¸€ä¸ª route å®ä¾‹ã€‚</li><li>æœ€ç»ˆç›¸å½“äº <code>$instance = static::getFacadeRoot();</code> ä¸ <code>$instance = $app-&gt;make(&#39;router&#39;);</code> æ˜¯ç›¸ç­‰çš„ã€‚</li></ol><pre class=" language-php"><code class="language-php">    <span class="token comment" spellcheck="true">//Illuminate\Support\Facades\Facades.php;</span>    <span class="token comment" spellcheck="true">//ä»¥ä¸Šå†…å®¹çœç•¥</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">getFacadeRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resolveFacadeInstance</span><span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getFacadeAccessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>     <span class="token comment" spellcheck="true">//è¯¥æ–¹æ³•è¢«å­ç±»å¤å†™</span>    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">getFacadeAccessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">'Facade does not implement getFacadeAccessor method.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">resolveFacadeInstance</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_object</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token variable">$name</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable">$resolvedInstance</span><span class="token punctuation">[</span><span class="token variable">$name</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable">$resolvedInstance</span><span class="token punctuation">[</span><span class="token variable">$name</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable">$resolvedInstance</span><span class="token punctuation">[</span><span class="token variable">$name</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable">$app</span><span class="token punctuation">[</span><span class="token variable">$name</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>   <span class="token comment" spellcheck="true">//ä»¥ä¸‹å†…å®¹çœç•¥ </span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">__callStatic</span><span class="token punctuation">(</span><span class="token variable">$method</span><span class="token punctuation">,</span> <span class="token variable">$args</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$instance</span> <span class="token operator">=</span> <span class="token keyword">static</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getFacadeRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token variable">$instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">'A facade root has not been set.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token variable">$instance</span><span class="token operator">-</span><span class="token operator">></span><span class="token variable">$method</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token variable">$args</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h4 id="Facade-å®ç°åŸç†ï¼ˆbindï¼‰"><a href="#Facade-å®ç°åŸç†ï¼ˆbindï¼‰" class="headerlink" title="Facade å®ç°åŸç†ï¼ˆbindï¼‰"></a>Facade å®ç°åŸç†ï¼ˆbindï¼‰</h4><blockquote><p>åœ¨æœ€å¼€å§‹å°±äº†è§£åˆ°ï¼Œæ—¢ç„¶è¦ makeï¼Œå¿…é¡»é¦–å…ˆ bindã€‚è€Œä¸”æœ€å¥½çš„æ–¹å¼æ˜¯é€šè¿‡ serviceProvider æ¥ bind ç±»ã€‚ è€Œä¸”ä¸è®ºæ˜¯ make è¿˜æ˜¯ bind éƒ½éœ€è¦ä¸€ä¸ª keyï¼Œç”¨æ¥åœ¨å®¹å™¨ä¸­ä¿å­˜å’ŒæŸ¥æ‰¾è¿™ä¸ªç±»ã€‚ä¸Šé¢è®²çš„æ˜¯ä½¿ç”¨ route å…³é”®å­—è¿›è¡Œ make çš„è¿‡ç¨‹ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è‚¯å®šåœ¨ä¹‹å‰ä¸€å®šæœ‰ä¸€ä¸ªä½¿ç”¨ route è¿›è¡Œ bind çš„æ“ä½œã€‚ä¸‹é¢å°±è¿›è¡Œ bind çš„è®²è§£ã€‚</p></blockquote><ol><li>é¦–å…ˆ ServiceProvider éœ€è¦åœ¨ <code>config/app.php</code> è¿›è¡Œæ³¨å†Œï¼Œæˆ‘ä»¬åœ¨æ–‡ä»¶ä¸­æ‰¾åˆ°å¯¹åº” route ç›¸å…³çš„å†…å®¹ï¼Œå°±æ˜¯ <code>App\Providers\RouteServiceProvider::class,</code>ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘æ˜“äº‘éŸ³ä¹è¯„è®ºæ‘˜å½•</title>
      <link href="/2019/05/28/%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E8%AF%84%E8%AE%BA%E6%91%98%E5%BD%95/"/>
      <url>/2019/05/28/%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E8%AF%84%E8%AE%BA%E6%91%98%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>ç½‘æ˜“äº‘éŸ³ä¹é‡Œæœ‰æ‰çš„äººå®åœ¨å¤ªå¤šï¼Œå†™å‡ºæ¥çš„æ­Œè¯æˆ–è¯„è®ºæ˜¯çœŸçš„ä¸é”™ã€‚è¿™é‡Œå°±æŠŠæˆ‘è§‰å¾—è¿˜ä¸é”™çš„æ”¶è—ä¸€æ³¢å§ï¼ˆä¸å®šæœŸæ›´æ–°ï¼‰ã€‚</p><h2 id="è¯„è®º"><a href="#è¯„è®º" class="headerlink" title="è¯„è®º"></a>è¯„è®º</h2><blockquote><p>äººä¼šé•¿å¤§ä¸‰æ¬¡ï¼š<br>ç¬¬ä¸€æ¬¡æ˜¯åœ¨å‘ç°è‡ªå·±ä¸æ˜¯ä¸–ç•Œçš„ä¸­å¿ƒçš„æ—¶å€™ã€‚<br>ç¬¬äºŒæ¬¡æ˜¯åœ¨å‘ç°å³ä½¿åœ¨æ€ä¹ˆåŠªåŠ›ï¼Œç»ˆç©¶è¿˜æ˜¯æœ‰äº›äº‹ä»¤äººæ— èƒ½ä¸ºåŠ›çš„æ—¶å€™ã€‚<br>ç¬¬ä¸‰æ¬¡æ˜¯åœ¨ï¼Œæ˜çŸ¥é“æœ‰äº›äº‹å¯èƒ½ä¼šæ— èƒ½ä¸ºåŠ›ï¼Œä½†è¿˜æ˜¯ä¼šå°½åŠ›äº‰å–çš„æ—¶å€™ã€‚<br>â€”â€”â€”â€”ã€Šä¸€å¦‚å°‘å¹´æ¨¡æ ·ã€‹</p></blockquote><blockquote><p>ç™½å¤©è¦å¥½å¥½è¯»ä¹¦ ä¹¦é‡Œæœ‰æ‚¨ä¸çŸ¥é“çš„<br>å¤œé‡Œè¦å¥½å¥½ç¡è§‰ æ¢¦é‡Œæœ‰ä½ æƒ³è¦çš„<br>â€”â€”â€”â€”ã€Šä»–ã€‹</p></blockquote><blockquote><p>ä½ å“­çš„æœ€ä¼¤å¿ƒçš„é‚£ä¸ªæ™šä¸Šå˜æˆå¤§äººäº†ä¹ˆï¼Ÿä¸æ˜¯ï¼Œæ˜¯æˆ‘å¿ä½æ²¡å“­çš„é‚£ä¸ªæ™šä¸Šã€‚<br>â€”â€”â€”â€”æ—å®¥å˜‰ã€Šå¤©çœŸæœ‰é‚ªã€‹</p></blockquote><blockquote><p>å°æ—¶å€™ï¼ŒæŠŠä¸€ç‰‡å£é¦™ç³–æ°æˆä¸¤å—å„¿ï¼Œå¾ˆèˆä¸å¾—åƒã€‚é‚£æ—¶å€™å°±å¤©çœŸçš„æƒ³ï¼Œç­‰æˆ‘é•¿å¤§äº†ï¼Œæœ‰é’±äº†ï¼Œå°±ä¸€å£æ°”åš¼ä¸€åŒ…ï¼ä¸€å®šç‰¹åˆ«ç”œï¼ä»Šå¤©çªç„¶æƒ³åˆ°äº†å„¿æ—¶çš„è¿™ä¸ªæ¢¦æƒ³ï¼Œå°±ä¹°äº†ä¸€åŒ…ï¼Œå½“æˆ‘æŠŠå£é¦™ç³–ä¸€ç‰‡ç‰‡å¡è¿›å˜´é‡Œçš„æ—¶å€™ï¼Œæˆ‘çš„çœ¼æ³ªå¤ºç›®è€Œå‡ºã€‚ã€‚ã€‚æˆ‘å“½å’½ç€å¤§å£çš„åš¼ç€ã€‚ã€‚ã€‚å¿ƒé‡Œå´æ»¡æ˜¯é…¸æ¥šï¼Œæˆ‘æƒ³ï¼Œè¿™æ—¶å…‰ä¸€ç‚¹ä¹Ÿä¸ç”œã€‚ã€‚ã€‚<br>â€”â€”â€”â€”å‘¨ä¼ é›„ã€Šé»„æ˜ã€‹ </p></blockquote><blockquote><p>çˆ±ä¸Šä¸€ä¸ªäººï¼Œå§‹äºé¢œå€¼ï¼Œé™·äºæ‰åï¼Œå¿ äºäººå“ï¼›çˆ±ä¸Šä¸€é¦–æ­Œï¼Œå§‹äºæ­Œåï¼Œé™·äºæ—‹å¾‹ï¼Œå¿ äºè¯ä¹‰ã€‚</p></blockquote><blockquote><p>å½“æˆ‘å­‘ç„¶ä¸€èº«çš„æ—¶å€™ï¼Œè´«ç©·ä¸æˆ‘ä¸è¿‡æ˜¯æ™šä¸Šåƒé¦’å¤´è¿˜æ˜¯ç‰›æ’çš„é—®é¢˜ï¼Œæ— æŸæˆ‘çš„å¿«ä¹ï¼Œå½“ä½†æˆ‘çˆ±ä¸Šä¸€ä¸ªå§‘å¨˜çš„æ—¶å€™ï¼Œæˆ‘æ‰æ·±æ·±æ„Ÿå—åˆ°äº†è´«ç©·æ‰€å¸¦æ¥çš„è‡ªå‘ã€‚</p></blockquote><blockquote><p>å¤ä»£è¯æˆ¿é—¨å£ä¼šæŒ‚ç€ï¼š<br>ä½†æ„¿ä¸–ä¸Šæ— ç–¾è‹¦ï¼Œå®å¯æ¶ä¸Šè¯ç”Ÿå°˜ã€‚<br>ç°åœ¨è¯æˆ¿é—¨å£è´´ç€ï¼š<br>ä¼šå‘˜ç§¯åˆ†ï¼Œä¹°åèµ äº”ï¼Œæ¶ˆè´¹æ»¡58é€20ä¸ªé¸¡è›‹ã€‚<br>â€”â€”â€”â€”ã€Šåªè¦å¹³å‡¡ã€‹</p></blockquote><blockquote><p>æœˆè€ï¼Œéº»çƒ¦ä¸‹æ¬¡ä¸ºæˆ‘ç‰µçº¢çº¿çš„æ—¶å€™èƒ½æ¢æˆé’¢ä¸å—ï¼Œçº¢çº¿è€TMæ–­ã€‚<br>â€”â€”â€”â€”ã€ŠçŒ«éƒ½ç§ä¸èµ·æˆ‘ã€‹</p></blockquote><blockquote><p>æˆ‘å‘Šè¯‰ä½ æˆ‘å–œæ¬¢ä½ ï¼Œå¹¶ä¸æ˜¯ä¸€å®šè¦å’Œä½ åœ¨ä¸€èµ·ï¼Œåªæ˜¯å¸Œæœ›ä»Šåçš„æ‚¨ï¼Œåœ¨é­é‡äººç”Ÿä½è°·çš„æ—¶å€™ï¼Œä¸è¦ç°å¿ƒï¼Œè‡³å°‘æ›¾ç»æœ‰äººè¢«ä½ çš„é­…åŠ›æ‰€å¸å¼•ï¼Œæ›¾ç»æ˜¯ï¼Œä»¥åä¹Ÿä¼šæ˜¯ã€‚<br>â€”â€”â€”â€”ã€Šæˆ‘è¦ä½ ã€‹</p></blockquote><h2 id="æ­Œè¯"><a href="#æ­Œè¯" class="headerlink" title="æ­Œè¯"></a>æ­Œè¯</h2><blockquote><p>ä½ æ˜¯æˆ‘æ‚£å¾—æ‚£å¤±çš„æ¢¦ æˆ‘æ˜¯ä½ å¯æœ‰å¯æ— çš„äºº æ¯•ç«Ÿè¿™ç©¿è¶Šå±±æ²³çš„å‰‘ åˆºçš„éƒ½æ˜¯ç”¨æƒ…è‡³æçš„äºº ä½ æ˜¯æˆ‘è¾—è½¬åä¾§çš„æ¢¦ æˆ‘æ˜¯ä½ å¦‚æ¢¦å±±æ²³çš„å¤äºº<br>â€”â€”â€”â€”è§£å¿§å°‘å¸…ã€Šå†™ç»™é»„æ·®ã€‹</p></blockquote><blockquote><p>åƒæˆ‘è¿™æ ·ä¼˜ç§€çš„äºº æœ¬è¯¥ç¿çƒ‚è¿‡ä¸€ç”Ÿ æ€ä¹ˆäºŒåå¤šå¹´åˆ°å¤´æ¥ è¿˜åœ¨äººæµ·é‡Œæµ®æ²‰<br>â€”â€”â€”â€” æ¯›ä¸æ˜“ã€Šåƒæˆ‘è¿™æ ·çš„äººã€‹</p></blockquote><blockquote><p>å¯æ˜¯ä½ æ›¾ç»çš„é‚£äº›æ¢¦ï¼Œéƒ½å·²å˜å¾—æ¨¡ç³Šçœ‹ä¸è§ï¼Œé‚£äº›ä¸ºäº†ç†æƒ³çš„æˆ˜æ–—ï¼Œä¹Ÿä¸è¿‡æ˜¯ä¸ºäº†é’±ã€‚<br>æˆ‘ä¸è¦åœ¨å¤±è´¥å­¤ç‹¬ä¸­æ­»å»ï¼Œæˆ‘ä¸è¦ä¸€ç›´æ´»åœ¨åœ°ä¸‹é‡Œï¼Œç‰©è´¨çš„éª—å±€ï¼ŒåŒ†åŒ†çš„èš‚èšï¼Œæ²¡æœ‰æ–‡åŒ–çš„äººä¸ä¼¤å¿ƒã€‚<br>â€”â€”â€”â€” æ–°è£¤å­ä¹é˜Ÿã€Šæ²¡æœ‰ç†æƒ³çš„äººä¸ä¼¤å¿ƒã€‹</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‘˜å½• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitå¸¸ç”¨å‘½ä»¤æ€»ç»“</title>
      <link href="/2019/04/06/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/"/>
      <url>/2019/04/06/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å†…å®¹ä¸å®šæœŸæ›´æ–°</p></blockquote><h2 id="è‡ªå·±å¸¸ç”¨çš„-git-alias-å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ›´å¥½çš„æ˜¾ç¤º-log-ä¿¡æ¯"><a href="#è‡ªå·±å¸¸ç”¨çš„-git-alias-å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ›´å¥½çš„æ˜¾ç¤º-log-ä¿¡æ¯" class="headerlink" title="è‡ªå·±å¸¸ç”¨çš„ git alias å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ›´å¥½çš„æ˜¾ç¤º log ä¿¡æ¯"></a>è‡ªå·±å¸¸ç”¨çš„ git alias å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ›´å¥½çš„æ˜¾ç¤º log ä¿¡æ¯</h2><pre class=" language-shell"><code class="language-shell">alias gl="git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"alias gll="git log --graph --abbrev-commit --decorate --all --format=format:'%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(dim white) - %an%C(reset) %C(bold green)(%ar)%C(reset)%C(bold yellow)%d%C(reset)%n %C(white)%s%C(reset)'"</code></pre><h2 id="1-git-commit-â€“amend"><a href="#1-git-commit-â€“amend" class="headerlink" title="1. git commit â€“amend"></a>1. git commit â€“amend</h2><pre class=" language-git"><code class="language-git">git commit --amend</code></pre><blockquote><p>è§£é‡Šï¼šå½“ç¬¬ä¸€æ¬¡ commit ä¹‹åï¼Œå‘ç°æ²¡æœ‰ä¿®æ”¹æ­£ç¡®ï¼Œä½†æ˜¯åˆä¸æƒ³åœ¨ git log ä¸­å‡ºç°ä¸¤æ¬¡æäº¤è®°å½•ï¼Œé‚£ä¹ˆåœ¨ç¬¬äºŒæ¬¡ä¿®æ”¹åï¼Œå¯ä»¥ä½¿ç”¨ git commit â€“amend å‘½ä»¤è¿›è¡Œä¿®æ”¹æäº¤ã€‚æ­¤æ—¶æäº¤æˆåŠŸåå°±åªæœ‰ä¸€æ¡ commit è®°å½•äº†ã€‚</p></blockquote><h2 id="2-gitignore-ç”Ÿæ•ˆ"><a href="#2-gitignore-ç”Ÿæ•ˆ" class="headerlink" title="2. gitignore ç”Ÿæ•ˆ"></a>2. gitignore ç”Ÿæ•ˆ</h2><blockquote><p>è§£é‡Š: .gitignore æ–‡ä»¶æ˜¯å¿½ç•¥ git é¡¹ç›®ä¸­ä¸éœ€è¦æäº¤çš„å†…å®¹çš„é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯å½“æŸæ¬¡æäº¤çš„æ—¶å€™æŠŠä¸éœ€è¦çš„å†…å®¹æäº¤åˆ° git ç‰ˆæœ¬æ§åˆ¶ä¸­äº†ä¹‹åã€‚å†æƒ³ä¿®æ”¹ .gitignore æ–‡ä»¶æ¥å¿½ç•¥é‚£ä¸ªæ–‡ä»¶çš„è¯æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚éœ€è¦å…ˆæƒ³æ–‡ä»¶åœ¨ git ç¼“å­˜ä¸­åˆ é™¤ï¼Œç„¶ååœ¨è¿›è¡Œæäº¤ã€‚å°±å¯ä»¥äº†ã€‚ï¼ˆä¸‹é¢æ˜¯æ“ä½œæ­¥éª¤ï¼‰</p></blockquote><pre class=" language-git"><code class="language-git">git rm -r --cached .   //å¦‚ä½•æ˜¯ç›®å½•çš„è¯ï¼Œå¢åŠ  -r å‚æ•°git add .git commit -m <span class="token string">'fix ignore'</span>//åˆ é™¤æŒ‡å®šæ–‡ä»¶çš„ç¼“å­˜git rm --cached xx.html</code></pre><h2 id="3-git-reset-â€“soft-hard-hash"><a href="#3-git-reset-â€“soft-hard-hash" class="headerlink" title="3. git reset â€“soft/hard  hash*"></a>3. git reset â€“soft/hard  <strong>hash*</strong></h2><pre class=" language-git"><code class="language-git">git reset --soft  **hash***git reset --hard  **hash***</code></pre><blockquote><p>è§£é‡Šï¼šå½“æ‰§è¡Œ git commit ä¹‹åï¼Œæƒ³å›åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ git reset è¿›è¡Œç‰ˆæœ¬å›é€€ã€‚â€“sorf å‚æ•°çš„æ„æ€æ˜¯ï¼Œgit log æ’¤é”€ç‰ˆæœ¬ï¼Œä½†ä»£ç ä¸­çš„å†…å®¹æ²¡æœ‰å›é€€ã€‚ â€“hard å‚æ•°çš„æ„æ€æ˜¯ï¼Œgit log ä¸­çš„è®°å½•å’Œ æ–‡ä»¶å†…å®¹å®Œå…¨å›é€€åˆ°é€‰çš„çš„ç‰ˆæœ¬ã€‚ï¼ˆâ€“hard æ›´å¸¸ç”¨ï¼‰</p></blockquote><h2 id="4-git-stash"><a href="#4-git-stash" class="headerlink" title="4. git stash"></a>4. git stash</h2><pre class=" language-git"><code class="language-git">git stash           //å°†å½“å‰å·¥ä½œå»å†…å®¹è¿›è¡Œæš‚å­˜ï¼Œç„¶åå°±è¿›è¡Œåˆ‡æ¢åˆ†æ”¯æˆ–å…¶ä»–çš„æ“ä½œäº†git stash list      //æŸ¥çœ‹å½“å‰å·²ç»æš‚å­˜çš„è®°å½•åˆ—è¡¨git stash pop       //å°†å½“å‰æš‚å­˜å†…å®¹å›å¤åˆ°å·¥ä½œåŒºå¹¶åˆ é™¤æš‚å­˜è®°å½•åˆ—è¡¨ä¸­çš„å†…å®¹git stash apply     //å°†å½“å‰æš‚å­˜å†…å®¹å›å¤åˆ°å·¥ä½œåŒºï¼Œä¸åˆ é™¤è®°å½•</code></pre><h2 id="5-git-rebase-å˜åŸº"><a href="#5-git-rebase-å˜åŸº" class="headerlink" title="5. git rebase (å˜åŸº)"></a>5. git rebase (å˜åŸº)</h2><blockquote><p>è§£é‡Šï¼šå½“åœ¨ä¸¤ä¸ªåˆ†æ”¯è¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨ merge å°†ä¸¤ä¸ªåˆ†æ”¯è¿›è¡Œåˆå¹¶ï¼Œä½†æ˜¯è¿™æ ·ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„æäº¤ï¼Œå¹¶ä¸”å¦ä¸€ä¸ªåˆ†æ”¯çš„æäº¤è®°å½•åœ¨å½“å‰åˆ†æ”¯æ˜¯ä¸å­˜åœ¨çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ rebaseã€‚</p></blockquote><pre class=" language-git"><code class="language-git">//å‰æï¼šmaster åˆ†æ”¯å’Œ new-feature åˆ†æ”¯éƒ½è¿›è¡Œäº†å¤šæ¬¡æäº¤git checkout new-feature        //é¦–å…ˆåˆ‡æ¢åˆ°æ–°åˆ†æ”¯git rebase master               //å°† master åˆ†æ”¯çš„æäº¤è®°å½•æ·»åŠ åˆ°å½“å‰åˆ†æ”¯git checkout master             //åˆ‡æ¢å› master åˆ†æ”¯git merge new-feature           //å°† new-feature åˆ†æ”¯åˆå¹¶å…¥masterï¼Œæ­¤æ—¶ master åˆ†æ”¯ä¸­å°±æœ‰äº† new-feature åˆ†æ”¯çš„æäº¤è®°å½•ï¼Œä½†æ˜¯ä¸ä¼šäº§ç”Ÿæ–°çš„æäº¤è®°å½•ã€‚æ­¤å‘½ä»¤å¯ä»¥ä½¿æäº¤å†å²æ›´ä¸ºæ•´æ´ã€‚</code></pre>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨frpæ­å»ºæœ¬åœ°å¾®ä¿¡å¼€å‘ç¯å¢ƒ</title>
      <link href="/2019/03/08/%E4%BD%BF%E7%94%A8frp%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
      <url>/2019/03/08/%E4%BD%BF%E7%94%A8frp%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>2019-3-10</strong> æ›´æ–°è®°å½•</p></blockquote><p>å†ä½¿ç”¨ TP5 è¿›è¡Œå¼€å‘çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹</p><ol><li>å…³é—­ trace è°ƒè¯•æ¨¡å¼ã€‚</li><li>åœ¨ä½¿ç”¨è·¯ç”±çš„æ—¶å€™å°½é‡ç¡®å®šå¯¹åº”æ¥å£è¯·æ±‚çš„ç±»å‹ï¼Œå¦‚æœä¸çŸ¥é“ç±»å‹å»ºè®®ä½¿ç”¨ <strong>Route::any()</strong>;</li></ol><p><em>å¯ä»¥ä½¿ç”¨ <a href="http://www.fangbei.org/tool/message" target="_blank" rel="noopener">å¾®ä¿¡æ¶ˆæ¯æµ‹è¯•å·¥å…·</a>è¿›è¡Œæµ‹è¯•</em>ã€‚</p><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>ä¹‹å‰åœ¨åšç›¸å…³å¾®ä¿¡å¼€å‘æ—¶ï¼Œå› ä¸ºéœ€è¦éªŒè¯å…¬ç½‘å¯ä»¥è®¿é—®çš„åˆ°çš„åŸŸåï¼Œæ‰€ä»¥æ€»æ˜¯å°†ä»£ç æ¨åˆ°çº¿ä¸ŠæœåŠ¡å™¨è¿›è¡Œç›¸å…³çš„æµ‹è¯•ã€‚æ¯æ¬¡æœ‰äº›å°æ”¹åŠ¨ä¹Ÿè¦è¿›æœ¬åœ°ä»£ç æ¨é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ‹‰å–æœ€æ–°ä»£ç è¿™ç§é‡å¤æ€§çš„æ“ä½œï¼Œæ„Ÿè§‰ååˆ†ç¹çï¼Œä¸€ç›´æƒ³æ‰¾ä¸€ä¸ªç®€å•æ–¹ä¾¿çš„æ–¹å¼è¿›è¡Œå¾®ä¿¡æœ¬åœ°ç¯å¢ƒçš„å¼€å‘ã€‚ğŸ˜“ æ— å¥ˆä¹‹å‰è‡ªå·±å¤ªæ‡’äº†â€¦â€¦æ€»æ˜¯æ‹–ã€‚æœ€è¿‘å‡ å¤©å¥½å¥½ç ”ç©¶äº†ä¸‹ç‰¹æ­¤è®°å½•ä¸‹æ¥ã€‚</p><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol><li>ä¸€å°å…¬ç½‘å¯ä»¥è®¿é—®çš„æœåŠ¡å™¨ï¼ˆæˆ–ä½¿ç”¨æµ·å¤–æœåŠ¡å™¨ï¼‰ã€‚</li><li>ä¸€ä¸ªå·²ç»å¤‡æ¡ˆçš„åŸŸåã€‚</li><li>å†…ç½‘ç©¿é€å·¥å…· <a href="https://github.com/fatedier/frp" target="_blank" rel="noopener">frp</a></li></ol><h2 id="æœåŠ¡ç«¯é…ç½®"><a href="#æœåŠ¡ç«¯é…ç½®" class="headerlink" title="æœåŠ¡ç«¯é…ç½®"></a>æœåŠ¡ç«¯é…ç½®</h2><h3 id="ä¸‹è½½-frp"><a href="#ä¸‹è½½-frp" class="headerlink" title="ä¸‹è½½ frp"></a>ä¸‹è½½ frp</h3><p>ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„ <a href="https://github.com/fatedier/frp/releases" target="_blank" rel="noopener">frp</a> åŒ…ã€‚å› ä¸ºæˆ‘çš„å…¬ç½‘æœåŠ¡å™¨æ˜¯ centOS6-x64 æ‰€ä»¥ä¸‹è½½äº† <code>frp_0.24.1_linux_amd64.tar.gz</code> åŒ…ã€‚</p><h3 id="é…ç½®-frp-æœåŠ¡ç«¯"><a href="#é…ç½®-frp-æœåŠ¡ç«¯" class="headerlink" title="é…ç½® frp æœåŠ¡ç«¯"></a>é…ç½® frp æœåŠ¡ç«¯</h3><ol><li>åœ¨æœåŠ¡å™¨ä¸Šè§£å‹ä¸‹è½½å¥½çš„ frp åŒ…ã€‚</li></ol><pre class=" language-bash"><code class="language-bash"> <span class="token function">tar</span> zxvf frp_0.24.1_linux_amd64.tar.gz</code></pre><ol start="2"><li><p>è¿›å…¥è§£å‹å¥½çš„ç›®å½•ï¼Œç¼–è¾‘ frp æœåŠ¡å™¨ç«¯é…ç½®æ–‡ä»¶ <strong>frps.ini</strong>ã€‚</p><pre class=" language-ini"><code class="language-ini"><span class="token selector">[common]</span><span class="token constant">bind_port</span> <span class="token attr-value"><span class="token punctuation">=</span> 7000             #frp ç»‘å®šçš„ç«¯å£</span><span class="token constant">vhost_http_port</span> <span class="token attr-value"><span class="token punctuation">=</span> 8000       #http è®¿é—®ç«¯å£</span></code></pre><ol start="3"><li>å¯åŠ¨æœåŠ¡ç«¯ frp</li></ol><pre class=" language-bash"><code class="language-bash">./frps -c ./frps.ini</code></pre></li></ol><h2 id="è§£æåŸŸå"><a href="#è§£æåŸŸå" class="headerlink" title="è§£æåŸŸå"></a>è§£æåŸŸå</h2><p>åœ¨åŸŸåæœåŠ¡å•†é…ç½®åŸŸåè§£æï¼Œå°†åŸŸåè§£æåˆ°ä¸Šé¢çš„æœåŠ¡å™¨ ip åœ°å€ä¸Šã€‚</p><h2 id="é…ç½®-nginx-åå‘ä»£ç†è¿›è¡Œ-frp-ç«¯å£çš„è½¬å‘"><a href="#é…ç½®-nginx-åå‘ä»£ç†è¿›è¡Œ-frp-ç«¯å£çš„è½¬å‘" class="headerlink" title="é…ç½® nginx åå‘ä»£ç†è¿›è¡Œ frp ç«¯å£çš„è½¬å‘"></a>é…ç½® nginx åå‘ä»£ç†è¿›è¡Œ frp ç«¯å£çš„è½¬å‘</h2><ol><li>é…ç½® nginx </li></ol><pre class=" language-nginx"><code class="language-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>    <span class="token keyword">listen</span> <span class="token number">80</span><span class="token punctuation">;</span>    <span class="token keyword">server_name</span> wx<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>com<span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># ç»‘å®šåŸŸå</span>    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">8000</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># è½¬å‘è‡³æœ¬æœº8000,å³åœ¨frps.iniä¸­é…ç½®>çš„vhost_http_port</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ol start="2"><li>é‡å¯ nginx</li></ol><h2 id="æœ¬åœ°ç«¯é…ç½®"><a href="#æœ¬åœ°ç«¯é…ç½®" class="headerlink" title="æœ¬åœ°ç«¯é…ç½®"></a>æœ¬åœ°ç«¯é…ç½®</h2><blockquote><p> æœ¬åœ°ä½¿ç”¨çš„æ˜¯ vagrant è™šæ‹Ÿæœºã€‚ä½¿ç”¨çš„åŒæ ·æ˜¯ centOS6-x64ã€‚åœ¨é…ç½® frp å®¢æˆ·ç«¯ä¹‹å‰éœ€è¦å°†é¡¹ç›®ä»£ç åœ¨ nginx ä¸­æ­£ç¡®é…ç½®ï¼ŒæŒ‡å®šçš„åŸŸåå°±æ˜¯ä¸Šé¢è§£æçš„åŸŸåã€‚</p></blockquote><ol><li>æ ¹æ®æœ¬åœ°ç³»ç»Ÿç¯å¢ƒä¸‹è½½å¯¹åº”çš„  <a href="https://github.com/fatedier/frp/releases" target="_blank" rel="noopener">frp</a> åŒ…ã€‚</li><li><p>ç¼–è¾‘ frp å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ <strong>frpc.ini</strong>ã€‚</p><pre class=" language-ini"><code class="language-ini"><span class="token selector">[common]</span><span class="token constant">server_addr</span> <span class="token attr-value"><span class="token punctuation">=</span> x.x.x.x     #frps æ‰€åœ¨çš„æœåŠ¡å™¨çš„ IP</span><span class="token constant">server_port</span> <span class="token attr-value"><span class="token punctuation">=</span> 7000        #frps ç»‘å®šçš„ç«¯å£</span><span class="token constant">use_encryption</span> <span class="token attr-value"><span class="token punctuation">=</span> true     #å°† frpc ä¸ frps ä¹‹é—´çš„é€šä¿¡å†…å®¹åŠ å¯†ä¼ è¾“ï¼Œå°†ä¼šæœ‰æ•ˆé˜²æ­¢æµé‡è¢«æ‹¦æˆªã€‚ </span><span class="token constant">use_compression</span> <span class="token attr-value"><span class="token punctuation">=</span> true     # å¯¹ä¼ è¾“å†…å®¹è¿›è¡Œå‹ç¼©ï¼Œå¯ä»¥æœ‰æ•ˆå‡å° frpc ä¸ frps ä¹‹é—´çš„ç½‘ç»œæµé‡ï¼ŒåŠ å¿«æµé‡è½¬å‘é€Ÿåº¦ï¼Œä½†æ˜¯ä¼šé¢å¤–æ¶ˆè€—ä¸€äº› cpu èµ„æºã€‚</span><span class="token selector">[web]</span><span class="token constant">type</span> <span class="token attr-value"><span class="token punctuation">=</span> http</span><span class="token constant">local_port</span> <span class="token attr-value"><span class="token punctuation">=</span> 80   #ä¸ºæœ¬åœ°æœºå™¨ä¸Š web æœåŠ¡å¯¹åº”çš„ç«¯å£</span><span class="token constant">custom_domains</span> <span class="token attr-value"><span class="token punctuation">=</span> wx.domain.com   #ä¸Šä¸€æ­¥ä¸­è§£æå¥½çš„åŸŸå</span></code></pre></li></ol><ol start="3"><li>å¯åŠ¨ frp å®¢æˆ·ç«¯<pre class=" language-bash"><code class="language-bash">./frpc -c ./frpc.ini</code></pre></li></ol><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>å¦‚æœä¸€åˆ‡æ­£å¸¸é‚£ä¹ˆç°åœ¨éšä¾¿æ‰¾ä¸€å°è®¾å¤‡ï¼Œè®¿é—®åˆšæ‰çš„åŸŸåå°±å¯ä»¥è®¿é—®åˆ°æœ¬åœ°çš„é¡¹ç›®äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ç¯å¢ƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼€å‘ç¯å¢ƒ </tag>
            
            <tag> frp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL å„ç§é”çš„ç†è§£</title>
      <link href="/2019/02/14/%E5%90%84%E7%A7%8D%E9%94%81%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2019/02/14/%E5%90%84%E7%A7%8D%E9%94%81%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¹‹å‰æ€»æ˜¯å¬è¯´ MySQL ä¸­çš„é”ï¼Œä¸€ç›´æ²¡æœ‰å…·ä½“çš„çœ‹è¿‡ï¼Œæ™šä¸ŠæŠ½äº†ç©ºçœ‹äº†ä¸€ç‚¹å°±å…ˆè®°å½•äº†ä¸‹æ¥ï¼Œåé¢æœ‰æœºä¼šåœ¨è¡¥å……ã€‚</p></blockquote><h2 id="ä¸ºä»€ä¹ˆéœ€è¦é”"><a href="#ä¸ºä»€ä¹ˆéœ€è¦é”" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦é”"></a>ä¸ºä»€ä¹ˆéœ€è¦é”</h2><p>å› ä¸ºæ•°æ®åº“æ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å…±äº«çš„èµ„æºï¼Œä¹Ÿå°±æ˜¯ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®æ•°æ®ã€‚å½“æœ‰ä¸€ä¸ªå•†å“è¡¨åº“å­˜ä¸º1ï¼Œå½“ä¸€ä¸ªç”¨æˆ·è´­ä¹°è¯¥å•†å“çš„æ—¶å€™ï¼Œé¦–å…ˆéœ€è¦æŸ¥è¯¢å•†å“çš„åº“å­˜ã€‚å¦‚æœä¸€ä¸ªäººè¯·æ±‚æ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ã€‚ä½†æ˜¯å½“ä¸¤ä¸ªç”¨æˆ·åŒæ—¶è´­ä¹°è¯¥å•†å“çš„æ—¶å€™ç”±äºæ—¶é—´æ¯”è¾ƒæ¥è¿‘ï¼Œå½“ç¬¬ä¸€ä¸ªç”¨æˆ·æŸ¥è¯¢å®Œå•†å“è¿˜æœªè¿›è¡Œæ›´æ–°åº“å­˜çš„æ—¶å€™ï¼Œç¬¬äºŒä¸ªç”¨æˆ·å°±è¿›æ¥äº†ï¼Œç”±äºåº“å­˜è¿˜æ²¡æœ‰æ›´æ–°ï¼Œæ‰€ä»¥è¯¥ç”¨æˆ·ä¹Ÿå¯ä»¥ä¸‹å•æˆåŠŸã€‚æœ€ç»ˆå°†å¯¼è‡´åº“å­˜ä¸º-1ï¼Œç ´å¹»äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚ä¸ºäº†è§£å†³è¿™é—®é¢˜æ‰æœ‰ä¸ªé”çš„æ¦‚å¿µã€‚</p><h2 id="æœ‰å“ªäº›é”"><a href="#æœ‰å“ªäº›é”" class="headerlink" title="æœ‰å“ªäº›é”"></a>æœ‰å“ªäº›é”</h2><ul><li>é”çš„ç±»å‹<ul><li>è¯»é”</li><li>å†™é”</li></ul></li><li>é”çš„ç²’åº¦<ul><li>è¡Œé”</li><li>è¡¨é”</li></ul></li><li>æŒæœ‰é”çš„æ—¶é—´<ul><li>ä¸´æ—¶é”</li><li>æŒç»­é”</li></ul></li></ul><h2 id="éš”ç¦»çº§åˆ«"><a href="#éš”ç¦»çº§åˆ«" class="headerlink" title="éš”ç¦»çº§åˆ«"></a>éš”ç¦»çº§åˆ«</h2><blockquote><p>è¯´åˆ°é”é‚£ä¹ˆæ¥ä¸‹æ¥å°±éœ€è¦äº†è§£éš”ç¦»çº§åˆ«ï¼Œäº†è§£éš”ç¦»çº§åˆ«å°±éœ€è¦äº†è§£æ•°æ®åº“çš„å››è¦ç´ ã€‚</p></blockquote><h3 id="æ•°æ®åº“å››è¦ç´ ï¼ˆACIDï¼‰"><a href="#æ•°æ®åº“å››è¦ç´ ï¼ˆACIDï¼‰" class="headerlink" title="æ•°æ®åº“å››è¦ç´ ï¼ˆACIDï¼‰"></a>æ•°æ®åº“å››è¦ç´ ï¼ˆACIDï¼‰</h3><ul><li>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨ <strong>ä¸</strong> å®Œæˆã€‚</li><li>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡å•å…ƒæäº¤åæ‰å¯ä»¥è¢«å…¶ä»–äº‹åŠ¡æŸ¥çœ‹åˆ°ã€‚</li><li>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šå¹¶å‘äº‹åŠ¡ä¹‹é—´ä¸ç›¸äº’å½±å“ã€‚<em>è®¾ç«‹äº†ä¸åŒçš„éš”ç¦»çº§åˆ«ï¼Œé€šè¿‡é€‚åº¦ç ´åä¸€è‡´æ€§æ¥æé«˜æ€§èƒ½</em></li><li>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šäº‹ç‰©æäº¤ä¹‹åå³æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ä¸ä¼šä¸¢å¤±ã€‚</li></ul><p><em><strong>é”åªæ˜¯å®ç°éš”ç¦»çº§åˆ«çš„å‡ ç§æ–¹å¼ä¹‹ä¸€ï¼Œé™¤äº†é”ï¼Œå®ç°å¹¶å‘é—®é¢˜çš„æ–¹å¼è¿˜æœ‰æ—¶é—´æˆ³ï¼Œå¤šç‰ˆæœ¬æ§åˆ¶ç­‰ç­‰ï¼Œè¿™äº›ä¹Ÿå¯ä»¥ç§°ä¸ºæ— é”çš„å¹¶å‘æ§åˆ¶ã€‚</strong></em></p><h3 id="å››ç§éš”ç¦»çº§åˆ«"><a href="#å››ç§éš”ç¦»çº§åˆ«" class="headerlink" title="å››ç§éš”ç¦»çº§åˆ«"></a>å››ç§éš”ç¦»çº§åˆ«</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">#æŸ¥è¯¢å½“å‰éš”ç¦»çº§åˆ«</span><span class="token keyword">select</span> @<span class="token variable">@global.tx_isolation</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">#æŸ¥è¯¢å…¨å±€éš”ç¦»çº§åˆ«</span><span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation level</span> <span class="token keyword">read</span> <span class="token keyword">uncommitted</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">#è®¾ç½®å½“å‰éš”ç¦»çº§åˆ«ä¸º RU</span><span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation level</span> <span class="token keyword">read</span> <span class="token keyword">committed</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">#è®¾ç½®å½“å‰éš”ç¦»çº§åˆ«ä¸º RC</span><span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation level</span> <span class="token keyword">repeatable</span> <span class="token keyword">read</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">#è®¾ç½®å½“å‰éš”ç¦»çº§åˆ«ä¸º RR</span><span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation level</span> <span class="token keyword">serializable</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">#è®¾ç½®å½“å‰éš”ç¦»çº§åˆ«ä¸º RS</span></code></pre><ul><li>è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰ï¼šäº‹åŠ¡çš„è¯»ä¸é˜»å¡å…¶ä»–äº‹åŠ¡çš„è¯»å’Œå†™ï¼Œäº‹åŠ¡çš„å†™åªé˜»å¡å…¶ä»–äº‹åŠ¡çš„å†™ï¼Œä½†ä¸é˜»å¡è¯»ã€‚<strong>é€šè¿‡å¯¹å†™æ“ä½œåŠ â€œæŒç»­ X é”â€ï¼Œå¯¹è¯»æ“ä½œä¸åŠ é”å®ç°ã€‚</strong></li><li>è¯»å·²æäº¤ï¼ˆRead Committedï¼‰ï¼šäº‹åŠ¡çš„è¯»ä¸é˜»å¡å…¶ä»–äº‹åŠ¡çš„è¯»å’Œå†™ï¼Œäº‹åŠ¡çš„å†™ä¹Ÿä¼šé˜»å¡å…¶ä»–äº‹åŠ¡çš„è¯»å’Œå†™ã€‚<strong>é€šè¿‡å¯¹å†™æ“ä½œåŠ â€œæŒç»­ X é”â€ï¼Œå¯¹è¯»æ“ä½œåŠ â€œä¸´æ—¶ S é”â€å®ç°ã€‚</strong></li><li>å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰ï¼šäº‹åŠ¡çš„è¯»ä¼šé˜»å¡å…¶ä»–äº‹åŠ¡çš„å†™ï¼Œä½†ä¸é˜»å¡è¯»ã€‚äº‹åŠ¡çš„å†™ä¼šé˜»å¡å…¶ä»–äº‹åŠ¡çš„è¯»å’Œå†™ã€‚<strong>é€šè¿‡å¯¹å†™æ“ä½œåŠ â€œæŒç»­ X é”â€ï¼Œå¯¹è¯»æ“ä½œåŠ â€œæŒç»­ S é”â€å®ç°ã€‚</strong></li><li>åºåˆ—åŒ–ï¼ˆSerializableï¼‰ï¼šæœ€å®‰å…¨çš„ä¸€ç§çº§åˆ«ï¼Œä¸ä¼šå‡ºç°è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜ã€‚ä½†æ˜¯å¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„è¶…æ—¶ç°è±¡å’Œé”ç«äº‰ã€‚<strong>ä½¿ç”¨çš„æ˜¯è¡¨çº§é”</strong></li></ul><h3 id="å¯èƒ½äº§ç”Ÿçš„é—®é¢˜"><a href="#å¯èƒ½äº§ç”Ÿçš„é—®é¢˜" class="headerlink" title="å¯èƒ½äº§ç”Ÿçš„é—®é¢˜"></a>å¯èƒ½äº§ç”Ÿçš„é—®é¢˜</h3><p><img src="http://static.xiangdangnian.net.cn/blog/WX20190219-093153@2x.png" alt="WX20190219-093153@2x.png"></p><h4 id="è„è¯»"><a href="#è„è¯»" class="headerlink" title="è„è¯»"></a>è„è¯»</h4><p>å…¬å¸å‘å·¥èµ„ï¼Œæ‰“äº†10000ä¸‡åˆ°æˆ‘çš„è´¦æˆ·ï¼Œä½†æ˜¯è¯¥äº‹åŠ¡æ²¡æœ‰æäº¤ã€‚è¿™æ—¶æˆ‘æ­£å¥½æŸ¥çœ‹è´¦æˆ·ï¼Œå‘ç°10000å…ƒå·²ç»åˆ°è´¦ï¼Œéå¸¸å¼€å¿ƒã€‚å¯ä»¥å…¬å¸è¿™æ—¶åˆå‘ç°å‘é”™äº†ï¼Œäºæ˜¯å›æ»šäº‹åŠ¡ï¼Œä¿®æ”¹é‡‘é¢ä¸º5000ï¼Œç„¶åæäº¤äº‹åŠ¡ã€‚æœ€ç»ˆæˆ‘å®é™…å¾—åˆ°çš„å·¥èµ„åªæœ‰5000ï¼Œç©ºæ¬¢å–œä¸€åœºã€‚</p><blockquote><p>è¿™å°±æ˜¯è„è¯»ï¼Œä¸¤ä¸ªå¹¶å‘çš„äº‹åŠ¡ï¼Œå…¶ä¸­ä¸€ä¸ªè¯»å–åˆ°äº†å¦ä¸€ä¸ªæ²¡æœ‰æäº¤çš„æ•°æ®ã€‚</p></blockquote><h4 id="ä¸å¯é‡å¤è¯»"><a href="#ä¸å¯é‡å¤è¯»" class="headerlink" title="ä¸å¯é‡å¤è¯»"></a>ä¸å¯é‡å¤è¯»</h4><p>æ‹¿ç€åˆšå‘çš„å·¥èµ„å»ä¹°æœ¬ä¹¦çœ‹çœ‹ï¼Œä»˜é’±æ—¶ç³»ç»Ÿè¯»åˆ°æˆ‘å¡é‡Œæœ‰5000å…ƒï¼Œç„¶è€Œæ­¤æ—¶å¥³å‹ä¹Ÿæ‹¿ç€æˆ‘çš„å¡åœ¨æ¶ˆè´¹ï¼Œå¹¶èŠ±å®Œäº†å¡é‡Œçš„é’±ï¼Œå¹¶åœ¨æˆ‘ä¹‹å‰æäº¤äº†äº‹åŠ¡ï¼Œå½“æˆ‘è¿™è¾¹è¿›è¡Œæ‰£æ¬¾çš„æ—¶å€™ç³»ç»Ÿå‘ç°å¡é‡Œæ²¡æœ‰é’±äº†ï¼Œæç¤ºæ‰£æ¬¾å¤±è´¥ã€‚æˆ‘å°±ååˆ†çº³é—·ï¼Œæ˜æ˜æœ‰é’±å•Šï¼Œæ€ä¹ˆã€‚ã€‚ã€‚</p><blockquote><p> è¿™å°±æ˜¯ä¸å¯é‡å¤è¯»ï¼Œä¸¤ä¸ªå¹¶å‘äº‹åŠ¡ï¼Œåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡ä¸­æäº¤äº†çš„ç»“æœï¼Œç¬¬ä¸€äº‹åŠ¡åœ¨ç¬¬äºŒä¸ªäº‹åŠ¡æäº¤å‰å’Œæäº¤åæŸ¥çœ‹åˆ°çš„ç»“æœä¸ä¸€è‡´ã€‚ï¼ˆä¸»è¦æ˜¯é’ˆå¯¹æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼‰<strong>å½“éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºRead committedæ—¶ï¼Œé¿å…äº†è„è¯»ï¼Œä½†æ˜¯å¯èƒ½ä¼šé€ æˆä¸å¯é‡å¤è¯»ã€‚</strong></p></blockquote><h4 id="å¹»è¯»"><a href="#å¹»è¯»" class="headerlink" title="å¹»è¯»"></a>å¹»è¯»</h4><p>æˆ‘åˆä¸€ä¸ªè®¡åˆ’ä»»åŠ¡è¡¨ï¼Œå½“å‰ä¸ºç©ºçš„ã€‚åœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­æˆ‘æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡æ˜¾ç¤ºä¸ºç©ºã€‚è¿™æ—¶å¥³å‹åœ¨å¦ä¸€ä¸ªäº‹åŠ¡å¢åŠ äº†ä¸€æ¡ä»»åŠ¡â€œæ—©ä¸Šèµ·åºŠåšæ—©é¥­â€ï¼Œå¹¶æäº¤äº†äº‹åŠ¡ã€‚è¿™æ˜¯æˆ‘åˆæŸ¥çœ‹äº†ä¸€ä¸‹æ‰€æœ‰ä»»åŠ¡å‘ç°è¿˜æ˜¯ç©ºçš„ï¼Œæˆ‘å°±å‡†å¤‡åŠ ä¸€ä¸ªä»»åŠ¡â€œæ—©ä¸Šèµ·åºŠåšæ—©é¥­â€ï¼Œå¯æ˜¯è¿™æ—¶å´æç¤ºæˆ‘é”™è¯¯ã€‚æˆ‘å°±çº³äº†é—·äº†ï¼Œæ˜æ˜æ²¡æœ‰æ•°æ®å•Šï¼Œæ€ä¹ˆä¸è®©æˆ‘åŠ å‘¢ï¼Ÿéš¾é“å‡ºç°äº†å¹»è§‰ï¼Ÿ</p><blockquote><p>è¿™å°±æ˜¯å¹»è¯»ã€‚ç¬¬ä¸€ä¸ªäº‹åŠ¡å¯¹ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè¿™ç§ä¿®æ”¹æ¶‰åŠåˆ°è¡¨ä¸­çš„å…¨éƒ¨æ•°æ®è¡Œã€‚åŒæ—¶ï¼Œç¬¬äºŒä¸ªäº‹åŠ¡ä¹Ÿä¿®æ”¹è¿™ä¸ªè¡¨ä¸­çš„æ•°æ®ï¼Œè¿™ç§ä¿®æ”¹æ˜¯å‘è¡¨ä¸­æ’å…¥ä¸€è¡Œæ–°æ•°æ®ã€‚é‚£ä¹ˆï¼Œä»¥åå°±ä¼šå‘ç”Ÿæ“ä½œç¬¬ä¸€ä¸ªäº‹åŠ¡çš„ç”¨æˆ·å‘ç°è¡¨ä¸­è¿˜æœ‰æ²¡æœ‰ä¿®æ”¹çš„æ•°æ®è¡Œï¼Œå°±å¥½è±¡å‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ã€‚ï¼ˆä¸»è¦é’ˆå¯¹æ–°å¢æ“ä½œï¼‰</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°è´Ÿè½½å‡è¡¡</title>
      <link href="/2019/01/27/%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
      <url>/2019/01/27/%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¶æ„å›¾"><a href="#æ¶æ„å›¾" class="headerlink" title="æ¶æ„å›¾"></a>æ¶æ„å›¾</h2><p><img src="http://static.xiangdangnian.net.cn/blog/2019-01-273.56.02.png" alt="æ¶æ„å›¾"></p><blockquote><p>ç®€ä»‹ï¼š ç”¨æˆ·è®¿é—®è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨å°†ç›¸åº”çš„è¯·æ±‚è½¬å‘è‡³åº”ç”¨æœåŠ¡å™¨APP1æˆ–APP2ã€‚å½“å‰å…¶ä¸­ä¸€å°åº”ç”¨æœåŠ¡å™¨downè°ƒçš„æ—¶å€™ï¼Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨å°†ä¼šæŠŠè¯·æ±‚è½¬å‘è‡³å¦ä¸€å°æ­£å¸¸çš„æœåŠ¡å™¨ä¸Šã€‚</p></blockquote><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><h3 id="å®‰è£…è´Ÿè½½å‡è¡¡æœåŠ¡å™¨"><a href="#å®‰è£…è´Ÿè½½å‡è¡¡æœåŠ¡å™¨" class="headerlink" title="å®‰è£…è´Ÿè½½å‡è¡¡æœåŠ¡å™¨"></a>å®‰è£…è´Ÿè½½å‡è¡¡æœåŠ¡å™¨</h3><h4 id="å®‰è£…å¹¶å¯åŠ¨-nginx-æˆ–ä½¿ç”¨-jellybool-çš„-sh-è„šæœ¬"><a href="#å®‰è£…å¹¶å¯åŠ¨-nginx-æˆ–ä½¿ç”¨-jellybool-çš„-sh-è„šæœ¬" class="headerlink" title="å®‰è£…å¹¶å¯åŠ¨ nginx (æˆ–ä½¿ç”¨ jellybool çš„ sh è„šæœ¬)"></a>å®‰è£…å¹¶å¯åŠ¨ nginx (<a href="https://github.com/JellyBool/laravel-server-script/blob/master/laravel-nginx-proxy-server.sh" target="_blank" rel="noopener">æˆ–ä½¿ç”¨ jellybool çš„ sh è„šæœ¬</a>)</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update<span class="token function">sudo</span> LC_ALL<span class="token operator">=</span>en_US.UTF-8 add-apt-repository ppa:nginx/development -y<span class="token function">sudo</span> <span class="token function">apt-get</span> update<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> nginx<span class="token function">sudo</span> <span class="token function">cp</span> /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak<span class="token function">sudo</span> <span class="token function">service</span> nginx start</code></pre><h4 id="é…ç½®-nginx-æœåŠ¡å™¨ä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨"><a href="#é…ç½®-nginx-æœåŠ¡å™¨ä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨" class="headerlink" title="é…ç½® nginx æœåŠ¡å™¨ä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨"></a>é…ç½® nginx æœåŠ¡å™¨ä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨</h4><pre class=" language-nginx"><code class="language-nginx"><span class="token keyword">upstream</span> backend <span class="token punctuation">{</span>    <span class="token keyword">server</span> pravite<span class="token operator">-</span>ip<span class="token operator">-</span>address<span class="token number">-1</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">#åº”ç”¨æœåŠ¡å™¨ipåœ°å€</span>    <span class="token keyword">server</span> pravite<span class="token operator">-</span>ip<span class="token operator">-</span>address<span class="token number">-2</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">#åº”ç”¨æœåŠ¡å™¨ipåœ°å€</span><span class="token punctuation">}</span><span class="token keyword">server</span> <span class="token punctuation">{</span>    <span class="token keyword">listen</span> <span class="token number">80</span> default_server<span class="token punctuation">;</span>    <span class="token keyword">listen</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token number">80</span> default_server<span class="token punctuation">;</span>    <span class="token keyword">server_name</span> nuli<span class="token punctuation">.</span>io www<span class="token punctuation">.</span>nuli<span class="token punctuation">.</span>io<span class="token punctuation">;</span>    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>        <span class="token keyword">add_header</span> X<span class="token operator">-</span>Content<span class="token operator">-</span>Type<span class="token operator">-</span>Options nosniff<span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Scheme <span class="token variable">$scheme</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> Host <span class="token variable">$http_host</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>NginX<span class="token operator">-</span><span class="token keyword">Proxy</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">proxy_hide_header</span> X<span class="token operator">-</span>Powered<span class="token operator">-</span>By<span class="token punctuation">;</span>        <span class="token keyword">proxy_hide_header</span> Vary<span class="token punctuation">;</span>        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>backend<span class="token punctuation">;</span>        <span class="token keyword">proxy_redirect</span> off<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="æ£€æµ‹-nginx-é…ç½®å¹¶é‡å¯-nginx-æœåŠ¡"><a href="#æ£€æµ‹-nginx-é…ç½®å¹¶é‡å¯-nginx-æœåŠ¡" class="headerlink" title="æ£€æµ‹ nginx é…ç½®å¹¶é‡å¯ nginx æœåŠ¡"></a>æ£€æµ‹ nginx é…ç½®å¹¶é‡å¯ nginx æœåŠ¡</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> nginx -t<span class="token function">sudo</span> <span class="token function">service</span> nginx reload</code></pre><h3 id="å®‰è£…åº”ç”¨æœåŠ¡å™¨-APP1"><a href="#å®‰è£…åº”ç”¨æœåŠ¡å™¨-APP1" class="headerlink" title="å®‰è£…åº”ç”¨æœåŠ¡å™¨ APP1"></a>å®‰è£…åº”ç”¨æœåŠ¡å™¨ APP1</h3><h4 id="å®‰è£…-nginx-å’Œ-php-ä»¥åŠ-php-æ‰©å±•-æˆ–ä½¿ç”¨-jellybool-çš„-sh-è„šæœ¬"><a href="#å®‰è£…-nginx-å’Œ-php-ä»¥åŠ-php-æ‰©å±•-æˆ–ä½¿ç”¨-jellybool-çš„-sh-è„šæœ¬" class="headerlink" title="å®‰è£… nginx å’Œ php ä»¥åŠ php æ‰©å±•  æˆ–ä½¿ç”¨ jellybool çš„ sh è„šæœ¬"></a>å®‰è£… nginx å’Œ php ä»¥åŠ php æ‰©å±•  <a href="https://github.com/JellyBool/laravel-server-script/blob/master/laravel-app-server.sh" target="_blank" rel="noopener">æˆ–ä½¿ç”¨ jellybool çš„ sh è„šæœ¬</a></h4><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> zsh <span class="token function">htop</span> <span class="token function">zip</span> unzip composer<span class="token function">sudo</span> LC_ALL<span class="token operator">=</span>en_US.UTF-8 add-apt-repository ppa:nginx/development -y<span class="token function">sudo</span> <span class="token function">apt-get</span> update<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> nginx<span class="token function">sudo</span> <span class="token function">service</span> nginx start<span class="token function">sudo</span> LC_ALL<span class="token operator">=</span>en_US.UTF-8 add-apt-repository ppa:ondrej/php -y<span class="token function">sudo</span> <span class="token function">apt-get</span> update<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> php7.2<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> php7.2-mysql<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> php7.2-fpm<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> php7.2-curl php7.2-xml php7.2-json php7.2-gd php7.2-mbstring php7.2-bcmath<span class="token function">sudo</span> <span class="token function">service</span> php7.2-fpm restart<span class="token function">sudo</span> <span class="token function">cp</span> /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak</code></pre><h3 id="å®‰è£…åº”ç”¨æœåŠ¡å™¨-APP2-åŒ-APP1"><a href="#å®‰è£…åº”ç”¨æœåŠ¡å™¨-APP2-åŒ-APP1" class="headerlink" title="å®‰è£…åº”ç”¨æœåŠ¡å™¨ APP2 (åŒ APP1)"></a>å®‰è£…åº”ç”¨æœåŠ¡å™¨ APP2 (åŒ APP1)</h3><h3 id="æµ‹è¯•è´Ÿè½½å‡è¡¡"><a href="#æµ‹è¯•è´Ÿè½½å‡è¡¡" class="headerlink" title="æµ‹è¯•è´Ÿè½½å‡è¡¡"></a>æµ‹è¯•è´Ÿè½½å‡è¡¡</h3><ol><li>åœ¨ APP1 æœåŠ¡å™¨ä¸Šçš„ <code>/var/www/html</code> ç›®å½•ä¸‹å°† <code>index.html</code>æ–‡ä»¶å†…å®¹æ›´æ”¹ä¸º APP1ã€‚</li><li>åœ¨ APP2 æœåŠ¡å™¨ä¸Šçš„ <code>/var/www/html</code> ç›®å½•ä¸‹å°† <code>index.html</code>æ–‡ä»¶å†…å®¹æ›´æ”¹ä¸º APP2ã€‚</li><li>è®¿é—®è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ ip åœ°å€æˆ–é…ç½®çš„åŸŸåã€‚æ­¤æ—¶é¡µé¢å°†äº¤æ›¿æ˜¾ç¤º APP1 å’Œ APP2 ã€‚~~~æˆåŠŸã€‚</li></ol><h3 id="ä½¿ç”¨-Envoy-å°†-Laravel-é¡¹ç›®åŒæ—¶éƒ¨ç½²åœ¨æ‰€æœ‰è´Ÿè½½å‡è¡¡çš„æœºå™¨ä¸Š"><a href="#ä½¿ç”¨-Envoy-å°†-Laravel-é¡¹ç›®åŒæ—¶éƒ¨ç½²åœ¨æ‰€æœ‰è´Ÿè½½å‡è¡¡çš„æœºå™¨ä¸Š" class="headerlink" title="ä½¿ç”¨ Envoy å°† Laravel é¡¹ç›®åŒæ—¶éƒ¨ç½²åœ¨æ‰€æœ‰è´Ÿè½½å‡è¡¡çš„æœºå™¨ä¸Š"></a>ä½¿ç”¨ Envoy å°† Laravel é¡¹ç›®åŒæ—¶éƒ¨ç½²åœ¨æ‰€æœ‰è´Ÿè½½å‡è¡¡çš„æœºå™¨ä¸Š</h3><ol><li>åœ¨æœ¬æœºä¸Šåˆ›å»º Laravel é¡¹ç›®</li><li>å°†é¡¹ç›®æäº¤åˆ° coding æˆ– github ä¸Š</li><li>é…ç½® coding æˆ– github çš„ssh ï¼ˆå¯é€‰ï¼‰</li><li>ä½¿ç”¨ ssh æˆ– https çš„æ–¹å¼å°†é¡¹ç›®éƒ¨ç½²åˆ° APP1 å’Œ APP2 æœåŠ¡å™¨ä¸Š</li><li>é…ç½®ä¸¤å°æœåŠ¡å™¨çš„ .env æ–‡ä»¶ <strong><strong>ä¿è¯ä¸¤å°æœåŠ¡å™¨çš„ APP_KEY è¦ä¸€ç›´</strong></strong></li><li>æµ‹è¯•â€”â€”<em>è®¿é—®è´Ÿè½½å‡è¡¡æœåŠ¡å™¨å¯ä»¥çœ‹åˆ° Laravel æ¬¢è¿è¯­</em></li><li>åœ¨æœ¬æœºä¸­çš„ Laravel é¡¹ç›®ä¸­å®‰è£… Envoy æ‰©å±•  <a href="https://laravel-china.org/docs/laravel/5.7/envoy/2307" target="_blank" rel="noopener">å‚è€ƒæ–‡æ¡£</a></li><li>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å¢ <code>Envoy.blade.php</code> æ–‡ä»¶å¹¶åœ¨æ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹å†…å®¹ã€‚ã€Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šæœ¬æœºå¯ä»¥é€šè¿‡ ssh çš„æ–¹å¼è®¿é—®å¯¹åº”çš„æœåŠ¡å™¨ã€</li></ol><pre class=" language-php"><code class="language-php">@<span class="token function">servers</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'web-1'</span>  <span class="token operator">=</span><span class="token operator">></span>  <span class="token string">'ssh root@192.168.3.11'</span><span class="token punctuation">,</span> <span class="token string">'web-2'</span>  <span class="token operator">=</span><span class="token operator">></span>  <span class="token string">'ssh root@192.168.3.11'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>@<span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'deploy'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'on'</span>  <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'web-1'</span><span class="token punctuation">,</span> <span class="token string">'web-2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'parallel'</span>  <span class="token operator">=</span><span class="token operator">></span>  <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span>cd <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>laravel<span class="token operator">-</span>deploy   sudo git pull origin master@endtask</code></pre><ol start="9"><li>è¿è¡Œéƒ¨ç½²å‘½ä»¤ <code>envoy run deploy</code>,å¦‚æœè¾“å‡ºå†…å®¹æ²¡æœ‰é”™è¯¯çš„è¯ï¼Œå°±è¡¨ç¤ºéƒ¨ç½²æˆåŠŸï¼Œå°±å¯ä»¥åœ¨è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¸Šè¿›è¡ŒæŸ¥çœ‹äº†ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> æœåŠ¡å™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> nginx </tag>
            
            <tag> è´Ÿè½½å‡è¡¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CGI, Fast-CGIï¼ŒPHP-CGIï¼ŒPHP-FPM å‡ ä¸ªæ¦‚å¿µçš„æ€»ç»“</title>
      <link href="/2019/01/24/cgi-fast-cgi-php-cgi-php-fpm%E7%90%86%E8%A7%A3-md/"/>
      <url>/2019/01/24/cgi-fast-cgi-php-cgi-php-fpm%E7%90%86%E8%A7%A3-md/</url>
      
        <content type="html"><![CDATA[<blockquote><p>2020-2-6 æ›´æ–°</p></blockquote><p><strong> æœ€è¿‘åˆçœ‹åˆ°ä¸€ç¯‡<a href="https://segmentfault.com/q/1010000000256516" target="_blank" rel="noopener">æ–‡ç« </a>ï¼Œè®²è§£çš„éå¸¸åˆ°ä½ï¼Œåœ¨æ›´æ­£ä¸€ä¸‹ä¹‹å‰çš„ç»“è®º  </strong></p><ol><li><p>cgiã€fast-cgi éƒ½æ˜¯åè®®ï¼Œè§„å®šäº† web server éœ€è¦ä¼ é€’é‚£äº›æ•°æ®ç»™ php è§£é‡Šå™¨ã€‚ä»–ä»¬çš„åŒºåˆ«æ˜¯ cgi æ¯æ¬¡éƒ½éœ€è¦åŠ è½½é…ç½®æ–‡ä»¶æ¥åˆå§‹åŒ–ï¼Œè€Œ fast-cgi ä¼šå…ˆå¯ä¸€ä¸ªmasterï¼Œè§£æé…ç½®æ–‡ä»¶ï¼Œåˆå§‹åŒ–æ‰§è¡Œç¯å¢ƒï¼Œç„¶åå†å¯åŠ¨å¤šä¸ªworkerã€‚å½“è¯·æ±‚è¿‡æ¥æ—¶ï¼Œmasterä¼šä¼ é€’ç»™ä¸€ä¸ªworkerï¼Œç„¶åç«‹å³å¯ä»¥æ¥å—ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚è¿™æ ·å°±é¿å…äº†é‡å¤çš„åŠ³åŠ¨ï¼Œæ•ˆç‡è‡ªç„¶æ˜¯é«˜ã€‚</p></li><li><p>php-cgi ç›¸å½“äº php çš„ä¸€ä¸ªè§£é‡Šå™¨æ˜¯ä¸€ä¸ªå…·ä½“çš„ç¨‹åºï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿä¸­çš„è¿›ç¨‹ã€‚è€Œ php-fpm æ˜¯ä¸€ä¸ªå®ç°äº† fast-cgi çš„å…·ä½“ç¨‹åºï¼Œç”¨æ¥ç®¡ç† php-cgi è¿›ç¨‹ã€‚</p></li></ol><hr><blockquote><p>2019-6-27 æ›´æ–°</p></blockquote><p><strong> æœ€è¿‘åˆçœ‹åˆ°äº†ç±»ä¼¼çš„æ–‡ç« ï¼Œå‘ç°ä¹‹å‰è®°å½•çš„å¥½åƒæ˜¯ä¸å¤ªå¯¹ã€‚ç°åœ¨ä¹Ÿä¸çŸ¥é“å“ªä¸ªæ˜¯æ­£ç¡®çš„ï¼Œå°±éƒ½å…ˆè®°ä¸‹æ¥å§ã€‚</strong> </p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><ol><li>CGIã€FastCGI åªæ˜¯PHPçš„çš„è¿è¡Œæ–¹å¼ã€‚å…¶ä»–çš„è¿˜æœ‰APACHE2HANDLERã€CLI æ–¹å¼ã€‚</li><li>PHP-FPMï¼ˆFastCGI Process Managerï¼‰ åªæ˜¯ FastCGI çš„è¿›ç¨‹ç®¡ç†å™¨ã€‚</li><li>PHP-CGI åªæ˜¯ Fast-CGI çš„å­è¿›ç¨‹ã€‚</li></ol><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a href="https://www.jb51.net/article/62554.htm" target="_blank" rel="noopener">php çš„4ç§å¸¸è§è¿è¡Œæ–¹å¼</a></p><hr><blockquote><p>åœ¨å¼€å§‹å­¦phpçš„æ—¶å€™æœ‰å‡ ä¸ªæ¦‚å¿µä¸€ç›´æ²¡æœ‰å¼„æ˜ç™½ï¼Œæœ€è¿‘æŸ¥äº†äº›èµ„æ–™ï¼Œç‰¹æ­¤è¡¥å……è®°å½•ä¸€ä¸‹ï¼Œä»¥é˜²å¿˜è®°ã€‚æœ‰ä¸å¯¹çš„åœ°æ–¹è¿˜è¯·é«˜æ‰‹æŒ‡ç‚¹ã€‚</p></blockquote><h2 id="ç»“è®º-1"><a href="#ç»“è®º-1" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><ul><li>CGIï¼šWEB æœåŠ¡å™¨ä¸ WEB åº”ç”¨ç¨‹åºä¹‹é—´äº¤æ¢æ•°æ®çš„ä¸€ç§åè®®ã€‚</li><li>FastCGIï¼šåŒ CGI ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ç§åè®®ï¼Œåªæ˜¯åœ¨æ•ˆç‡ä¸Šæ¯” CGI å¥½ä¸€äº›ã€‚</li><li>PHP-CGIï¼šfastCGI åè®®çš„ä¸€ç§å®ç°ã€‚(ä¹Ÿå°±æ˜¯ php å¯æ‰§è¡Œç›®å½•ä¸‹çš„php-cgiç¨‹åº)ã€‚ä»–æœ‰2ä¸ªé—®é¢˜ã€‚<ul><li>æ›´æ”¹é…ç½®æ–‡ä»¶åæ— æ³•å¹³æ»‘é‡å¯ã€‚</li><li>æ— æ³•åŠ¨æ€è°ƒæ•´è¿›åˆ¶å¤šå°‘ã€‚</li></ul></li><li>spawn-fcgiï¼šè§£å†³äº† php-cgi å‡ºç°çš„é—®é¢˜ã€‚ä½†å™¨ä»…ä»…æ˜¯ä¸€ä¸ªè¿›ç¨‹ç®¡ç†å™¨ã€‚</li><li>PHP-FPMï¼šå®ç°äº† Fast-CGI åè®®å¹¶ä¸”ä¹‹å‰å¹³æ»‘é‡å¯ï¼ŒåŒæ—¶è¿˜å¸¦æœ‰è¿›ç¨‹ç®¡ç†åŠŸèƒ½ã€‚</li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="https://www.ietf.org/rfc/rfc3875" target="_blank" rel="noopener">CGI åè®®å†…å®¹</a></p><p><a href="http://andylin02.iteye.com/blog/648412" target="_blank" rel="noopener">Fast-CGI åè®®å†…å®¹</a></p><p><a href="http://yongxiong.leanote.com/post/%E4%BB%8ECGI%E5%88%B0FastCGI%E5%88%B0PHP-FPM" target="_blank" rel="noopener">ä»CGIåˆ°FastCGIåˆ°PHP-FPM</a></p><p><a href="https://www.awaimai.com/371.html" target="_blank" rel="noopener">CGIã€FastCGIå’ŒPHP-FPMå…³ç³»å›¾è§£</a></p>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« </title>
      <link href="/2019/01/21/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/"/>
      <url>/2019/01/21/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« "><a href="#æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« " class="headerlink" title="æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« "></a>æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« </h1><blockquote><p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä¸»è¦è®°å½•ä¸€ä¸‹hexoåšå®¢çš„å»ºç«‹å’Œä½¿ç”¨æ–¹æ³•ã€‚</p></blockquote><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://github.com/HarleyWang93/blog/issues/1" target="_blank" rel="noopener">æ­å»ºå‚è€ƒ</a></p><p><a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md" target="_blank" rel="noopener">ä¸»é¢˜é…ç½®</a></p><h2 id="æ­å»ºè¿‡ç¨‹"><a href="#æ­å»ºè¿‡ç¨‹" class="headerlink" title="æ­å»ºè¿‡ç¨‹"></a>æ­å»ºè¿‡ç¨‹</h2><h3 id="ç¯å¢ƒå®‰è£…"><a href="#ç¯å¢ƒå®‰è£…" class="headerlink" title="ç¯å¢ƒå®‰è£…"></a>ç¯å¢ƒå®‰è£…</h3><ol><li>éœ€è¦å®‰è£…gitå’ŒNode.js</li><li>æ³¨å†ŒGithubè´¦å·</li></ol><h3 id="å®‰è£…Hexo"><a href="#å®‰è£…Hexo" class="headerlink" title="å®‰è£…Hexo"></a>å®‰è£…Hexo</h3><ol><li><p>ä½¿ç”¨npmå…¨å±€å®‰è£…hexo</p><pre class=" language-yaml"><code class="language-yaml">sudo npm install <span class="token punctuation">-</span>g hexo<span class="token punctuation">-</span>cli</code></pre></li><li><p>ä½¿ç”¨hexo init åˆå§‹åŒ–é¡¹ç›®</p><pre class=" language-yaml"><code class="language-yaml">hexo init blog</code></pre></li><li><p>ä½¿ç”¨hexo sæŸ¥çœ‹çŠ¶æ€(é»˜è®¤è®¿é—®è¯¥åœ°å€<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000 </a>)</p><pre class=" language-yaml"><code class="language-yaml">hexo s</code></pre></li></ol><h3 id="å…³è”Github"><a href="#å…³è”Github" class="headerlink" title="å…³è”Github"></a>å…³è”Github</h3><ol><li>åˆ›å»ºä»“åº“</li><li>å¼€å¯Github Pages</li><li>é€‰æ‹©åˆ†æ”¯</li></ol><h3 id="ä¿®æ”¹å…¨å±€é…ç½®-æ³¨æ„ï¼šæ¯ä¸ªå†’å·åé¢éƒ½æœ‰ä¸ªç©ºæ ¼"><a href="#ä¿®æ”¹å…¨å±€é…ç½®-æ³¨æ„ï¼šæ¯ä¸ªå†’å·åé¢éƒ½æœ‰ä¸ªç©ºæ ¼" class="headerlink" title="ä¿®æ”¹å…¨å±€é…ç½®(æ³¨æ„ï¼šæ¯ä¸ªå†’å·åé¢éƒ½æœ‰ä¸ªç©ºæ ¼)"></a>ä¿®æ”¹å…¨å±€é…ç½®(æ³¨æ„ï¼šæ¯ä¸ªå†’å·åé¢éƒ½æœ‰ä¸ªç©ºæ ¼)</h3><p>åœ¨é¡¹ç›®ä¸­æ‰¾åˆ°_config.ymlæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ€åæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>    <span class="token key atrule">type</span><span class="token punctuation">:</span> git    <span class="token key atrule">repository</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/xxx/xxx.github.io.git  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master</code></pre><h3 id="ç”Ÿæˆé™æ€é¡µé¢"><a href="#ç”Ÿæˆé™æ€é¡µé¢" class="headerlink" title="ç”Ÿæˆé™æ€é¡µé¢"></a>ç”Ÿæˆé™æ€é¡µé¢</h3><ol><li>æ‰§è¡Œç”Ÿæˆé™æ€æ–‡ä»¶å‘½ä»¤</li></ol><pre class=" language-yaml"><code class="language-yaml">hexo g</code></pre><ol start="2"><li>å®‰è£…gitä¸Šä¼ æ’ä»¶</li></ol><pre class=" language-yaml"><code class="language-yaml">npm install hexo<span class="token punctuation">-</span>deployer<span class="token punctuation">-</span>git <span class="token punctuation">-</span><span class="token punctuation">-</span>save</code></pre><ol start="3"><li>æ‰§è¡Œä¸Šä¼ é™æ€æ–‡ä»¶å‘½ä»¤</li></ol><pre class=" language-yaml"><code class="language-yaml">hexo d</code></pre><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><pre><code>hexo new &quot;æ–‡ç« æ ‡é¢˜&quot;         //æ–°å»ºæ–‡ç« hexo new page &quot;é¡µé¢å&quot;      //æ–°å»ºé¡µé¢hexo g                     //ç”Ÿæˆé™æ€æ–‡ä»¶è‡³publicç›®å½•hexo server                //å¼€å¯æœ¬åœ°è®¿é—®hexo deploy                //éƒ¨ç½²åˆ°github</code></pre><h2 id="ä¸»é¢˜ä½¿ç”¨"><a href="#ä¸»é¢˜ä½¿ç”¨" class="headerlink" title="ä¸»é¢˜ä½¿ç”¨"></a>ä¸»é¢˜ä½¿ç”¨</h2><blockquote><p>å…·ä½“è¯¦ç»†å†…å®¹æŸ¥çœ‹é¡¹ç›®é“¾æ¥ <a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md" target="_blank" rel="noopener">hexo-theme-matery</a></p></blockquote><h3 id="æ–‡ç« å¤´éƒ¨ç¤ºä¾‹"><a href="#æ–‡ç« å¤´éƒ¨ç¤ºä¾‹" class="headerlink" title="æ–‡ç« å¤´éƒ¨ç¤ºä¾‹"></a>æ–‡ç« å¤´éƒ¨ç¤ºä¾‹</h3><pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> typora<span class="token punctuation">-</span>vue<span class="token punctuation">-</span>themeä¸»é¢˜ä»‹ç»<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-07 09:25:00</span><span class="token key atrule">author</span><span class="token punctuation">:</span> èµµå¥‡<span class="token key atrule">img</span><span class="token punctuation">:</span> /source/images/xxx.jpg <span class="token comment" spellcheck="true"># æˆ–è€…:http://xxx.com/xxx.jpg</span><span class="token key atrule">top</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment" spellcheck="true"># å¦‚æœtopå€¼ä¸ºtrueï¼Œåˆ™ä¼šæ˜¯é¦–é¡µæ¨èæ–‡ç« </span><span class="token comment" spellcheck="true"># å¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥åœ¨è®¾ç½®passwordçš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨SHA256åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´</span><span class="token key atrule">password</span><span class="token punctuation">:</span> 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92<span class="token comment" spellcheck="true"># æœ¬æ–‡ç« æ˜¯å¦å¼€å¯mathjaxï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„_config.ymlæ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ</span><span class="token key atrule">mathjax</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">categories</span><span class="token punctuation">:</span> Markdown<span class="token key atrule">tags</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> Typora  <span class="token punctuation">-</span> Markdown<span class="token punctuation">---</span></code></pre><blockquote><ol><li>å¦‚æœimgå±æ€§ä¸å¡«å†™çš„è¯ï¼Œæ–‡ç« ç‰¹è‰²å›¾ä¼šæ ¹æ®æ–‡ç« æ ‡é¢˜çš„hashcodeçš„å€¼å–ä½™ï¼Œç„¶åé€‰å–ä¸»é¢˜ä¸­å¯¹åº”çš„ç‰¹è‰²å›¾ç‰‡ï¼Œä»è€Œè¾¾åˆ°è®©æ‰€æœ‰æ–‡ç« éƒ½çš„ç‰¹è‰²å›¾å„æœ‰ç‰¹è‰²ã€‚</li><li>dateçš„å€¼å°½é‡ä¿è¯æ¯ç¯‡æ–‡ç« æ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºæœ¬ä¸»é¢˜ä¸­Gitalkå’ŒGitmentè¯†åˆ«idæ˜¯é€šè¿‡dateçš„å€¼æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„ã€‚</li><li>å¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„åŠŸèƒ½ï¼Œä¸ä»…è¦åœ¨Front-matterä¸­è®¾ç½®é‡‡ç”¨äº†SHA256åŠ å¯†çš„passwordçš„å€¼ï¼Œè¿˜éœ€è¦åœ¨ä¸»é¢˜çš„_config.ymlä¸­æ¿€æ´»äº†é…ç½®ã€‚æœ‰äº›åœ¨çº¿çš„ SHA256 åŠ å¯†çš„åœ°å€ï¼Œå¯ä¾›ä½ ä½¿ç”¨ï¼šå¼€æºä¸­å›½åœ¨çº¿å·¥å…·ã€chahuoã€ç«™é•¿å·¥å…·ã€‚</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> å°æŠ€å·§ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
